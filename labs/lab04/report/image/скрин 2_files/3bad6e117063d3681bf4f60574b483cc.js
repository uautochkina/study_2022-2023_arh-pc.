(self.webpackChunkvk=self.webpackChunkvk||[]).push([[23299],{47066:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n=(0,r(55869).makeIcon)("Icon12Dropdown","dropdown_12","0 0 12 8",'<symbol fill="none" viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg" id="dropdown_12"><path clip-rule="evenodd" d="M2.156 2.295a.75.75 0 0 1 1.051-.137L6 4.306l2.793-2.148a.75.75 0 1 1 .914 1.189l-3.25 2.5a.75.75 0 0 1-.914 0l-3.25-2.5a.75.75 0 0 1-.137-1.052z" fill="currentColor" fill-rule="evenodd" /></symbol>',12,8)},46830:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n=(0,r(55869).makeIcon)("Icon16SearchOutline","search_outline_16","0 0 16 16",'<symbol fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="search_outline_16"><path d="M6.5 1a5.5 5.5 0 0 1 4.383 8.823l3.896 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1zm0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" fill="currentColor" /></symbol>',16,16)},76109:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const n=(0,r(55869).makeIcon)("Icon24Cancel","cancel_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="cancel_24"><path d="M7.536 6.264a.9.9 0 0 0-1.272 1.272L10.727 12l-4.463 4.464a.9.9 0 0 0 1.272 1.272L12 13.273l4.464 4.463a.9.9 0 1 0 1.272-1.272L13.273 12l4.463-4.464a.9.9 0 1 0-1.272-1.272L12 10.727 7.536 6.264Z" /></symbol>',24,24)},9669:(e,t,r)=>{e.exports=r(51609)},55448:(e,t,r)=>{"use strict";var n=r(64867),a=r(36026),s=r(4372),o=r(15327),i=r(94097),c=r(84109),u=r(67985),l=r(77874),d=r(82648),p=r(60644),f=r(90205);e.exports=function(e){return new Promise((function(t,r){var h,v=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}n.isFormData(v)&&n.isStandardBrowserEnv()&&delete m["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(w+":"+k)}var C=i(e.baseURL,e.url);function _(){if(b){var n="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:n,config:e,request:b};a((function(e){t(e),y()}),(function(e){r(e),y()}),s),b=null}}if(b.open(e.method.toUpperCase(),o(C,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=_:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(_)},b.onabort=function(){b&&(r(new d("Request aborted",d.ECONNABORTED,e,b)),b=null)},b.onerror=function(){r(new d("Network Error",d.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new d(t,n.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,b)),b=null},n.isStandardBrowserEnv()){var I=(e.withCredentials||u(C))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;I&&(m[e.xsrfHeaderName]=I)}"setRequestHeader"in b&&n.forEach(m,(function(e,t){void 0===v&&"content-type"===t.toLowerCase()?delete m[t]:b.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),g&&"json"!==g&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){b&&(r(!e||e&&e.type?new p:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),v||(v=null);var S=f(C);S&&-1===["http","https","file"].indexOf(S)?r(new d("Unsupported protocol "+S+":",d.ERR_BAD_REQUEST,e)):b.send(v)}))}},51609:(e,t,r)=>{"use strict";var n=r(64867),a=r(91849),s=r(30321),o=r(47185);var i=function e(t){var r=new s(t),i=a(s.prototype.request,r);return n.extend(i,s.prototype,r),n.extend(i,r),i.create=function(r){return e(o(t,r))},i}(r(45546));i.Axios=s,i.CanceledError=r(60644),i.CancelToken=r(14972),i.isCancel=r(26502),i.VERSION=r(97288).version,i.toFormData=r(47675),i.AxiosError=r(82648),i.Cancel=i.CanceledError,i.all=function(e){return Promise.all(e)},i.spread=r(8713),i.isAxiosError=r(16268),e.exports=i,e.exports.default=i},14972:(e,t,r)=>{"use strict";var n=r(60644);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},60644:(e,t,r)=>{"use strict";var n=r(82648);function a(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}r(64867).inherits(a,n,{__CANCEL__:!0}),e.exports=a},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,r)=>{"use strict";var n=r(64867),a=r(15327),s=r(80782),o=r(13572),i=r(47185),c=r(94097),u=r(54875),l=u.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=i(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&u.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var s,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!a){var d=[o,void 0];for(Array.prototype.unshift.apply(d,n),d=d.concat(c),s=Promise.resolve(t);d.length;)s=s.then(d.shift(),d.shift());return s}for(var p=t;n.length;){var f=n.shift(),h=n.shift();try{p=f(p)}catch(e){h(e);break}}try{s=o(p)}catch(e){return Promise.reject(e)}for(;c.length;)s=s.then(c.shift(),c.shift());return s},d.prototype.getUri=function(e){e=i(this.defaults,e);var t=c(e.baseURL,e.url);return a(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,r){return this.request(i(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,a){return this.request(i(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},82648:(e,t,r)=>{"use strict";var n=r(64867);function a(e,t,r,n,a){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a)}n.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=a.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(a,o),Object.defineProperty(s,"isAxiosError",{value:!0}),a.from=function(e,t,r,o,i,c){var u=Object.create(s);return n.toFlatObject(e,u,(function(e){return e!==Error.prototype})),a.call(u,e.message,t,r,o,i),u.name=e.name,c&&Object.assign(u,c),u},e.exports=a},80782:(e,t,r)=>{"use strict";var n=r(64867);function a(){this.handlers=[]}a.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},94097:(e,t,r)=>{"use strict";var n=r(91793),a=r(7303);e.exports=function(e,t){return e&&!n(t)?a(e,t):t}},13572:(e,t,r)=>{"use strict";var n=r(64867),a=r(18527),s=r(26502),o=r(45546),i=r(60644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new i}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},47185:(e,t,r)=>{"use strict";var n=r(64867);e.exports=function(e,t){t=t||{};var r={};function a(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:a(void 0,e[r]):a(e[r],t[r])}function o(e){if(!n.isUndefined(t[e]))return a(void 0,t[e])}function i(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:a(void 0,e[r]):a(void 0,t[r])}function c(r){return r in t?a(e[r],t[r]):r in e?a(void 0,e[r]):void 0}var u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||s,a=t(e);n.isUndefined(a)&&t!==c||(r[e]=a)})),r}},36026:(e,t,r)=>{"use strict";var n=r(82648);e.exports=function(e,t,r){var a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}},18527:(e,t,r)=>{"use strict";var n=r(64867),a=r(45546);e.exports=function(e,t,r){var s=this||a;return n.forEach(r,(function(r){e=r.call(s,e,t)})),e}},45546:(e,t,r)=>{"use strict";var n=r(64867),a=r(16016),s=r(82648),o=r(77874),i=r(47675),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,d={transitional:o,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=r(55448)),l),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r,s=n.isObject(e),o=t&&t["Content-Type"];if((r=n.isFileList(e))||s&&"multipart/form-data"===o){var c=this.env&&this.env.FormData;return i(r?{"files[]":e}:e,c&&new c)}return s||"application/json"===o?(u(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,r=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||a&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s.from(e,s.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:r(91623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){d.headers[e]=n.merge(c)})),e.exports=d},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.27.2"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},15327:(e,t,r)=>{"use strict";var n=r(64867);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),s=o.join("&")}if(s){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,r)=>{"use strict";var n=r(64867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,a,s,o){var i=[];i.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),n.isString(a)&&i.push("path="+a),n.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,r)=>{"use strict";var n=r(64867);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,r)=>{"use strict";var n=r(64867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function a(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=a(window.location.href),function(t){var r=n.isString(t)?a(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},16016:(e,t,r)=>{"use strict";var n=r(64867);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},91623:e=>{e.exports=null},84109:(e,t,r)=>{"use strict";var n=r(64867),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},90205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},47675:(e,t,r)=>{"use strict";var n=r(64867);e.exports=function(e,t){t=t||new FormData;var r=[];function a(e){return null===e?"":n.isDate(e)?e.toISOString():n.isArrayBuffer(e)||n.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,o){if(n.isPlainObject(s)||n.isArray(s)){if(-1!==r.indexOf(s))throw Error("Circular reference detected in "+o);r.push(s),n.forEach(s,(function(r,s){if(!n.isUndefined(r)){var i,c=o?o+"."+s:s;if(r&&!o&&"object"==typeof r)if(n.endsWith(s,"{}"))r=JSON.stringify(r);else if(n.endsWith(s,"[]")&&(i=n.toArray(r)))return void i.forEach((function(e){!n.isUndefined(e)&&t.append(c,a(e))}));e(r,c)}})),r.pop()}else t.append(o,a(s))}(e),t}},54875:(e,t,r)=>{"use strict";var n=r(97288).version,a=r(82648),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var o={};s.transitional=function(e,t,r){function s(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,i){if(!1===e)throw new a(s(n," has been removed"+(t?" in "+t:"")),a.ERR_DEPRECATED);return t&&!o[n]&&(o[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,i)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),s=n.length;s-- >0;){var o=n[s],i=t[o];if(i){var c=e[o],u=void 0===c||i(c,o,e);if(!0!==u)throw new a("option "+o+" must be "+u,a.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new a("Unknown option "+o,a.ERR_BAD_OPTION)}},validators:s}},64867:(e,t,r)=>{"use strict";var n,a=r(91849),s=Object.prototype.toString,o=(n=Object.create(null),function(e){var t=s.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function i(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var l=i("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=i("Date"),h=i("File"),v=i("Blob"),m=i("FileList");function g(e){return"[object Function]"===s.call(e)}var y=i("URLSearchParams");function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var w,k=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||s.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:p,isUndefined:u,isDate:f,isFile:h,isBlob:v,isFunction:g,isStream:function(e){return d(e)&&g(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:b,merge:function e(){var t={};function r(r,n){p(t[n])&&p(r)?t[n]=e(t[n],r):p(r)?t[n]=e({},r):c(r)?t[n]=r.slice():t[n]=r}for(var n=0,a=arguments.length;n<a;n++)b(arguments[n],r);return t},extend:function(e,t,r){return b(t,(function(t,n){e[n]=r&&"function"==typeof t?a(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r){var n,a,s,o={};t=t||{};do{for(a=(n=Object.getOwnPropertyNames(e)).length;a-- >0;)o[s=n[a]]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:i,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},isTypedArray:k,isFileList:m}},21924:(e,t,r)=>{"use strict";var n=r(40210),a=r(55559),s=a(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&s(e,".prototype.")>-1?a(r):r}},55559:(e,t,r)=>{"use strict";var n=r(58612),a=r(40210),s=a("%Function.prototype.apply%"),o=a("%Function.prototype.call%"),i=a("%Reflect.apply%",!0)||n.call(o,s),c=a("%Object.getOwnPropertyDescriptor%",!0),u=a("%Object.defineProperty%",!0),l=a("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=i(n,o,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var d=function(){return i(n,s,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},31807:e=>{var t=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t},4289:(e,t,r)=>{"use strict";var n=r(82215),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,o=Array.prototype.concat,i=Object.defineProperty,c=i&&function(){var e={};try{for(var t in i(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),u=function(e,t,r,n){var a;(!(t in e)||"function"==typeof(a=n)&&"[object Function]"===s.call(a)&&n())&&(c?i(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},l=function(e,t){var r=arguments.length>2?arguments[2]:{},s=n(t);a&&(s=o.call(s,Object.getOwnPropertySymbols(t)));for(var i=0;i<s.length;i+=1)u(e,s[i],t[s[i]],r[s[i]])};l.supportsDescriptors=!!c,e.exports=l},94130:(e,t,r)=>{"use strict";var n=r(40210),a=n("%Array.prototype%"),s=n("%RangeError%"),o=n("%SyntaxError%"),i=n("%TypeError%"),c=r(27840),u=Math.pow(2,32)-1,l=n("%Object.setPrototypeOf%",!0)||([].__proto__!==a?null:function(e,t){return e.__proto__=t,e});e.exports=function(e){if(!c(e)||e<0)throw new i("Assertion failed: `length` must be an integer Number >= 0");if(e>u)throw new s("length is greater than (2**32 - 1)");var t=arguments.length>1?arguments[1]:a,r=[];if(t!==a){if(!l)throw new o("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");l(r,t)}return 0!==e&&(r.length=e),r}},29120:(e,t,r)=>{"use strict";var n=r(40210),a=n("%Symbol.species%",!0),s=n("%TypeError%"),o=r(94130),i=r(70317),c=r(59340),u=r(2370),l=r(27840),d=r(54300);e.exports=function(e,t){if(!l(t)||t<0)throw new s("Assertion failed: length must be an integer >= 0");if(!c(e))return o(t);var r=i(e,"constructor");if(a&&"Object"===d(r)&&null===(r=i(r,a))&&(r=void 0),void 0===r)return o(t);if(!u(r))throw new s("C must be a constructor");return new r(t)}},99582:(e,t,r)=>{"use strict";var n=r(40210),a=r(21924),s=n("%TypeError%"),o=r(59340),i=n("%Reflect.apply%",!0)||a("%Function.prototype.apply%");e.exports=function(e,t){var r=arguments.length>2?arguments[2]:[];if(!o(r))throw new s("Assertion failed: optional `argumentsList`, if provided, must be a List");return i(e,t,r)}},42067:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(40509),s=r(68712),o=r(24825),i=r(70098),c=r(75239),u=r(74220),l=r(49845),d=r(54300);e.exports=function(e,t,r){if("Object"!==d(e))throw new n("Assertion failed: Type(O) is not Object");if(!u(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var p=o(e,t),f=!p||c(e);return!(p&&!p["[[Configurable]]"]||!f)&&a(i,l,s,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":r,"[[Writable]]":!0})}},5453:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(42067),s=r(74220),o=r(54300);e.exports=function(e,t,r){if("Object"!==o(e))throw new n("Assertion failed: Type(O) is not Object");if(!s(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var i=a(e,t,r);if(!i)throw new n("unable to create data property");return i}},26402:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(39146),s=r(40509),o=r(68712),i=r(52092),c=r(70098),u=r(74220),l=r(49845),d=r(57852),p=r(54300);e.exports=function(e,t,r){if("Object"!==p(e))throw new n("Assertion failed: Type(O) is not Object");if(!u(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var f=a({Type:p,IsDataDescriptor:c,IsAccessorDescriptor:i},r)?r:d(r);if(!a({Type:p,IsDataDescriptor:c,IsAccessorDescriptor:i},f))throw new n("Assertion failed: Desc is not a valid Property Descriptor");return s(c,l,o,e,t,f)}},91521:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(65376),s=r(99582),o=r(5453),i=r(70317),c=r(64741),u=r(59340),l=r(64653),d=r(60561);e.exports=function e(t,r,p,f,h){var v;arguments.length>5&&(v=arguments[5]);for(var m=f,g=0;g<p;){var y=d(g),b=c(r,y);if(!0===b){var w=i(r,y);if(void 0!==v){if(arguments.length<=6)throw new n("Assertion failed: thisArg is required when mapperFunction is provided");w=s(v,arguments[6],[w,g,r])}var k=!1;if(h>0&&(k=u(w)),k){var C=l(w);m=e(t,w,C,m,h-1)}else{if(m>=a)throw new n("index too large");o(t,d(m),w),m+=1}}g+=1}return m}},68712:(e,t,r)=>{"use strict";var n=r(14179),a=r(23005),s=r(54300);e.exports=function(e){return void 0!==e&&n(s,"Property Descriptor","Desc",e),a(e)}},70317:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(68896),s=r(74220),o=r(54300);e.exports=function(e,t){if("Object"!==o(e))throw new n("Assertion failed: Type(O) is not Object");if(!s(t))throw new n("Assertion failed: IsPropertyKey(P) is not true, got "+a(t));return e[t]}},64741:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(74220),s=r(54300);e.exports=function(e,t){if("Object"!==s(e))throw new n("Assertion failed: `O` must be an Object");if(!a(t))throw new n("Assertion failed: `P` must be a Property Key");return t in e}},52092:(e,t,r)=>{"use strict";var n=r(17642),a=r(14179),s=r(54300);e.exports=function(e){return void 0!==e&&(a(s,"Property Descriptor","Desc",e),!(!n(e,"[[Get]]")&&!n(e,"[[Set]]")))}},59340:(e,t,r)=>{"use strict";e.exports=r(87097)},99739:(e,t,r)=>{"use strict";e.exports=r(55923)},2370:(e,t,r)=>{"use strict";var n=r(8769)("%Reflect.construct%",!0),a=r(26402);try{a({},"",{"[[Get]]":function(){}})}catch(e){a=null}if(a&&n){var s={},o={};a(o,"length",{"[[Get]]":function(){throw s},"[[Enumerable]]":!0}),e.exports=function(e){try{n(e,o)}catch(e){return e===s}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},70098:(e,t,r)=>{"use strict";var n=r(17642),a=r(14179),s=r(54300);e.exports=function(e){return void 0!==e&&(a(s,"Property Descriptor","Desc",e),!(!n(e,"[[Value]]")&&!n(e,"[[Writable]]")))}},75239:(e,t,r)=>{"use strict";var n=r(40210),a=n("%Object.preventExtensions%",!0),s=n("%Object.isExtensible%",!0),o=r(73126);e.exports=a?function(e){return!o(e)&&s(e)}:function(e){return!o(e)}},27840:(e,t,r)=>{"use strict";var n=r(13015),a=r(46261),s=r(54300),o=r(31214),i=r(53060);e.exports=function(e){if("Number"!==s(e)||o(e)||!i(e))return!1;var t=n(e);return a(t)===t}},74220:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},38155:(e,t,r)=>{"use strict";var n=r(40210)("%Symbol.match%",!0),a=r(98420),s=r(63895);e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(n){var t=e[n];if(void 0!==t)return s(t)}return a(e)}},64653:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%"),a=r(70317),s=r(4840),o=r(54300);e.exports=function(e){if("Object"!==o(e))throw new n("Assertion failed: `obj` must be an Object");return s(a(e,"length"))}},24825:(e,t,r)=>{"use strict";var n=r(40210),a=r(94079),s=n("%TypeError%"),o=r(21924)("Object.prototype.propertyIsEnumerable"),i=r(17642),c=r(59340),u=r(74220),l=r(38155),d=r(57852),p=r(54300);e.exports=function(e,t){if("Object"!==p(e))throw new s("Assertion failed: O must be an Object");if(!u(t))throw new s("Assertion failed: P must be a Property Key");if(i(e,t)){if(!a){var r=c(e)&&"length"===t,n=l(e)&&"lastIndex"===t;return{"[[Configurable]]":!(r||n),"[[Enumerable]]":o(e,t),"[[Value]]":e[t],"[[Writable]]":!0}}return d(a(e,t))}}},86378:(e,t,r)=>{"use strict";e.exports=r(28631)},49845:(e,t,r)=>{"use strict";var n=r(31214);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:n(e)&&n(t)}},63895:e=>{"use strict";e.exports=function(e){return!!e}},78974:(e,t,r)=>{"use strict";var n=r(13015),a=r(46261),s=r(19157),o=r(31214),i=r(53060),c=r(94099);e.exports=function(e){var t=s(e);return o(t)||0===t?0:i(t)?c(t)*a(n(t)):t}},4840:(e,t,r)=>{"use strict";var n=r(65376),a=r(78974);e.exports=function(e){var t=a(e);return t<=0?0:t>n?n:t}},19157:(e,t,r)=>{"use strict";var n=r(40210),a=n("%TypeError%"),s=n("%Number%"),o=n("%RegExp%"),i=n("%parseInt%"),c=r(21924),u=r(11652),l=r(73126),d=c("String.prototype.slice"),p=u(/^0b[01]+$/i),f=u(/^0o[0-7]+$/i),h=u(/^[-+]0x[0-9a-f]+$/i),v=u(new o("["+["","​","￾"].join("")+"]","g")),m=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),g=new RegExp("(^["+m+"]+)|(["+m+"]+$)","g"),y=c("String.prototype.replace"),b=r(52159);e.exports=function e(t){var r=l(t)?t:b(t,s);if("symbol"==typeof r)throw new a("Cannot convert a Symbol value to a number");if("bigint"==typeof r)throw new a("Conversion from 'BigInt' to 'number' is not allowed.");if("string"==typeof r){if(p(r))return e(i(d(r,2),2));if(f(r))return e(i(d(r,2),8));if(v(r)||h(r))return NaN;var n=function(e){return y(e,g,"")}(r);if(n!==r)return e(n)}return s(r)}},69058:(e,t,r)=>{"use strict";var n=r(40210)("%Object%"),a=r(86378);e.exports=function(e){return a(e),n(e)}},52159:(e,t,r)=>{"use strict";var n=r(41503);e.exports=function(e){return arguments.length>1?n(e,arguments[1]):n(e)}},57852:(e,t,r)=>{"use strict";var n=r(17642),a=r(40210)("%TypeError%"),s=r(54300),o=r(63895),i=r(99739);e.exports=function(e){if("Object"!==s(e))throw new a("ToPropertyDescriptor requires an object");var t={};if(n(e,"enumerable")&&(t["[[Enumerable]]"]=o(e.enumerable)),n(e,"configurable")&&(t["[[Configurable]]"]=o(e.configurable)),n(e,"value")&&(t["[[Value]]"]=e.value),n(e,"writable")&&(t["[[Writable]]"]=o(e.writable)),n(e,"get")){var r=e.get;if(void 0!==r&&!i(r))throw new a("getter must be a function");t["[[Get]]"]=r}if(n(e,"set")){var c=e.set;if(void 0!==c&&!i(c))throw new a("setter must be a function");t["[[Set]]"]=c}if((n(t,"[[Get]]")||n(t,"[[Set]]"))&&(n(t,"[[Value]]")||n(t,"[[Writable]]")))throw new a("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},60561:(e,t,r)=>{"use strict";var n=r(40210),a=n("%String%"),s=n("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a string");return a(e)}},54300:(e,t,r)=>{"use strict";var n=r(61276);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":n(e)}},13015:(e,t,r)=>{"use strict";var n=r(40210)("%Math.abs%");e.exports=function(e){return n(e)}},46261:e=>{"use strict";var t=Math.floor;e.exports=function(e){return t(e)}},28631:(e,t,r)=>{"use strict";var n=r(40210)("%TypeError%");e.exports=function(e,t){if(null==e)throw new n(t||"Cannot call method on "+e);return e}},61276:e=>{"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},8769:(e,t,r)=>{"use strict";e.exports=r(40210)},40509:(e,t,r)=>{"use strict";var n=r(31044),a=r(40210),s=n()&&a("%Object.defineProperty%",!0),o=n.hasArrayLengthDefineBug(),i=o&&r(87097),c=r(21924)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,r,n,a,u){if(!s){if(!e(u))return!1;if(!u["[[Configurable]]"]||!u["[[Writable]]"])return!1;if(a in n&&c(n,a)!==!!u["[[Enumerable]]"])return!1;var l=u["[[Value]]"];return n[a]=l,t(n[a],l)}return o&&"length"===a&&"[[Value]]"in u&&i(n)&&n.length!==u["[[Value]]"]?(n.length=u["[[Value]]"],n.length===u["[[Value]]"]):(s(n,a,r(u)),!0)}},87097:(e,t,r)=>{"use strict";var n=r(40210)("%Array%"),a=!n.isArray&&r(21924)("Object.prototype.toString");e.exports=n.isArray||function(e){return"[object Array]"===a(e)}},14179:(e,t,r)=>{"use strict";var n=r(40210),a=n("%TypeError%"),s=n("%SyntaxError%"),o=r(17642),i={"Property Descriptor":function(e){var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(o(e,r)&&!t[r])return!1;var n=o(e,"[[Value]]"),s=o(e,"[[Get]]")||o(e,"[[Set]]");if(n&&s)throw new a("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":r(87283)};e.exports=function(e,t,r,n){var o=i[t];if("function"!=typeof o)throw new s("unknown record type: "+t);if("Object"!==e(n)||!o(n))throw new a(r+" must be a "+t)}},23005:e=>{"use strict";e.exports=function(e){if(void 0===e)return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}},94079:(e,t,r)=>{"use strict";var n=r(40210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},53060:e=>{"use strict";var t=Number.isNaN||function(e){return e!=e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!t(e)&&e!==1/0&&e!==-1/0}},87283:(e,t,r)=>{"use strict";var n=r(17642);e.exports=function(e){return n(e,"[[StartIndex]]")&&n(e,"[[EndIndex]]")&&e["[[StartIndex]]"]>=0&&e["[[EndIndex]]"]>=e["[[StartIndex]]"]&&String(parseInt(e["[[StartIndex]]"],10))===String(e["[[StartIndex]]"])&&String(parseInt(e["[[EndIndex]]"],10))===String(e["[[EndIndex]]"])}},31214:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},73126:e=>{"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},39146:(e,t,r)=>{"use strict";var n=r(40210),a=r(17642),s=n("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(a(t,n)&&!r[n])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new s("Property Descriptors may not be both accessor and data descriptors");return!0}},65376:(e,t,r)=>{"use strict";var n=r(40210),a=n("%Math%"),s=n("%Number%");e.exports=s.MAX_SAFE_INTEGER||a.pow(2,53)-1},11652:(e,t,r)=>{"use strict";var n=r(21924)("RegExp.prototype.exec");e.exports=function(e){return function(t){return null!==n(e,t)}}},94099:e=>{"use strict";e.exports=function(e){return e>=0?1:-1}},55923:e=>{"use strict";var t,r,n=Function.prototype.toString,a="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},a((function(){throw 42}),null,t)}catch(e){e!==r&&(a=null)}else a=null;var s=/^\s*class\b/,o=function(e){try{var t=n.call(e);return s.test(t)}catch(e){return!1}},i=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=a?function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{a(e,null,t)}catch(e){if(e!==r)return!1}return!o(e)}:function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!o(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=i.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},68896:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&a&&"function"==typeof a.get?a.get:null,o=n&&Map.prototype.forEach,i="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=i&&c&&"function"==typeof c.get?c.get:null,l=i&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,v=Object.prototype.toString,m=Function.prototype.toString,g=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,k=String.prototype.toLowerCase,C=RegExp.prototype.test,_=Array.prototype.concat,I=Array.prototype.join,S=Array.prototype.slice,O=Math.floor,x="function"==typeof BigInt?BigInt.prototype.valueOf:null,E=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,A="function"==typeof Symbol&&"object"==typeof Symbol.iterator,M="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===A||"symbol")?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,U=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||C.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-O(-e):O(e);if(n!==e){var a=String(n),s=y.call(t,a.length+1);return b.call(a,r,"$&_")+"."+b.call(b.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var F=r(72006).custom,T=F&&L(F)?F:null;function N(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function q(e){return b.call(String(e),/"/g,"&quot;")}function D(e){return!("[object Array]"!==z(e)||M&&"object"==typeof e&&M in e)}function L(e){if(A)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,a){var i=r||{};if(B(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(B(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!B(i,"customInspect")||i.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(B(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(B(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=i.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return W(t,i);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return v?j(t,w):w}if("bigint"==typeof t){var C=String(t)+"n";return v?j(t,C):C}var O=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=O&&O>0&&"object"==typeof t)return D(t)?"[Array]":"[Object]";var E=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=I.call(Array(e.indent+1)," ")}return{base:r,prev:I.call(Array(t+1),r)}}(i,n);if(void 0===a)a=[];else if(G(a,t)>=0)return"[Circular]";function F(t,r,s){if(r&&(a=S.call(a)).push(r),s){var o={depth:i.depth};return B(i,"quoteStyle")&&(o.quoteStyle=i.quoteStyle),e(t,o,n+1,a)}return e(t,i,n+1,a)}if("function"==typeof t){var H=function(e){if(e.name)return e.name;var t=g.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),V=J(t,F);return"[Function"+(H?": "+H:" (anonymous)")+"]"+(V.length>0?" { "+I.call(V,", ")+" }":"")}if(L(t)){var Y=A?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||A?Y:$(Y)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var Z="<"+k.call(String(t.nodeName)),ee=t.attributes||[],te=0;te<ee.length;te++)Z+=" "+ee[te].name+"="+N(q(ee[te].value),"double",i);return Z+=">",t.childNodes&&t.childNodes.length&&(Z+="..."),Z+="</"+k.call(String(t.nodeName))+">"}if(D(t)){if(0===t.length)return"[]";var re=J(t,F);return E&&!function(e){for(var t=0;t<e.length;t++)if(G(e[t],"\n")>=0)return!1;return!0}(re)?"["+X(re,E)+"]":"[ "+I.call(re,", ")+" ]"}if(function(e){return!("[object Error]"!==z(e)||M&&"object"==typeof e&&M in e)}(t)){var ne=J(t,F);return"cause"in t&&!P.call(t,"cause")?"{ ["+String(t)+"] "+I.call(_.call("[cause]: "+F(t.cause),ne),", ")+" }":0===ne.length?"["+String(t)+"]":"{ ["+String(t)+"] "+I.call(ne,", ")+" }"}if("object"==typeof t&&c){if(T&&"function"==typeof t[T])return t[T]();if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return o.call(t,(function(e,r){ae.push(F(r,t,!0)+" => "+F(e,t))})),Q("Map",s.call(t),ae,E)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var se=[];return l.call(t,(function(e){se.push(F(e,t))})),Q("Set",u.call(t),se,E)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return K("WeakMap");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return K("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return K("WeakRef");if(function(e){return!("[object Number]"!==z(e)||M&&"object"==typeof e&&M in e)}(t))return $(F(Number(t)));if(function(e){if(!e||"object"!=typeof e||!x)return!1;try{return x.call(e),!0}catch(e){}return!1}(t))return $(F(x.call(t)));if(function(e){return!("[object Boolean]"!==z(e)||M&&"object"==typeof e&&M in e)}(t))return $(h.call(t));if(function(e){return!("[object String]"!==z(e)||M&&"object"==typeof e&&M in e)}(t))return $(F(String(t)));if(!function(e){return!("[object Date]"!==z(e)||M&&"object"==typeof e&&M in e)}(t)&&!function(e){return!("[object RegExp]"!==z(e)||M&&"object"==typeof e&&M in e)}(t)){var oe=J(t,F),ie=U?U(t)===Object.prototype:t instanceof Object||t.constructor===Object,ce=t instanceof Object?"":"null prototype",ue=!ie&&M&&Object(t)===t&&M in t?y.call(z(t),8,-1):ce?"Object":"",le=(ie||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ue||ce?"["+I.call(_.call([],ue||[],ce||[]),": ")+"] ":"");return 0===oe.length?le+"{}":E?le+"{"+X(oe,E)+"}":le+"{ "+I.call(oe,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function B(e,t){return H.call(e,t)}function z(e){return v.call(e)}function G(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function W(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return W(y.call(e,0,t.maxStringLength),t)+n}return N(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,V),"single",t)}function V(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function $(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function Q(e,t,r,n){return e+" ("+t+") {"+(n?X(r,n):I.call(r,", "))+"}"}function X(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+I.call(e,","+r)+"\n"+t.prev}function J(e,t){var r=D(e),n=[];if(r){n.length=e.length;for(var a=0;a<e.length;a++)n[a]=B(e,a)?t(e[a],e):""}var s,o="function"==typeof E?E(e):[];if(A){s={};for(var i=0;i<o.length;i++)s["$"+o[i]]=o[i]}for(var c in e)B(e,c)&&(r&&String(Number(c))===c&&c<e.length||A&&s["$"+c]instanceof Symbol||(C.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof E)for(var u=0;u<o.length;u++)P.call(e,o[u])&&n.push("["+t(o[u])+"]: "+t(e[o[u]],e));return n}},97272:(e,t,r)=>{"use strict";var n=r(17642),a="function"==typeof Symbol&&"symbol"==typeof Symbol.unscopables,s=a&&Array.prototype[Symbol.unscopables],o=TypeError;e.exports=function(e){if("string"!=typeof e||!e)throw new o("method must be a non-empty string");if(!n(Array.prototype,e))throw new o("method must be on Array.prototype");a&&(s[e]=!0)}},41503:(e,t,r)=>{"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,a=r(34149),s=r(95320),o=r(18923),i=r(12636),c=function(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var r,n,o,i="string"===t?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<i.length;++o)if(r=e[i[o]],s(r)&&(n=r.call(e),a(n)))return n;throw new TypeError("No default value")},u=function(e,t){var r=e[t];if(null!=r){if(!s(r))throw new TypeError(r+" returned for property "+t+" of object "+e+" is not a function");return r}};e.exports=function(e){if(a(e))return e;var t,r="default";if(arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number")),n&&(Symbol.toPrimitive?t=u(e,Symbol.toPrimitive):i(e)&&(t=Symbol.prototype.valueOf)),void 0!==t){var s=t.call(e,r);if(a(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return"default"===r&&(o(e)||i(e))&&(r="string"),c(e,"default"===r?"number":r)}},34149:e=>{"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},17648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,a="[object Function]";e.exports=function(e){var s=this;if("function"!=typeof s||n.call(s)!==a)throw new TypeError(t+s);for(var o,i=r.call(arguments,1),c=function(){if(this instanceof o){var t=s.apply(this,i.concat(r.call(arguments)));return Object(t)===t?t:this}return s.apply(e,i.concat(r.call(arguments)))},u=Math.max(0,s.length-i.length),l=[],d=0;d<u;d++)l.push("$"+d);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),s.prototype){var p=function(){};p.prototype=s.prototype,o.prototype=new p,p.prototype=null}return o}},58612:(e,t,r)=>{"use strict";var n=r(17648);e.exports=Function.prototype.bind||n},40210:(e,t,r)=>{"use strict";var n,a=SyntaxError,s=Function,o=TypeError,i=function(e){try{return s('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new o},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,d=r(41405)(),p=Object.getPrototypeOf||function(e){return e.__proto__},f={},h="undefined"==typeof Uint8Array?n:p(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?p(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":h,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},m=function e(t){var r;if("%AsyncFunction%"===t)r=i("async function () {}");else if("%GeneratorFunction%"===t)r=i("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=i("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(r=p(a.prototype))}return v[t]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=r(58612),b=r(17642),w=y.call(Function.call,Array.prototype.concat),k=y.call(Function.apply,Array.prototype.splice),C=y.call(Function.call,String.prototype.replace),_=y.call(Function.call,String.prototype.slice),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,O=function(e){var t=_(e,0,1),r=_(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return C(e,I,(function(e,t,r,a){n[n.length]=r?C(a,S,"$1"):t||e})),n},x=function(e,t){var r,n=e;if(b(g,n)&&(n="%"+(r=g[n])[0]+"%"),b(v,n)){var s=v[n];if(s===f&&(s=m(n)),void 0===s&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var r=O(e),n=r.length>0?r[0]:"",s=x("%"+n+"%",t),i=s.name,u=s.value,l=!1,d=s.alias;d&&(n=d[0],k(r,w([0,1],d)));for(var p=1,f=!0;p<r.length;p+=1){var h=r[p],m=_(h,0,1),g=_(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&f||(l=!0),b(v,i="%"+(n+="."+h)+"%"))u=v[i];else if(null!=u){if(!(h in u)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&p+1>=r.length){var y=c(u,h);u=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[h]}else f=b(u,h),u=u[h];f&&!l&&(v[i]=u)}}return u}},31044:(e,t,r)=>{"use strict";var n=r(40210)("%Object.defineProperty%",!0),a=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};a.hasArrayLengthDefineBug=function(){if(!a())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=a},41405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,a=r(55419);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&a())))}},55419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},23695:(e,t,r)=>{"use strict";var n=r(55419);e.exports=function(){return n()&&!!Symbol.toStringTag}},17642:(e,t,r)=>{"use strict";var n=r(58612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},91047:(e,t,r)=>{"use strict";function n(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function a(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const a=n(r);return(e,r)=>a.then((n=>r(n.transaction(t,e).objectStore(t))))}let s;function o(){return s||(s=a("keyval-store","keyval")),s}function i(e,t=o()){return t("readonly",(t=>n(t.get(e))))}function c(e,t,r=o()){return r("readwrite",(r=>(r.put(t,e),n(r.transaction))))}function u(e,t=o()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))}r.d(t,{createStore:()=>a,del:()=>u,get:()=>i,set:()=>c})},10746:(e,t,r)=>{"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function a(e){return!!e&&!!e[$]}function s(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Q}(e)||Array.isArray(e)||!!e[V]||!!e.constructor[V]||p(e)||f(e))}function o(e,t,r){void 0===r&&(r=!1),0===i(e)?(r?Object.keys:X)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function i(e){var t=e[$];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:p(e)?2:f(e)?3:0}function c(e,t){return 2===i(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===i(e)?e.get(t):e[t]}function l(e,t,r){var n=i(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){return B&&e instanceof Map}function f(e){return z&&e instanceof Set}function h(e){return e.o||e.t}function v(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=J(e);delete t[$];for(var r=X(t),n=0;n<r.length;n++){var a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||a(e)||!s(e)||(i(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&o(e,(function(e,t){return m(t,!0)}),!0)),e}function g(){n(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=Y[e];return t||n(18,e),t}function w(e,t){Y[e]||(Y[e]=t)}function k(){return L}function C(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function _(e){I(e),e.p.forEach(O),e.p=null}function I(e){e===L&&(L=e.l)}function S(e){return L={p:[],l:L,h:e,m:!0,_:0}}function O(e){var t=e[$];0===t.i||1===t.i?t.j():t.O=!0}function x(e,t){t._=t.p.length;var r=t.p[0],a=void 0!==e&&e!==r;return t.h.g||b("ES5").S(t,e,a),a?(r[$].P&&(_(t),n(4)),s(e)&&(e=E(t,e),t.l||A(t,e)),t.u&&b("Patches").M(r[$].t,e,t.u,t.s)):e=E(t,r,[]),_(t),t.u&&t.v(t.u,t.s),e!==W?e:void 0}function E(e,t,r){if(y(t))return t;var n=t[$];if(!n)return o(t,(function(a,s){return R(e,n,t,a,s,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return A(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=v(n.k):n.o;o(3===n.i?new Set(a):a,(function(t,s){return R(e,n,a,t,s,r)})),A(e,a,!1),r&&e.u&&b("Patches").R(n,r,e.u,e.s)}return n.o}function R(e,t,r,n,o,i){if(a(o)){var u=E(e,o,i&&t&&3!==t.i&&!c(t.D,n)?i.concat(n):void 0);if(l(r,n,u),!a(u))return;e.m=!1}if(s(o)&&!y(o)){if(!e.h.F&&e._<1)return;E(e,o),t&&t.A.l||A(e,o)}}function A(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&m(t,r)}function M(e,t){var r=e[$];return(r?h(r):e)[t]}function P(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function U(e){e.P||(e.P=!0,e.l&&U(e.l))}function j(e){e.o||(e.o=v(e.t))}function F(e,t,r){var n=p(t)?b("MapSet").N(t,r):f(t)?b("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:k(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,s=Z;r&&(a=[n],s=ee);var o=Proxy.revocable(a,s),i=o.revoke,c=o.proxy;return n.k=c,n.j=i,c}(t,r):b("ES5").J(t,r);return(r?r.A:k()).p.push(n),n}function T(e){return a(e)||n(22,e),function e(t){if(!s(t))return t;var r,n=t[$],a=i(t);if(n){if(!n.P&&(n.i<4||!b("ES5").K(n)))return n.t;n.I=!0,r=N(t,a),n.I=!1}else r=N(t,a);return o(r,(function(t,a){n&&u(n.t,t)===a||l(r,t,e(a))})),3===a?new Set(r):r}(e)}function N(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return v(e)}function q(){function e(e,t){function r(){this.constructor=e}i(e,t),e.prototype=(r.prototype=t.prototype,new r)}function t(e){e.o||(e.D=new Map,e.o=new Map(e.t))}function r(e){e.o||(e.o=new Set,e.t.forEach((function(t){if(s(t)){var r=F(e.A.h,t,e);e.p.set(t,r),e.o.add(r)}else e.o.add(t)})))}function a(e){e.O&&n(3,JSON.stringify(h(e)))}var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},c=function(){function r(e,t){return this[$]={i:2,l:t,A:t?t.A:k(),P:!1,I:!1,o:void 0,D:void 0,t:e,k:this,C:!1,O:!1},this}e(r,Map);var n=r.prototype;return Object.defineProperty(n,"size",{get:function(){return h(this[$]).size}}),n.has=function(e){return h(this[$]).has(e)},n.set=function(e,r){var n=this[$];return a(n),h(n).has(e)&&h(n).get(e)===r||(t(n),U(n),n.D.set(e,!0),n.o.set(e,r),n.D.set(e,!0)),this},n.delete=function(e){if(!this.has(e))return!1;var r=this[$];return a(r),t(r),U(r),r.t.has(e)?r.D.set(e,!1):r.D.delete(e),r.o.delete(e),!0},n.clear=function(){var e=this[$];a(e),h(e).size&&(t(e),U(e),e.D=new Map,o(e.t,(function(t){e.D.set(t,!1)})),e.o.clear())},n.forEach=function(e,t){var r=this;h(this[$]).forEach((function(n,a){e.call(t,r.get(a),a,r)}))},n.get=function(e){var r=this[$];a(r);var n=h(r).get(e);if(r.I||!s(n))return n;if(n!==r.t.get(e))return n;var o=F(r.A.h,n,r);return t(r),r.o.set(e,o),o},n.keys=function(){return h(this[$]).keys()},n.values=function(){var e,t=this,r=this.keys();return(e={})[K]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},n.entries=function(){var e,t=this,r=this.keys();return(e={})[K]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},n[K]=function(){return this.entries()},r}(),u=function(){function t(e,t){return this[$]={i:3,l:t,A:t?t.A:k(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return h(this[$]).size}}),n.has=function(e){var t=this[$];return a(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},n.add=function(e){var t=this[$];return a(t),this.has(e)||(r(t),U(t),t.o.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[$];return a(t),r(t),U(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},n.clear=function(){var e=this[$];a(e),h(e).size&&(r(e),U(e),e.o.clear())},n.values=function(){var e=this[$];return a(e),r(e),e.o.values()},n.entries=function(){var e=this[$];return a(e),r(e),e.o.entries()},n.keys=function(){return this.values()},n[K]=function(){return this.values()},n.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}();w("MapSet",{N:function(e,t){return new c(e,t)},T:function(e,t){return new u(e,t)}})}r.d(t,{default:()=>ie,createDraft:()=>se,current:()=>T,enableMapSet:()=>q,finishDraft:()=>oe,produce:()=>ne,setAutoFreeze:()=>ae});var D,L,H="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,z="undefined"!=typeof Set,G="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,W=H?Symbol.for("immer-nothing"):((D={})["immer-nothing"]=!0,D),V=H?Symbol.for("immer-draftable"):"__$immer_draftable",$=H?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Q=""+Object.prototype.constructor,X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(e){var t={};return X(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Y={},Z={get:function(e,t){if(t===$)return e;var r=h(e);if(!c(r,t))return function(e,t,r){var n,a=P(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!s(n)?n:n===M(e.t,t)?(j(e),e.o[t]=F(e.A.h,n,e)):n},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=P(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=M(h(e),t),s=null==a?void 0:a[$];if(s&&s.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(d(r,a)&&(void 0!==r||c(e.t,t)))return!0;j(e),U(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==M(e.t,t)||t in e.t?(e.D[t]=!1,j(e),U(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},ee={};o(Z,(function(e,t){ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ee.deleteProperty=function(e,t){return ee.set.call(this,e,t,void 0)},ee.set=function(e,t,r){return Z.set.call(this,e[0],t,r,e[0])};var te=function(){function e(e){var t=this;this.g=G,this.F=!0,this.produce=function(e,r,a){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(a))}))}}var c;if("function"!=typeof r&&n(6),void 0!==a&&"function"!=typeof a&&n(7),s(e)){var u=S(t),l=F(t,e,void 0),d=!0;try{c=r(l),d=!1}finally{d?_(u):I(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return C(u,a),x(e,u)}),(function(e){throw _(u),e})):(C(u,a),x(c,u))}if(!e||"object"!=typeof e){if(void 0===(c=r(e))&&(c=e),c===W&&(c=void 0),t.F&&m(c,!0),a){var p=[],f=[];b("Patches").M(e,c,p,f),a(p,f)}return c}n(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(a))}))};var n,a,s=t.produce(e,r,(function(e,t){n=e,a=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,n,a]})):[s,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){s(e)||n(8),a(e)&&(e=T(e));var t=S(this),r=F(this,e,void 0);return r[$].C=!0,I(t),r},t.finishDraft=function(e,t){var r=(e&&e[$]).A;return C(r,t),x(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!G&&n(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var s=b("Patches").$;return a(e)?s(e,t):this.produce(e,(function(e){return s(e,t)}))},e}(),re=new te,ne=re.produce,ae=(re.produceWithPatches.bind(re),re.setAutoFreeze.bind(re)),se=(re.setUseProxies.bind(re),re.applyPatches.bind(re),re.createDraft.bind(re)),oe=re.finishDraft.bind(re);const ie=ne},95320:e=>{"use strict";var t=Function.prototype.toString,r=/^\s*class\b/,n=function(e){try{var n=t.call(e);return r.test(n)}catch(e){return!1}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(s)return function(e){try{return!n(e)&&(t.call(e),!0)}catch(e){return!1}}(e);if(n(e))return!1;var r=a.call(e);return"[object Function]"===r||"[object GeneratorFunction]"===r}},18923:e=>{"use strict";var t=Date.prototype.getDay,r=Object.prototype.toString,n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(n?function(e){try{return t.call(e),!0}catch(e){return!1}}(e):"[object Date]"===r.call(e))}},98420:(e,t,r)=>{"use strict";var n,a,s,o,i=r(21924),c=r(23695)();if(c){n=i("Object.prototype.hasOwnProperty"),a=i("RegExp.prototype.exec"),s={};var u=function(){throw s};o={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(o[Symbol.toPrimitive]=u)}var l=i("Object.prototype.toString"),d=Object.getOwnPropertyDescriptor;e.exports=c?function(e){if(!e||"object"!=typeof e)return!1;var t=d(e,"lastIndex");if(!(t&&n(t,"value")))return!1;try{a(e,o)}catch(e){return e===s}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===l(e)}},12636:(e,t,r)=>{"use strict";var n=Object.prototype.toString;if(r(41405)()){var a=Symbol.prototype.toString,s=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==n.call(e))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&s.test(a.call(e))}(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},68641:()=>{},29354:()=>{},18987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var a=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=r(50884),i=Object.prototype.propertyIsEnumerable,c=!i.call({toString:null},"toString"),u=i.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===s.call(e),n=o(e),i=t&&"[object String]"===s.call(e),p=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var h=u&&r;if(i&&e.length>0&&!a.call(e,0))for(var v=0;v<e.length;++v)p.push(String(v));if(n&&e.length>0)for(var m=0;m<e.length;++m)p.push(String(m));else for(var g in e)h&&"prototype"===g||!a.call(e,g)||p.push(String(g));if(c)for(var y=function(e){if("undefined"==typeof window||!f)return d(e);try{return d(e)}catch(e){return!1}}(e),b=0;b<l.length;++b)y&&"constructor"===l[b]||!a.call(e,l[b])||p.push(l[b]);return p}}e.exports=n},82215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,a=r(50884),s=Object.keys,o=s?function(e){return s(e)}:r(18987),i=Object.keys;o.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return a(e)?i(n.call(e)):i(e)})}else Object.keys=o;return Object.keys||o},e.exports=o},50884:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},11728:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n=r(67294),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=void 0;u="undefined"!=typeof window?window:"undefined"!=typeof self?self:r.g;var l=null,d=null,p=u.clearTimeout,f=u.setTimeout,h=u.cancelAnimationFrame||u.mozCancelAnimationFrame||u.webkitCancelAnimationFrame,v=u.requestAnimationFrame||u.mozRequestAnimationFrame||u.webkitRequestAnimationFrame;function m(e){var t=void 0,r=void 0,n=void 0,a=void 0,s=void 0,o=void 0,i=void 0,c="undefined"!=typeof document&&document.attachEvent;if(!c){o=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,a=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.style.width=r.offsetWidth+1+"px",a.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},s=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},i=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;o(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=d((function(){s(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}};var p=!1,f="";n="animationstart";var h="Webkit Moz O ms".split(" "),v="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(p=!0),!1===p)for(var g=0;g<h.length;g++)if(void 0!==m.style[h[g]+"AnimationName"]){f="-"+h[g].toLowerCase()+"-",n=v[g],p=!0;break}t="@"+f+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",a=f+"animation: 1ms "+r+"; "}return{addResizeListener:function(s,l){if(c)s.attachEvent("onresize",l);else{if(!s.__resizeTriggers__){var d=s.ownerDocument,p=u.getComputedStyle(s);p&&"static"===p.position&&(s.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',s=r.head||r.getElementsByTagName("head")[0],o=r.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(r.createTextNode(n)),s.appendChild(o)}}(d),s.__resizeLast__={},s.__resizeListeners__=[],(s.__resizeTriggers__=d.createElement("div")).className="resize-triggers";var f=d.createElement("div");f.className="expand-trigger",f.appendChild(d.createElement("div"));var h=d.createElement("div");h.className="contract-trigger",s.__resizeTriggers__.appendChild(f),s.__resizeTriggers__.appendChild(h),s.appendChild(s.__resizeTriggers__),o(s),s.addEventListener("scroll",i,!0),n&&(s.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&o(s)},s.__resizeTriggers__.addEventListener(n,s.__resizeTriggers__.__animationListener__))}s.__resizeListeners__.push(l)}},removeResizeListener:function(e,t){if(c)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",i,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}null==h||null==v?(l=p,d=function(e){return f(e,20)}):(l=function(e){var t=c(e,2),r=t[0],n=t[1];h(r),p(n)},d=function(e){var t=v((function(){p(r),e()})),r=f((function(){h(t),e()}),20);return[t,r]});var g=function(e){function t(){var e,r,n;a(this,t);for(var s=arguments.length,o=Array(s),c=0;c<s;c++)o[c]=arguments[c];return r=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,r=e.disableWidth,a=e.onResize;if(n._parentNode){var s=n._parentNode.offsetHeight||0,o=n._parentNode.offsetWidth||0,i=window.getComputedStyle(n._parentNode)||{},c=parseInt(i.paddingLeft,10)||0,u=parseInt(i.paddingRight,10)||0,l=parseInt(i.paddingTop,10)||0,d=parseInt(i.paddingBottom,10)||0,p=s-l-d,f=o-c-u;(!t&&n.state.height!==p||!r&&n.state.width!==f)&&(n.setState({height:s-l-d,width:o-c-u}),a({height:s,width:o}))}},n._setRef=function(e){n._autoSizer=e},i(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=m(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,a=e.disableHeight,s=e.disableWidth,i=e.style,c=this.state,u=c.height,l=c.width,d={overflow:"visible"},p={},f=!1;return a||(0===u&&(f=!0),d.height=0,p.height=u),s||(0===l&&(f=!0),d.width=0,p.width=l),(0,n.createElement)("div",{className:r,ref:this._setRef,style:o({},d,i)},!f&&t(p))}}]),t}(n.PureComponent);g.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};const y=g},57554:(e,t,r)=>{"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}r.d(t,{FixedSizeList:()=>I,VariableSizeList:()=>_});var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function c(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||i(n)&&i(a)))return!1;var n,a;return!0}const u=function(e,t){var r;void 0===t&&(t=c);var n,a=[],s=!1;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return s&&r===this&&t(o,a)||(n=e.apply(this,o),s=!0,r=this,a=o),n}};var l=r(67294);var d="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function p(e){cancelAnimationFrame(e.id)}function f(e,t){var r=d();var n={id:requestAnimationFrame((function a(){d()-r>=t?e.call(null):n.id=requestAnimationFrame(a)}))};return n}var h=null;function v(e){if(void 0===e&&(e=!1),null===h||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),a=n.style;return a.width="100px",a.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?h="positive-descending":(t.scrollLeft=1,h=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),h}return h}var m=function(e,t){return e};function g(e){var t,r=e.getItemOffset,s=e.getEstimatedTotalSize,i=e.getItemSize,c=e.getOffsetForIndexAndAlignment,d=e.getStartIndexForOffset,h=e.getStopIndexForStartIndex,g=e.initInstanceProps,b=e.shouldResetStyleCacheOnItemSizeChange,w=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=g(n.props,a(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:a(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=u((function(e,t,r,a){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:a})})),n._callOnScroll=void 0,n._callOnScroll=u((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,a=n.props,s=a.direction,o=a.itemSize,c=a.layout,u=n._getItemStyleCache(b&&o,b&&c,b&&s);if(u.hasOwnProperty(e))t=u[e];else{var l=r(n.props,e,n._instanceProps),d=i(n.props,e,n._instanceProps),p="horizontal"===s||"horizontal"===c,f="rtl"===s,h=p?l:0;u[e]=t={position:"absolute",left:f?void 0:h,right:f?h:void 0,top:p?0:l,height:p?"100%":d,width:p?d:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=u((function(e,t,r){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,a=t.scrollLeft,s=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===a)return null;var t=n.props.direction,o=a;if("rtl"===t)switch(v()){case"negative":o=-a;break;case"positive-descending":o=s-r-a}return o=Math.max(0,Math.min(o,s-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:o,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,a=t.scrollHeight,s=t.scrollTop;n.setState((function(e){if(e.scrollOffset===s)return null;var t=Math.max(0,Math.min(s,a-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&p(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=f(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}o(t,e),t.getDerivedStateFromProps=function(e,t){return y(e,t),w(e),null};var k=t.prototype;return k.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},k.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props.itemCount,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1)),this.scrollTo(c(this.props,e,t,n,this._instanceProps))},k.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var a=this._outerRef;"horizontal"===t||"horizontal"===n?a.scrollLeft=r:a.scrollTop=r}this._callPropsCallbacks()},k.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,a=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(v()){case"negative":s.scrollLeft=-a;break;case"positive-ascending":s.scrollLeft=a;break;default:var o=s.clientWidth,i=s.scrollWidth;s.scrollLeft=i-o-a}else s.scrollLeft=a;else s.scrollTop=a}this._callPropsCallbacks()},k.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&p(this._resetIsScrollingTimeoutId)},k.render=function(){var e=this.props,t=e.children,r=e.className,a=e.direction,o=e.height,i=e.innerRef,c=e.innerElementType,u=e.innerTagName,d=e.itemCount,p=e.itemData,f=e.itemKey,h=void 0===f?m:f,v=e.layout,g=e.outerElementType,y=e.outerTagName,b=e.style,w=e.useIsScrolling,k=e.width,C=this.state.isScrolling,_="horizontal"===a||"horizontal"===v,I=_?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),O=S[0],x=S[1],E=[];if(d>0)for(var R=O;R<=x;R++)E.push((0,l.createElement)(t,{data:p,key:h(R,p),index:R,isScrolling:w?C:void 0,style:this._getItemStyle(R)}));var A=s(this.props,this._instanceProps);return(0,l.createElement)(g||y||"div",{className:r,onScroll:I,ref:this._outerRefSetter,style:n({position:"relative",height:o,width:k,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},b)},(0,l.createElement)(c||u||"div",{children:E,ref:i,style:{height:_?"100%":A,pointerEvents:C?"none":void 0,width:_?A:"100%"}}))},k._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],a=e[3];this._callOnItemsRendered(t,r,n,a)}if("function"==typeof this.props.onScroll){var s=this.state,o=s.scrollDirection,i=s.scrollOffset,c=s.scrollUpdateWasRequested;this._callOnScroll(o,i,c)}},k._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,a=n.isScrolling,s=n.scrollDirection,o=n.scrollOffset;if(0===t)return[0,0,0,0];var i=d(this.props,o,this._instanceProps),c=h(this.props,i,o,this._instanceProps),u=a&&"backward"!==s?1:Math.max(1,r),l=a&&"forward"!==s?1:Math.max(1,r);return[Math.max(0,i-u),Math.max(0,Math.min(t-1,c+l)),i,c]},t}(l.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var y=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},b=function(e,t,r){var n=e.itemSize,a=r.itemMetadataMap,s=r.lastMeasuredIndex;if(t>s){var o=0;if(s>=0){var i=a[s];o=i.offset+i.size}for(var c=s+1;c<=t;c++){var u=n(c);a[c]={offset:o,size:u},o+=u}r.lastMeasuredIndex=t}return a[t]},w=function(e,t,r,n,a){for(;n<=r;){var s=n+Math.floor((r-n)/2),o=b(e,s,t).offset;if(o===a)return s;o<a?n=s+1:o>a&&(r=s-1)}return n>0?n-1:0},k=function(e,t,r,n){for(var a=e.itemCount,s=1;r<a&&b(e,r,t).offset<n;)r+=s,s*=2;return w(e,t,Math.min(r,a-1),Math.floor(r/2),n)},C=function(e,t){var r=e.itemCount,n=t.itemMetadataMap,a=t.estimatedItemSize,s=t.lastMeasuredIndex,o=0;if(s>=r&&(s=r-1),s>=0){var i=n[s];o=i.offset+i.size}return o+(r-s-1)*a},_=g({getItemOffset:function(e,t,r){return b(e,t,r).offset},getItemSize:function(e,t,r){return r.itemMetadataMap[t].size},getEstimatedTotalSize:C,getOffsetForIndexAndAlignment:function(e,t,r,n,a){var s=e.direction,o=e.height,i=e.layout,c=e.width,u="horizontal"===s||"horizontal"===i?c:o,l=b(e,t,a),d=C(e,a),p=Math.max(0,Math.min(d-u,l.offset)),f=Math.max(0,l.offset-u+l.size);switch("smart"===r&&(r=n>=f-u&&n<=p+u?"auto":"center"),r){case"start":return p;case"end":return f;case"center":return Math.round(f+(p-f)/2);default:return n>=f&&n<=p?n:n<f?f:p}},getStartIndexForOffset:function(e,t,r){return function(e,t,r){var n=t.itemMetadataMap,a=t.lastMeasuredIndex;return(a>0?n[a].offset:0)>=r?w(e,t,a,0,r):k(e,t,Math.max(0,a),r)}(e,r,t)},getStopIndexForStartIndex:function(e,t,r,n){for(var a=e.direction,s=e.height,o=e.itemCount,i=e.layout,c=e.width,u="horizontal"===a||"horizontal"===i?c:s,l=b(e,t,n),d=r+u,p=l.offset+l.size,f=t;f<o-1&&p<d;)f++,p+=b(e,f,n).size;return f},initInstanceProps:function(e,t){var r={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),r.lastMeasuredIndex=Math.min(r.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),I=g({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n){var a=e.direction,s=e.height,o=e.itemCount,i=e.itemSize,c=e.layout,u=e.width,l="horizontal"===a||"horizontal"===c?u:s,d=Math.max(0,o*i-l),p=Math.min(d,t*i),f=Math.max(0,t*i-l+i);switch("smart"===r&&(r=n>=f-l&&n<=p+l?"auto":"center"),r){case"start":return p;case"end":return f;case"center":var h=Math.round(f+(p-f)/2);return h<Math.ceil(l/2)?0:h>d+Math.floor(l/2)?d:h;default:return n>=f&&n<=p?n:n<f?f:p}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,a=e.height,s=e.itemCount,o=e.itemSize,i=e.layout,c=e.width,u=t*o,l="horizontal"===n||"horizontal"===i?c:a,d=Math.ceil((l+r-u)/o);return Math.max(0,Math.min(s-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}})},2085:(e,t,r)=>{"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{default:()=>re});var a=r(96156);function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=r(67294),i=r(45697),c=r.n(i);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const p=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const f="object"==typeof global&&global&&global.Object===Object&&global;var h="object"==typeof self&&self&&self.Object===Object&&self;const v=f||h||Function("return this")();const m=function(){return v.Date.now()};var g=/\s/;const y=function(e){for(var t=e.length;t--&&g.test(e.charAt(t)););return t};var b=/^\s+/;const w=function(e){return e?e.slice(0,y(e)+1).replace(b,""):e};const k=v.Symbol;var C=Object.prototype,_=C.hasOwnProperty,I=C.toString,S=k?k.toStringTag:void 0;const O=function(e){var t=_.call(e,S),r=e[S];try{e[S]=void 0;var n=!0}catch(e){}var a=I.call(e);return n&&(t?e[S]=r:delete e[S]),a};var x=Object.prototype.toString;const E=function(e){return x.call(e)};var R=k?k.toStringTag:void 0;const A=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R&&R in Object(e)?O(e):E(e)};const M=function(e){return null!=e&&"object"==typeof e};const P=function(e){return"symbol"==typeof e||M(e)&&"[object Symbol]"==A(e)};var U=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,F=/^0o[0-7]+$/i,T=parseInt;const N=function(e){if("number"==typeof e)return e;if(P(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=w(e);var r=j.test(e);return r||F.test(e)?T(e.slice(2),r?2:8):U.test(e)?NaN:+e};var q=Math.max,D=Math.min;const L=function(e,t,r){var n,a,s,o,i,c,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,s=a;return n=a=void 0,u=t,o=e.apply(s,r)}function v(e){return u=e,i=setTimeout(y,t),l?h(e):o}function g(e){var r=e-c;return void 0===c||r>=t||r<0||d&&e-u>=s}function y(){var e=m();if(g(e))return b(e);i=setTimeout(y,function(e){var r=t-(e-c);return d?D(r,s-(e-u)):r}(e))}function b(e){return i=void 0,f&&n?h(e):(n=a=void 0,o)}function w(){var e=m(),r=g(e);if(n=arguments,a=this,c=e,r){if(void 0===i)return v(c);if(d)return clearTimeout(i),i=setTimeout(y,t),h(c)}return void 0===i&&(i=setTimeout(y,t)),o}return t=N(t)||0,p(r)&&(l=!!r.leading,s=(d="maxWait"in r)?q(N(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f),w.cancel=function(){void 0!==i&&clearTimeout(i),u=0,n=c=a=i=void 0},w.flush=function(){return void 0===i?o:b(m())},w};const H=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return p(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),L(e,t,{leading:n,maxWait:t,trailing:a})};var B=r(31807),z=r.n(B),G=null,W=null;function V(){if(null===G){if("undefined"==typeof document)return G=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var r=t.getBoundingClientRect().right;e.removeChild(t),G=r}return G}function $(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function K(e){return e&&e.ownerDocument?e.ownerDocument:document}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}z()&&window.addEventListener("resize",(function(){W!==window.devicePixelRatio&&(W=window.devicePixelRatio,G=null)}));var J=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.onScroll=function(){var e=$(r.el);r.scrollXTicking||(e.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(e.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0),r.isScrolling||(r.isScrolling=!0,r.el.classList.add(r.classNames.scrolling)),r.onStopScrolling()},this.scrollX=function(){r.axis.x.isOverflowing&&r.positionScrollbar("x"),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&r.positionScrollbar("y"),r.scrollYTicking=!1},this.onStopScrolling=function(){r.el.classList.remove(r.classNames.scrolling),r.isScrolling=!1},this.onMouseEnter=function(){r.isMouseEntering||(r.el.classList.add(r.classNames.mouseEntered),r.isMouseEntering=!0),r.onMouseEntered()},this.onMouseEntered=function(){r.el.classList.remove(r.classNames.mouseEntered),r.isMouseEntering=!1},this.onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this.onWindowResize=function(){r.scrollbarWidth=e.getScrollbarWidth(),r.hideNativeScrollbar()},this.onPointerEvent=function(e){var t,n;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(n=r.isWithinBounds(r.axis.y.track.rect)),(t||n)&&(e.stopPropagation(),"pointerdown"===e.type&&"touch"!==e.pointerType&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,"x"):r.onTrackClick(e,"x")),n&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,"y"):r.onTrackClick(e,"y"))))},this.drag=function(t){var n=r.axis[r.draggedAxis].track,a=n.rect[r.axis[r.draggedAxis].sizeAttr],s=r.axis[r.draggedAxis].scrollbar,o=r.contentWrapperEl[r.axis[r.draggedAxis].scrollSizeAttr],i=parseInt(r.elStyles[r.axis[r.draggedAxis].sizeAttr],10);t.preventDefault(),t.stopPropagation();var c=(("y"===r.draggedAxis?t.pageY:t.pageX)-n.rect[r.axis[r.draggedAxis].offsetAttr]-r.axis[r.draggedAxis].dragOffset)/(a-s.size)*(o-i);"x"===r.draggedAxis&&(c=r.isRtl&&e.getRtlHelpers().isScrollOriginAtZero?c-(a+s.size):c),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=c},this.onEndDrag=function(e){var t=K(r.el),n=$(r.el);e.preventDefault(),e.stopPropagation(),r.el.classList.remove(r.classNames.dragging),t.removeEventListener("mousemove",r.drag,!0),t.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=n.setTimeout((function(){t.removeEventListener("click",r.preventClick,!0),t.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.options=X(X({},e.defaultOptions),n),this.classNames=X({contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,this.isScrolling=!1,this.isMouseEntering=!1,e.instances.has(this.el)||(n.classNames&&console.warn("simplebar: classNames option is deprecated. Please override the styles with CSS instead."),n.autoHide&&console.warn("simplebar: autoHide option is deprecated. Please use CSS instead: '.simplebar-scrollbar::before { opacity: 0.5 };' for autoHide: false"),this.onMouseMove=H(this.onMouseMove,64),this.onWindowResize=L(this.onWindowResize,64,{leading:!0}),this.onStopScrolling=L(this.onStopScrolling,this.stopScrollDelay),this.onMouseEntered=L(this.onMouseEntered,this.stopScrollDelay),this.init())}var t,r,n;return t=e,r=[{key:"init",value:function(){e.instances.set(this.el,this),z()&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=e.getScrollbarWidth(),this.recalculate(),this.initListeners())}},{key:"initDOM",value:function(){var e=this;if(Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(e.classNames.wrapper)})).length)this.wrapperEl=this.el.querySelector(".".concat(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(".".concat(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(".".concat(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(".".concat(this.classNames.offset)),this.maskEl=this.el.querySelector(".".concat(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,".".concat(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(".".concat(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(".".concat(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,".".concat(this.classNames.track,".").concat(this.classNames.horizontal)),this.axis.y.track.el=this.findChild(this.el,".".concat(this.classNames.track,".").concat(this.classNames.vertical));else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}if(!this.axis.x.track.el||!this.axis.y.track.el){var t=document.createElement("div"),r=document.createElement("div");t.classList.add(this.classNames.track),r.classList.add(this.classNames.scrollbar),t.appendChild(r),this.axis.x.track.el=t.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=t.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector(".".concat(this.classNames.scrollbar)),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector(".".concat(this.classNames.scrollbar)),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var e=this,t=$(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),t.addEventListener("resize",this.onWindowResize),window.ResizeObserver){var r=!1,n=t.ResizeObserver||ResizeObserver;this.resizeObserver=new n((function(){r&&t.requestAnimationFrame((function(){e.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),t.requestAnimationFrame((function(){r=!0}))}this.mutationObserver=new t.MutationObserver((function(){t.requestAnimationFrame((function(){e.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},{key:"recalculate",value:function(){var e=$(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,r=this.heightAutoObserverEl.offsetHeight<=1,n=this.heightAutoObserverEl.offsetWidth<=1||t>0,a=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,o=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var i=this.contentEl.scrollHeight,c=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=r?"auto":"100%",this.placeholderEl.style.width=n?"".concat(t||c,"px"):"auto",this.placeholderEl.style.height="".concat(i,"px");var u=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&c>t,this.axis.y.isOverflowing=i>u,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==o&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var l=this.axis.x.isOverflowing?this.scrollbarWidth:0,d=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&c>a-d,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&i>u-l,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px"),this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px"),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},{key:"getScrollbarSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(!this.axis[e].isOverflowing)return 0;var t,r=this.contentEl[this.axis[e].scrollSizeAttr],n=this.axis[e].track.el[this.axis[e].offsetSizeAttr],a=n/r;return t=Math.max(~~(a*n),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(t=Math.min(t,this.options.scrollbarMaxSize)),t}},{key:"positionScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(this.axis[t].isOverflowing){var r=this.contentWrapperEl[this.axis[t].scrollSizeAttr],n=this.axis[t].track.el[this.axis[t].offsetSizeAttr],a=parseInt(this.elStyles[this.axis[t].sizeAttr],10),s=this.axis[t].scrollbar,o=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],i=(o="x"===t&&this.isRtl&&e.getRtlHelpers().isScrollOriginAtZero?-o:o)/(r-a),c=~~((n-s.size)*i);c="x"===t&&this.isRtl&&e.getRtlHelpers().isScrollingToNegative?-c+(n-s.size):c,s.el.style.transform="x"===t?"translate3d(".concat(c,"px, 0, 0)"):"translate3d(0, ".concat(c,"px, 0)")}}},{key:"toggleTrackVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",t=this.axis[e].track.el,r=this.axis[e].scrollbar.el;this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?r.style.display="block":r.style.display="none"}},{key:"hideNativeScrollbar",value:function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):0}},{key:"onMouseMoveForAxis",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.axis[e].track.rect=this.axis[e].track.el.getBoundingClientRect(),this.axis[e].scrollbar.rect=this.axis[e].scrollbar.el.getBoundingClientRect();var t=this.isWithinBounds(this.axis[e].scrollbar.rect);t?this.axis[e].scrollbar.el.classList.add(this.classNames.hover):this.axis[e].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[e].track.rect)?this.axis[e].track.el.classList.add(this.classNames.hover):this.axis[e].track.el.classList.remove(this.classNames.hover)}},{key:"onMouseLeaveForAxis",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.axis[e].track.el.classList.remove(this.classNames.hover),this.axis[e].scrollbar.el.classList.remove(this.classNames.hover)}},{key:"onDragStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=K(this.el),n=$(this.el),a=this.axis[t].scrollbar,s="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=s-a.rect[this.axis[t].offsetAttr],this.draggedAxis=t,this.el.classList.add(this.classNames.dragging),r.addEventListener("mousemove",this.drag,!0),r.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(r.addEventListener("click",this.preventClick,!0),r.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)}},{key:"onTrackClick",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";if(this.options.clickOnTrack){e.preventDefault();var n=$(this.el);this.axis[r].scrollbar.rect=this.axis[r].scrollbar.el.getBoundingClientRect();var a=this.axis[r].scrollbar,s=a.rect[this.axis[r].offsetAttr],o=parseInt(this.elStyles[this.axis[r].sizeAttr],10),i=this.contentWrapperEl[this.axis[r].scrollOffsetAttr],c="y"===r?this.mouseY-s:this.mouseX-s,u=c<0?-1:1,l=-1===u?i-o:i+o,d=40,p=function e(){-1===u?i>l&&(i-=d,t.contentWrapperEl[t.axis[r].scrollOffsetAttr]=i,n.requestAnimationFrame(e)):i<l&&(i+=d,t.contentWrapperEl[t.axis[r].scrollOffsetAttr]=i,n.requestAnimationFrame(e))};p()}}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"getScrollElement",value:function(){return this.contentWrapperEl}},{key:"removeListeners",value:function(){var e=$(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()}},{key:"unMount",value:function(){this.removeListeners(),e.instances.delete(this.el)}},{key:"isWithinBounds",value:function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height}},{key:"findChild",value:function(e,t){var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return r.call(e,t)}))[0]}}],n=[{key:"getRtlHelpers",value:function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var r=t.firstElementChild,n=r.firstElementChild;document.body.appendChild(r),r.scrollLeft=0;var a=e.getOffset(r),s=e.getOffset(n);r.scrollLeft=-999;var o=e.getOffset(n);return document.body.removeChild(r),e.rtlHelpers={isScrollOriginAtZero:a.left!==s.left,isScrollingToNegative:s.left!==o.left},e.rtlHelpers}},{key:"getScrollbarWidth",value:function(){try{return"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:V()}catch(e){return V()}}},{key:"getOffset",value:function(e){var t=e.getBoundingClientRect(),r=K(e),n=$(e);return{top:t.top+(n.pageYOffset||r.documentElement.scrollTop),left:t.left+(n.pageXOffset||r.documentElement.scrollLeft)}}}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();J.defaultOptions={autoHide:!0,forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0},J.instances=new WeakMap;const Y=J;function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=o.forwardRef((function(e,t){var r=e.children,a=e.scrollableNodeProps,i=void 0===a?{}:a,c=s(e,["children","scrollableNodeProps"]),u=(0,o.useRef)(),l=(0,o.useRef)(),d=(0,o.useRef)(),p={},f={};return Object.keys(c).forEach((function(e){Object.prototype.hasOwnProperty.call(Y.defaultOptions,e)?p[e]=c[e]:f[e]=c[e]})),(0,o.useEffect)((function(){var e;return u.current=i.ref?i.ref.current:u.current,l.current&&(e=new Y(l.current,ee(ee(ee({},p),u&&{scrollableNode:u.current}),d.current&&{contentNode:d.current})),t&&(t.current=e)),function(){e.unMount(),e=null}}),[]),o.createElement("div",n({ref:l,"data-simplebar":!0},f),o.createElement("div",{className:"simplebar-wrapper"},o.createElement("div",{className:"simplebar-height-auto-observer-wrapper"},o.createElement("div",{className:"simplebar-height-auto-observer"})),o.createElement("div",{className:"simplebar-mask"},o.createElement("div",{className:"simplebar-offset"},"function"==typeof r?r({scrollableNodeRef:u,contentNodeRef:d}):o.createElement("div",n({},i,{className:"simplebar-content-wrapper".concat(i.className?" ".concat(i.className):"")}),o.createElement("div",{className:"simplebar-content"},r)))),o.createElement("div",{className:"simplebar-placeholder"})),o.createElement("div",{className:"simplebar-track simplebar-horizontal"},o.createElement("div",{className:"simplebar-scrollbar"})),o.createElement("div",{className:"simplebar-track simplebar-vertical"},o.createElement("div",{className:"simplebar-scrollbar"})))}));te.displayName="SimpleBar",te.propTypes={children:c().oneOfType([c().node,c().func]),scrollableNodeProps:c().object};const re=te},17170:(e,t,r)=>{"use strict";r.d(t,{ExternalEvents:()=>c});var n=r(50706),a=r(25155),s=r(22559);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,n.default)((function e(){var t=this;(0,a.default)(this,e),(0,s.default)(this,"listeners",[]),(0,s.default)(this,"send",(function(e,r){var n,a=o(t.listeners);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e,r)}}catch(e){a.e(e)}finally{a.f()}})),(0,s.default)(this,"subscribe",(function(e){return t.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}}))}))},78221:(e,t,r)=>{"use strict";r.d(t,{Idle:()=>c});var n=r(50706),a=r(25155),s=r(22559);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,n.default)((function e(t){var r=this;(0,a.default)(this,e),(0,s.default)(this,"listeners",new Set),(0,s.default)(this,"isIdle",(function(){return void 0===r.timeoutId})),(0,s.default)(this,"subscribe",(function(e){return r.listeners.add(e),function(){r.listeners.delete(e)}})),(0,s.default)(this,"onVisibilityChange",(function(){document.hidden?(document.removeEventListener("mousemove",r.onActive),document.removeEventListener("keydown",r.onActive,!0),r.onIdle()):(document.addEventListener("mousemove",r.onActive),document.addEventListener("keydown",r.onActive,!0),r.onActive())})),(0,s.default)(this,"onIdle",(function(){r.timeoutId&&(clearTimeout(r.timeoutId),r.timeoutId=void 0,r.notify())})),(0,s.default)(this,"onActive",(function(){var e=void 0!==r.timeoutId;r.timeoutId&&clearTimeout(r.timeoutId),r.timeoutId=window.setTimeout(r.onIdle,3e4),e||r.notify()})),(0,s.default)(this,"notify",(function(){r.logger.info("[IDLE]","user became ".concat(r.isIdle()?"idle":"active"));var e,t=o(r.listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)(r.isIdle())}}catch(e){t.e(e)}finally{t.f()}})),this.logger=t,this.onVisibilityChange(),document.addEventListener("visibilitychange",this.onVisibilityChange)}))},17254:(e,t,r)=>{"use strict";r.d(t,{Storage:()=>d});var n=r(31989),a=r(67846),s=r(25155),o=r(50706),i=r(22559),c=r(43883),u=r.n(c),l=r(91047),d=function(){function e(t){var r=this;(0,s.default)(this,e),(0,i.default)(this,"idbStoreName","storage"),(0,i.default)(this,"identify",(function(e){r.viewerPeerId=e})),(0,i.default)(this,"get",(function(e){var t=r.mapKey(e);try{var n=localStorage.getItem(t);if(!n)return;return JSON.parse(n,f)}catch(e){return}})),(0,i.default)(this,"set",(function(e,t){var n=r.mapKey(e);try{localStorage.setItem(n,JSON.stringify(t,p))}catch(e){}})),(0,i.default)(this,"del",(function(e){var t=r.mapKey(e);try{localStorage.removeItem(t)}catch(e){}})),(0,i.default)(this,"getIDB",function(){var e=(0,a.default)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.mapKey(t),e.next=3,l.get(n,r.idbStorage);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,i.default)(this,"setIDB",function(){var e=(0,a.default)(u().mark((function e(t,n){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.mapKey(t),e.next=3,l.set(a,n,r.idbStorage);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,i.default)(this,"delIDB",function(){var e=(0,a.default)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.mapKey(t),e.next=3,l.del(n,r.idbStorage);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.dbName=t,this.idbStorage=window.indexedDB&&l.createStore(t,this.idbStoreName)}return(0,o.default)(e,[{key:"mapKey",value:function(e){if(!this.viewerPeerId)throw new Error("Перед использованием Storage должен быть идентифицирован!");return"".concat(this.dbName,"-").concat(this.viewerPeerId,"-").concat(e)}}]),e}();function p(e,t){return t instanceof Map?{dataType:"Map",entries:Array.from(t.entries())}:t instanceof Set?{dataType:"Set",values:Array.from(t.values())}:t}function f(e,t){if("object"===(0,n.default)(t)&&null!==t){if("Map"===t.dataType)return new Map(t.entries);if("Set"===t.dataType)return new Set(t.values)}return t}},64832:(e,t,r)=>{"use strict";r.d(t,{useModal:()=>o,useModalGroup:()=>i});var n=r(67294),a=r(16032),s=r(7731),o=function(e){return c({groupId:e})},i=function(){var e=(0,n.useContext)(s.ModalContext),t=e.createGroup,r=e.closeGroup,a=(0,n.useRef)();a.current||(a.current=t());var o=a.current.id,i=(0,n.useCallback)((function(){return r(o)}),[r,o]);return{id:o,closeGroup:i}},c=function(e){var t=(0,n.useContext)(s.ModalContext),r=t.createModal,o=t.createGroup,i=t.getModalGroup,c=(0,n.useRef)();c.current||(c.current=null!=e&&e.groupId?i(e.groupId):o());var l=(0,n.useRef)();l.current||(l.current=r(c.current.id,null==e?void 0:e.isSubModal,null!=e&&e.id?a.resolveId(e.id):void 0));var d=l.current;return u(d)},u=function(e){var t=(0,n.useContext)(s.ModalContext),r=t.openedModals,o=t.openModal,i=t.closeModal,c=a.resolveId(e),u=(0,n.useCallback)((function(){return o(c)}),[o,c]),l=(0,n.useCallback)((function(){return i(c)}),[i,c]);return(0,n.useMemo)((function(){return{isActive:Boolean(r.find((function(t){return t===e}))),open:u,close:l}}),[l,e,u,r])}},47337:(e,t,r)=>{"use strict";r.d(t,{Avatar:()=>v});var n=r(31989),a=r(92993),s=r(97433),o=r(67294),i=r(20700),c=r.n(i),u=r(84970),l=r(14432),d=r(21705);const p=(0,r(55869).makeIcon)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0h3.98Zm.007 3H2.004a.502.502 0 0 0-.503.502v4.995c0 .278.225.503.503.503h3.995a.502.502 0 0 0 .502-.502V3.503A.502.502 0 0 0 5.997 3Z" /></symbol>',8,12);var f=r(58895);function h(){h=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return t.set(o,a||t.get(e)),(0,s.default)(o,r.prototype)}function o(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return(0,a.default)(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=o(r,this)),r},r.prototype[Symbol.replace]=function(r,a){if("string"==typeof a){var s=t.get(this);return e[Symbol.replace].call(this,r,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+s[t]})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!==(0,n.default)(e[e.length-1])&&(e=[].slice.call(e)).push(o(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,r,a)},h.apply(this,arguments)}var v=o.memo((function(e){var t=e.peer,r=e.size,n=e.activityIndicator,a=e.withOnline,s=void 0!==a&&a,i=e.withBirthday,p=void 0!==i&&i,v=e.activeCall,g=e.className,y=(0,u.useOnline)(t.id),b=(0,u.usePixelDensity)(),w=function(e,t){if("User"!==e.kind)return"Offline";if(t)switch(e.lastSeen.platform){case"vkme":case"mobile":return"Mobile";case"other":return"Online";default:return(0,d.exhaustivenessCheck)(e.lastSeen.platform)}return"Offline"}(t,s&&y),k=!!v,C=p&&function(e){var t;if("User"!==e.kind||!e.bdate)return!1;var r=new Date,n=String(r.getDate()),a=String(r.getMonth()+1),s=(null===(t=h(/(\d+)\.(\d+)/,{day:1,month:2}).exec(e.bdate))||void 0===t?void 0:t.groups)||{},o=s.day,i=s.month;return o===n&&i===a}(t),_=function(e,t){if("Contact"===e.kind)return e.photo50;return t?e.photo100:e.photo50}(t,b),I=(0,o.useMemo)((function(){return{width:r,height:r}}),[r]),S=function(e,t,r){return"mePeerFrame".concat(e).concat(t).concat(r?"c":"")}(w,r,k||C),O="url(#".concat(S,"Mask").concat(t.id,")"),x=c()("MEAvatar","MEAvatar--size-".concat(r),{"MEAvatar--withActivity":!!n,"MEAvatar--emptyCall":"empty"===v},g);return o.createElement("figure",{style:I,className:x},o.createElement("div",{className:"MEAvatar__imgWrapper",style:{clipPath:O}},_?o.createElement("img",{className:"MEAvatar__img",alt:l.name(t),src:_}):o.createElement(f.AvatarNoPhoto,{peer:t,size:r}),n&&o.createElement("div",{className:"MEAvatar__activityIndicator"},n)),o.createElement(m,{frameType:w}),C&&o.createElement("div",{className:"MEAvatar__birthday"},o.createElement("svg",{className:"MEAvatar__upperRightIcon"},o.createElement("use",{href:"#meCake10"}))),k&&o.createElement("div",{className:"MEAvatar__call"},o.createElement("svg",{className:"MEAvatar__upperRightIcon"},o.createElement("use",{href:"#mePhone10"}))),o.createElement("svg",{className:"MEAvatar__svg"},o.createElement("clipPath",{id:S+"Mask"+t.id},o.createElement("use",{href:"#"+S})),o.createElement("use",{href:"#"+S,className:"MEAvatar__shadow",clipPath:O})))}));var m=function(e){var t=e.frameType;switch(t){case"Me":case"Mobile":return o.createElement("div",{className:"MEAvatar__mobile"},o.createElement(p,null));case"Online":return o.createElement("div",{className:"MEAvatar__online"});case"Offline":return null;default:(0,d.exhaustivenessCheck)(t)}}},58895:(e,t,r)=>{"use strict";r.d(t,{AvatarNoPhoto:()=>u,AvatarNoPhotoSimple:()=>l});var n=r(67294),a=r(20700),s=r.n(a),o=r(14432),i=r(21705),c=r(87075),u=function(e){var t=e.peer,r=e.size,a=e.style,s=e.className;return n.createElement(l,{peerId:t.id,size:r,style:a,className:s,text:d(t)})},l=function(e){var t=e.text,r=e.peerId,a=e.size,i=e.style,c=e.className,u=void 0!==r&&o.isContactPeerId(r)?"AvatarNoPhoto--color-contact":"AvatarNoPhoto--color-".concat(Math.abs((null!=r?r:0)%6));return n.createElement("div",{style:i,className:s()("AvatarNoPhoto","AvatarNoPhoto--size-".concat(a),u,c)},t)};function d(e){var t="";switch(e.kind){case"User":t=[e.firstName,e.lastName].filter(Boolean).map(c.getFirstLetter).join("");break;case"Group":t=(0,c.getFirstLetter)(e.name);break;case"Chat":t=(0,c.getFirstLetter)(e.title);break;case"Contact":t=e.name.split(/\s/).slice(0,2).map(c.getFirstLetter).join("");break;default:(0,i.exhaustivenessCheck)(e)}return t}},80240:(e,t,r)=>{"use strict";r.d(t,{CopyText:()=>a});var n=r(67294),a=function(e){var t=e.text,r=e.onCopyDone,a=e.children,s=(0,n.useRef)(null),o=(0,n.useCallback)((function(e){function n(){s.current&&(s.current.focus(),s.current.select(),document.execCommand("copy"),e.preventDefault(),e.stopPropagation(),r&&r())}navigator.clipboard.writeText?navigator.clipboard.writeText(t).then((function(){r&&r()})).catch(n):n()}),[r,t]);return n.createElement("div",{className:"CopyText",onClick:o},n.createElement("input",{type:"text",readOnly:!0,value:t||"",ref:s,className:"CopyText__input"}),a)}},65510:(e,t,r)=>{"use strict";r.d(t,{ModalBackdrop:()=>i});var n=r(67294),a=r(20700),s=r.n(a),o=r(42037),i=function(e){var t,r=e.isClear,a=e.isBodyScrollDisabled,i=e.onClick,c=e.children,u=s()("RE_ModalBackdrop",{"RE_ModalBackdrop--tinted":!r}),l=(0,n.useContext)(o.ModalConfigContext).isFullScreen,d=s()("RE_ModalBackdrop__container",l?"RE_ModalBackdrop__container--fullScreen":"RE_ModalBackdrop__container--window");return t=Boolean(a),(0,n.useEffect)((function(){var e=document.body;if(t){var r=e.getBoundingClientRect(),n=window.innerWidth-(r.left+r.right);if(0!==n){var a=document.createElement("style");return a.innerText="body { overflow-y: hidden !important; }",e.appendChild(a),e.style.borderRight="".concat(n,"px solid transparent"),function(){e.style.borderRight="",e.removeChild(a)}}}}),[t]),n.createElement("div",{className:u},i&&n.createElement("div",{className:"RE_ModalBackdrop__flesh",onClick:i}),n.createElement("div",{className:d},c))}},51146:(e,t,r)=>{"use strict";r.d(t,{ModalBody:()=>c});var n=r(67294),a=r(20700),s=r.n(a),o=r(2085),i=r(42037),c=function(e){var t=e.children,r=e.withCustomLayout,a=e.withScrollHandling,c=(0,n.useContext)(i.ModalConfigContext).isFullScreen,u=s()("RE_ModalBody",{"RE_ModalBody--standard":!r,"RE_ModalBody--scrollable":a,"RE_ModalBody--fullScreen":c}),l=a?o.default:"div";return n.createElement(l,{className:u},t)}},42037:(e,t,r)=>{"use strict";r.d(t,{ModalConfigContext:()=>s,ModalsConfigProvider:()=>o});var n=r(67294),a=r(17388),s=(0,n.createContext)({isFullScreen:!1}),o=function(e){var t=e.children,r=(0,a.useLayoutData)(),o=(0,n.useMemo)((function(){return{isFullScreen:"one-column"===r.mode}}),[r.mode]);return n.createElement(s.Provider,{value:o},t)}},21476:(e,t,r)=>{"use strict";r.d(t,{ModalFooter:()=>a});var n=r(67294),a=function(e){var t=e.buttons,r=e.hint,a=e.children;return n.createElement("footer",{className:"RE_ModalFooter"},r&&n.createElement("div",{className:"RE_ModalFooter__hint"},r),a&&n.createElement("div",{className:"RE_ModalFooter__content"},a),t&&n.createElement("div",{className:"RE_ModalFooter__actions"},t))}},30954:(e,t,r)=>{"use strict";r.d(t,{ModalHeader:()=>c});var n=r(67294);const a=(0,r(55869).makeIcon)("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol fill="none" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" id="chevron_left_outline_28"><path d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" fill="currentColor" /></symbol>',28,28);var s=r(76109),o=r(20700),i=r.n(o),c=function(e){var t=e.onClose,r=e.closeLabel,o=e.backLabel,c=e.onBack,u=e.title,l=e.children,d=e.className,p=e.closeClassName;return n.createElement("header",{className:i()("RE_ModalHeader",d)},n.createElement("div",{className:"RE_ModalHeader__content"},o&&c&&n.createElement("button",{className:"RE_ModalHeader__back",onClick:c},n.createElement("span",{className:"RE_ModalHeader__backIcon"},n.createElement(a,null)),o),u&&n.createElement("h1",{className:"RE_ModalHeader__title"},u),l&&n.createElement("div",{className:"RE_ModalHeader__container"},l)),n.createElement("button",{className:i()("RE_ModalHeader__close",p),"aria-label":r,onClick:t},n.createElement(s.default,null)))}},18742:(e,t,r)=>{"use strict";r.d(t,{ModalInterface:()=>l});var n=r(67294),a=r(63997),s=r(65510),o=r(92377),i=r(30954),c=r(51146),u=r(21476),l=function(e){var t=e.onClose,r=e.closeLabel,l=e.onBack,d=e.backLabel,p=e.title,f=e.contextClass,h=e.panelClass,v=e.hasClearBackdrop,m=e.isHidden,g=e.portalTarget,y=e.buttons,b=e.withCustomLayout,w=e.children,k=e.footerHint;return n.createElement(a.ModalView,{onEscape:t,contextClass:f,portalTarget:g,isHidden:m},n.createElement(s.ModalBackdrop,{onClick:t,isClear:v},n.createElement(o.ModalPanel,{className:h},n.createElement(i.ModalHeader,{closeLabel:r,onClose:t,backLabel:d,onBack:l,title:p}),n.createElement(c.ModalBody,{withCustomLayout:b},w),y&&n.createElement(u.ModalFooter,{buttons:y,hint:k}))))}},92377:(e,t,r)=>{"use strict";r.d(t,{ModalPanel:()=>i});var n=r(67294),a=r(20700),s=r.n(a),o=r(42037),i=function(e){var t=e.children,r=e.className,a=(0,n.useContext)(o.ModalConfigContext).isFullScreen,i=s()("RE_ModalPanel",r,{"RE_ModalPanel--fullScreen":a});return n.createElement("article",{className:i},t)}},63997:(e,t,r)=>{"use strict";r.d(t,{ModalView:()=>u});var n=r(67294),a=r(20700),s=r.n(a),o=r(26954),i=r(56151),c=r(48521),u=function(e){var t=e.children,r=e.isHidden,a=e.onEscape,u=e.contextClass,l=e.portalTarget,d=(0,i.useLayer)(),p=s()("RE_ModalView",{"RE_ModalView--hidden":Boolean(r)}),f=(0,c.useModuleKeyBoardHandlers)({moduleName:"ModalView",blockGlobalHandlersWhileActive:!0}).subscribeKeyDown,h=(0,n.useCallback)((function(e,t){"Escape"===e&&(t(),null==a||a())}),[a]);return(0,n.useLayoutEffect)((function(){return f(h)}),[f,h]),n.createElement(o.Portal,{portalClassName:u,portalTarget:l||d},n.createElement("div",{className:p},t))}},69303:(e,t,r)=>{"use strict";r.d(t,{OptionsListItem:()=>i});var n=r(67294),a=r(20700),s=r.n(a);const o=(0,r(55869).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="m11 7.5 6.5 6.5-6.5 6.5" stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /><path d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414L16.086 14Z" fill="currentColor" fill-rule="nonzero" /></g></symbol>',28,28);var i=function(e){var t=e.icon,r=e.title,a=e.description,i=e.aside,u=e.isPadded,l=void 0===u||u,d=e.isInteractive,p=e.hasChevron,f=e.onClick,h=e.className,v=s()("OptionsListItem",h,{"OptionsListItem--interactive":null!=d?d:Boolean(f),"OptionsListItem--padded":l});return n.createElement("li",{className:v,onClick:f,tabIndex:f?0:void 0,onMouseDown:f?c:void 0},n.createElement("div",{className:"OptionsListItem__icon","aria-hidden":!0},t),n.createElement("div",{className:"OptionsListItem__main"},n.createElement("div",{className:"OptionsListItem__title"},r),a&&n.createElement("div",{className:"OptionsListItem__description"},a)),p&&n.createElement("div",{className:"OptionsListItem__aside OptionsListItem__aside--chevron"},n.createElement(o,null)),i&&n.createElement("div",{className:"OptionsListItem__aside"},i))};function c(e){e.preventDefault()}},82597:(e,t,r)=>{"use strict";r.d(t,{empty:()=>u,snakeCaseId:()=>d,getLockId:()=>p,isLoaded:()=>f,push:()=>h,refresh:()=>v,updateCounters:()=>m,sorter:()=>g});var n=r(22559),a=r(16352);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){var e={channelIds:new Set,hasMore:!0,unreadCount:0,totalCount:0,boundary:{channelId:a.resolveId(0),majorSortId:1/0,minorSortId:1/0}};return{all:c({kind:"all"},e),unread:c({kind:"unread"},e),archive:c({kind:"archive",isHidden:!1},e)}}var l={all:"all",unread:"unread",archive:"archived"};function d(e){return l[e]}function p(e){return"filter_".concat(e)}function f(e){return e.boundary.minorSortId!==1/0&&e.boundary.majorSortId!==1/0}function h(e,t,r,n){var o,i=s(r);try{for(i.s();!(o=i.n()).done;){var c=o.value;y(e,t,c),v(e,c)}}catch(e){i.e(e)}finally{i.f()}e[t].hasMore=n,e[t].hasMore||(e[t].boundary={majorSortId:0,minorSortId:0,channelId:a.resolveId(0)})}function v(e,t){e.all.channelIds.delete(t.id),e.unread.channelIds.delete(t.id),e.archive.channelIds.delete(t.id),t.isMember&&(t.isArchived?b(e.archive,t)&&e.archive.channelIds.add(t.id):(b(e.all,t)&&e.all.channelIds.add(t.id),a.isUnread(t)&&b(e.unread,t)&&e.unread.channelIds.add(t.id)))}function m(e,t){var r=t.unread,n=t.archiveTotal;void 0!==r&&(e.all.unreadCount=r,e.unread.unreadCount=r),void 0!==n&&(e.archive.totalCount=n)}function g(e,t){return e.majorSortId!==t.majorSortId?t.majorSortId-e.majorSortId:t.minorSortId!==e.minorSortId?t.minorSortId-e.minorSortId:e.id-t.id}function y(e,t,r){a.isHidden(r)||(r.majorSortId<e[t].boundary.majorSortId?e[t].boundary={channelId:r.id,majorSortId:r.majorSortId,minorSortId:r.minorSortId}:r.majorSortId===e[t].boundary.majorSortId&&r.minorSortId<e[t].boundary.minorSortId?(e[t].boundary.channelId=r.id,e[t].boundary.minorSortId=r.minorSortId):r.majorSortId===e[t].boundary.majorSortId&&r.minorSortId===e[t].boundary.minorSortId&&(e[t].boundary.channelId=r.id),"all"===t&&y(e,"unread",r))}function b(e,t){return!a.isHidden(t)&&(!(t.majorSortId<e.boundary.majorSortId)&&(t.majorSortId>e.boundary.majorSortId||!(t.minorSortId<e.boundary.minorSortId)&&(t.minorSortId>e.boundary.minorSortId||!(t.id>e.boundary.channelId))))}},52229:(e,t,r)=>{"use strict";r.d(t,{empty:()=>l,snakeCaseId:()=>p,isLoaded:()=>f,getLockId:()=>h,isVisible:()=>v,push:()=>m,refresh:()=>g,updateCounters:()=>y,sorter:()=>b,toggleArchiveVisibility:()=>w});var n=r(22559),a=r(9727),s=r(21705);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(){var e={peerIds:new Set,hasMore:!0,unreadCount:0,unreadUnmutedCount:0,totalCount:0,boundary:{majorSortId:1/0,minorSortId:1/0}};return{all:u({kind:"all"},e),unread:u({kind:"unread",headerNotMutedUnread:0},e),chats:u({kind:"chats"},e),archive:u({kind:"archive",hasMentions:!1,isHidden:!1},e),messageRequest:u({kind:"messageRequest"},e)}}var d={all:"all",unread:"unread",chats:"chats",messageRequest:"message_request",businessNotify:"business_notify",archive:"archive"};function p(e){return d[e]}function f(e){return e.boundary.majorSortId!==1/0&&e.boundary.minorSortId!==1/0}function h(e){return"filter_".concat(e)}function v(e){switch(e.kind){case"all":case"unread":case"chats":return!0;case"messageRequest":return e.peerIds.size>0||e.hasMore;default:return!e.isHidden&&(e.peerIds.size>0||e.hasMore)}}function m(e,t,r,n){var a,s=o(r);try{for(s.s();!(a=s.n()).done;){var i=a.value;k(e,t,i),g(e,i)}}catch(e){s.e(e)}finally{s.f()}e[t].hasMore=n,e[t].hasMore||(e[t].boundary={majorSortId:0,minorSortId:0})}function g(e,t){switch(t.kind){case"ChatConvo":case"GroupConvo":case"UserConvo":case"ContactConvo":case"MessageRequestUserConvo":case"MessageRequestChatConvo":return e.all.peerIds.delete(t.peerId),e.unread.peerIds.delete(t.peerId),e.archive.peerIds.delete(t.peerId),e.messageRequest.peerIds.delete(t.peerId),a.isMR(t)?void(a.isPendingMR(t)&&C(e.messageRequest,t)&&e.messageRequest.peerIds.add(t.peerId)):t.isArchived?void(C(e.archive,t)&&e.archive.peerIds.add(t.peerId)):(C(e.all,t)&&e.all.peerIds.add(t.peerId),a.isUnread(t)&&C(e.unread,t)&&e.unread.peerIds.add(t.peerId),void("ChatConvo"===t.kind&&C(e.chats,t)&&e.chats.peerIds.add(t.peerId)));default:return(0,s.exhaustivenessCheck)(t)}}function y(e,t){var r=t.unread,n=t.unreadUnmuted,a=t.headerNotMutedUnread,s=t.archive,o=t.archiveTotal,i=t.archiveMentions,c=t.messageRequests;void 0!==r&&(e.all.unreadCount=r,e.unread.unreadCount=r),void 0!==n&&(e.all.unreadUnmutedCount=n,e.unread.unreadUnmutedCount=n),void 0!==a&&(e.unread.headerNotMutedUnread=a),void 0!==s&&(e.archive.unreadCount=s),void 0!==i&&(e.archive.hasMentions=!!i),void 0!==o&&(e.archive.totalCount=o),void 0!==c&&(e.messageRequest.totalCount=c)}function b(e,t){if(e.majorSortId!==t.majorSortId)return t.majorSortId-e.majorSortId;var r=null==e?void 0:e.queued.get(e.queuedId),n=null==t?void 0:t.queued.get(t.queuedId);return r&&!n?-1:n&&!r?1:r&&n?n.sentAt-r.sentAt:t.minorSortId-e.minorSortId}function w(e,t){e.archive.isHidden=!t}function k(e,t,r){a.isHidden(r)||(r.majorSortId<e[t].boundary.majorSortId?e[t].boundary={majorSortId:r.majorSortId,minorSortId:r.minorSortId}:r.majorSortId===e[t].boundary.majorSortId&&r.minorSortId<e[t].boundary.minorSortId&&(e[t].boundary.minorSortId=r.minorSortId),"all"===t&&(k(e,"unread",r),k(e,"chats",r)))}function C(e,t){return!a.isHidden(t)&&(t.majorSortId>e.boundary.majorSortId||t.majorSortId===e.boundary.majorSortId&&t.minorSortId>=e.boundary.minorSortId)}},27119:(e,t,r)=>{"use strict";r.d(t,{refresh:()=>i,refreshChannels:()=>c,empty:()=>u,isEqual:()=>l});var n=r(21705),a=r(52229),s=r(82597),o=r(60202);function i(e,t){o.refresh(e.folders,t),a.refresh(e.filters,t)}function c(e,t){s.refresh(e.channelFilters,t)}function u(){return{filters:a.empty(),folders:o.empty(),channelFilters:s.empty()}}function l(e,t){if(e.kind!==t.kind)return!1;switch(e.kind){case"filters":return e.filter===t.filter;case"folders":return e.id===t.id;default:(0,n.exhaustivenessCheck)(e)}}},10454:(e,t,r)=>{"use strict";r.d(t,{fromApiComment:()=>p});var n=r(22559),a=r(51766),s=r(14432),o=r(41450),i=r(30966),c=r(16352),u=r(3460);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){var t,r,n,l,f={cmid:a.resolveCmid(e.id),postCmid:i.resolveCmid(e.post_id||0),channelId:c.resolveId(e.owner_id||0),rootCmid:e.reply_to_comment?a.resolveCmid(e.reply_to_comment):void 0,replies:{count:(null==e||null===(t=e.thread)||void 0===t?void 0:t.count)||0,history:((null===(r=e.thread)||void 0===r?void 0:r.items)||[]).map(p)},sentAt:1e3*e.date};return e.deleted?d({kind:"Deleted"},f):d(d({kind:"Normal"},f),{},{chunks:e.text?o.fromServerText(e.text):[],attaches:(0,u.fromApiWallReplyAttach)(e.attachments||[]),likes:{count:(null===(n=e.likes)||void 0===n?void 0:n.count)||0,isLiked:Boolean((null===(l=e.likes)||void 0===l?void 0:l.user_likes)||0)},peerId:s.resolveId(e.from_id)})}},98237:(e,t,r)=>{"use strict";r.d(t,{Api:()=>O,ExecuteErrors:()=>E,RequestError:()=>x});var n=r(92993),a=r(4604),s=r(81944),o=r(97433);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,r){return c=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&(0,o.default)(a,r.prototype),a},c.apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,(0,s.default)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,o.default)(n,e)},u(e)}var l=r(16790),d=r(67846),p=r(80312),f=r(25155),h=r(50706),v=r(22559),m=r(43883),g=r.n(m),y=r(16405),b=r(6978),w=r(90831),k=r(21705),C=["error_code","error_msg"];function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(){function e(t,r,n,a){var s=this;(0,f.default)(this,e),(0,v.default)(this,"waiting",[]),(0,v.default)(this,"freeResources",w.API_RATE_LIMIT),(0,v.default)(this,"abortTrackers",new Map),(0,v.default)(this,"enrichParams",(function(e,t){var r=e.slice(0,e.indexOf(".")),n={friends:w.API_USER_FIELDS.join(","),messages:Array.from(new Set([].concat((0,p.default)(w.API_USER_FIELDS),(0,p.default)(w.API_GROUP_FIELDS)))).join(","),channels:Array.from(new Set([].concat((0,p.default)(w.API_USER_FIELDS),(0,p.default)(w.API_GROUP_FIELDS)))).join(","),users:w.API_USER_FIELDS.join(","),groups:w.API_GROUP_FIELDS.join(","),wall:Array.from(new Set([].concat((0,p.default)(w.API_USER_FIELDS),(0,p.default)(w.API_GROUP_FIELDS)))).join(",")}[r];return n?S(S({},t),{},{extended:1,fields:n}):t})),(0,v.default)(this,"doFetch",function(){var e=(0,d.default)(g().mark((function e(t,r,n,a){var o,i,c,u,d,p,f,h,v;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.lock()){e.next=2;break}return e.abrupt("return",new Promise((function(e,o){s.waiting.push((function(){return s.doFetch(t,r,n,a).then(e).catch(o)}))})));case 2:return e.prev=2,s.logger.info("[API] Request",t,r),(o=new URLSearchParams).append("v",y.API_VERSION),e.t0=S,e.t1=S({},s.enrichParams(t,r)),e.t2={},e.next=11,s.token();case 11:return e.t3=e.sent,e.t4={access_token:e.t3},i=(0,e.t0)(e.t1,e.t2,e.t4),c="".concat(w.API_BASE_URL,"/method/").concat(t,"?").concat(o.toString()),u=s.request(c,i,n),d=u.response,p=u.abort,a&&s.abortTrackers.set(a,p),e.next=19,d;case 19:if(f=e.sent,a&&s.abortTrackers.delete(a),s.logger.info("[API] Response",t,f),s.release(),!f.error){e.next=26;break}return h=f.error,h.error_code,h.error_msg,v=(0,l.default)(h,C),e.abrupt("return",Promise.reject(new x(f.error.error_code,f.error.error_msg,v)));case 26:if(!f.execute_errors){e.next=28;break}return e.abrupt("return",Promise.reject(new E(f.execute_errors)));case 28:return e.abrupt("return",f.response);case 31:return e.prev=31,e.t5=e.catch(2),s.logger.info("[API] Error",e.t5),s.release(),e.abrupt("return",Promise.reject(e.t5));case 36:case"end":return e.stop()}}),e,null,[[2,31]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),(0,v.default)(this,"lock",(function(){return 0!==s.freeResources&&(s.freeResources=Math.max(s.freeResources-1,0),!0)})),(0,v.default)(this,"release",(function(){setTimeout((function(){s.freeResources=Math.min(s.freeResources+1,w.API_RATE_LIMIT);var e=s.waiting.shift();e&&e()}),w.API_RATE_LIMIT_WINDOW+50)})),this.logger=t,this.request=r,this.token=n,this.onCaptcha=a}var t;return(0,h.default)(e,[{key:"fetch",value:(t=(0,d.default)(g().mark((function e(t,r){var n,a,s,o,i,c,u,l,d=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:{},a=["messages.getLongPollHistory","channels.getLongPollHistory"].includes(t)?2e3:w.API_MAX_RETRY_TIMEOUT,s=n.retries||0,o=0;case 4:return e.prev=5,e.next=8,this.doFetch(t,r,n.timeout||w.API_DEFAULT_TIMEOUT,n.trackId);case 8:return i=e.sent,e.abrupt("return",i);case 12:if(e.prev=12,e.t0=e.catch(5),!(e.t0 instanceof Error&&"AbortError"===e.t0.name)){e.next=16;break}throw e.t0;case 16:if(o++,!(e.t0 instanceof x)){e.next=48;break}e.t1=e.t0.code,e.next=e.t1===b.API_ERROR_AUTH?21:e.t1===b.API_ERROR_CAPTCHA?25:48;break;case 21:return e.next=23,this.token(!0);case 23:return o--,e.abrupt("break",48);case 25:if(c=void 0,u=void 0,!this.captcha){e.next=33;break}return c=this.captcha.sid,e.next=30,this.captcha.key;case 30:u=e.sent,e.next=42;break;case 33:if(c=e.t0.payload.captcha_sid,l=e.t0.payload.captcha_img,"string"==typeof c&&"string"==typeof l){e.next=37;break}throw e.t0;case 37:return this.captcha={sid:c,key:this.onCaptcha(l)},e.next=40,this.captcha.key;case 40:u=e.sent,this.captcha=void 0;case 42:if(u){e.next=44;break}throw e.t0;case 44:return r.captcha_sid=c,r.captcha_key=u,o--,e.abrupt("break",48);case 48:if(o!==s+1){e.next=50;break}throw e.t0;case 50:return e.next=52,(0,k.sleep)(Math.min(w.API_MIN_RETRY_TIMEOUT*Math.pow(2,o),a));case 52:e.next=4;break;case 54:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e,r){return t.apply(this,arguments)})},{key:"fetchMany",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=[],a=Object.keys(e),s=0,o=a;s<o.length;s++){var i=o[s],c=i.replace(".","_");r.push("var ".concat(c," = fork(API.").concat(i,"(").concat(JSON.stringify(this.enrichParams(i,e[i])),"));")),n.push("'".concat(i,"': wait(").concat(c,")"))}var u="".concat(r.join("\n"),"\nreturn { ").concat(n.join(",")," };");return this.fetch("execute",{code:u},t)}},{key:"dangerouslyAbort",value:function(e){var t;e&&(null===(t=this.abortTrackers.get(e))||void 0===t||t(),this.abortTrackers.delete(e))}}],[{key:"resolveTrackId",value:function(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в Api.resolveTrackId");return"".concat(e,"-").concat(t)}}]),e}(),x=function(e){(0,n.default)(r,e);var t=_(r);function r(e,n,a){var s;return(0,f.default)(this,r),(s=t.call(this,n)).code=e,s.payload=a,s}return(0,h.default)(r)}(u(Error)),E=function(e){(0,n.default)(r,e);var t=_(r);function r(e){var n;return(0,f.default)(this,r),(n=t.call(this,String(e[0].error_code))).list=e.map((function(e){return{code:e.error_code,message:e.error_msg}})),n}return(0,h.default)(r)}(u(Error))},11719:(e,t,r)=>{"use strict";r.d(t,{Engine:()=>f});var n=r(80312),a=r(67846),s=r(50706),o=r(25155),i=r(22559),c=r(43883),u=r.n(c),l=r(21705);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=(0,s.default)((function e(t,r){var s=this;(0,o.default)(this,e),(0,i.default)(this,"isWorking",!1),(0,i.default)(this,"empty",(function(){return{kind:"Buffer",buffer:[]}})),(0,i.default)(this,"queued",this.empty()),(0,i.default)(this,"connect",(function(e){if(!s.isWorking){s.isWorking=!0,s.queued=s.empty();var t=function(){var t=(0,a.default)(u().mark((function t(){var r,n,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.isWorking){t.next=25;break}if(!("Buffer"===s.queued.kind&&s.queued.buffer.length>=50)){t.next=5;break}return s.isWorking=!1,s.dispatch({kind:"Failure"}),t.abrupt("return");case 5:return t.prev=5,r="https://".concat(e.server,"?version=").concat(s.version,"&mode=").concat(170),n=s.request(r,{act:"a_check",key:e.key,ts:e.ts,wait:25},3e4),a=n.response,t.next=10,a;case 10:if(!("failed"in(o=t.sent))){t.next=13;break}throw o;case 13:e.ts=o.ts,e.pts=o.pts,s.dispatch(p({kind:"Batch"},o)),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(5),s.logger.info("[ENGINE] Error",t.t0),s.isWorking=!1,s.dispatch({kind:"Failure"});case 23:t.next=0;break;case 25:case"end":return t.stop()}}),t,null,[[5,18]])})));return function(){return t.apply(this,arguments)}}();t(),s.logger.info("[ENGINE] Connected")}})),(0,i.default)(this,"dispatch",(function(e){if("Callback"===s.queued.kind)return s.queued.resolve(e),void(s.queued=s.empty());switch(e.kind){case"Failure":return void s.queued.buffer.push(e);case"Batch":var t,r=s.queued.buffer[s.queued.buffer.length-1];if(r&&"Failure"!==r.kind&&r.pts===e.pts)r.ts=e.ts,r.pts=e.pts,(t=r.updates).push.apply(t,(0,n.default)(e.updates));else s.queued.buffer.push(e);return;default:(0,l.exhaustivenessCheck)(e)}})),(0,i.default)(this,"poll",(function(){if("Callback"===s.queued.kind)return s.queued.reject("Engine.poll вызван повторно до обработки первого вызова!"),new Promise((function(e,t){s.queued={kind:"Callback",resolve:e,reject:t}}));var e=s.queued.buffer.shift();return e?Promise.resolve(e):s.isWorking?new Promise((function(e,t){s.queued={kind:"Callback",resolve:e,reject:t}})):Promise.reject("Engine.connect еще не был вызван!")})),(0,i.default)(this,"isConnected",(function(){return s.isWorking})),this.logger=t,this.request=r,this.version=19}))},16032:(e,t,r)=>{"use strict";r.d(t,{Stack:()=>i,Modals:()=>c,resolveId:()=>u});var n=r(25155),a=r(50706),s=r(22559),o=r(8994),i=function(){function e(){var t;(0,n.default)(this,e),(0,s.default)(this,"index",0),this.history=[],this.listeners=(t=[],{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}})}return(0,a.default)(e,[{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.history.splice(-e,e);this.index=this.history.length-1,this.listeners.call({action:"remove",payload:t}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}},{key:"push",value:function(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}},{key:"goBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.index-=e}},{key:"subscribe",value:function(e){return this.listeners.push(e)}},{key:"lastElement",get:function(){return this.history[this.history.length-1]||null}},{key:"currentElement",get:function(){return this.history[this.index]||null}}]),e}();var c=(0,a.default)((function e(){var t=this;(0,n.default)(this,e),(0,s.default)(this,"createGroup",(function(){var e=(0,o.nanoid)(),r={id:e,group:[]};return t.system.groups.set(e,r),r})),(0,s.default)(this,"createModal",(function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=t.system.groups.get(e);if(!a)throw Error("Нет такого стека");var s=n||(0,o.nanoid)();return a.group.push({id:s}),t.system.modals.set(s,{groupId:a.id,isSubModal:r}),s})),(0,s.default)(this,"getModalGroup",(function(e){var r=t.system.groups.get(e);if(!r)throw Error("Передан Id несуществующей модалки");return r})),(0,s.default)(this,"getModalParams",(function(e){var r=t.system.modals.get(e);if(!r)throw Error("Попытка получить несуществующую модалку");return r})),this.system={modals:new Map,groups:new Map}}));function u(e){return e}},63843:(e,t,r)=>{"use strict";r.d(t,{Uploader:()=>y});var n=r(80312),a=r(67846),s=r(25155),o=r(50706),i=r(22559),c=r(43883),u=r.n(c),l=r(9669),d=r.n(l),p=r(3460),f=r(21705),h=r(90831),v=function(e){return"video"===e.kind},m=function(e){return"audio"===e.kind},g=function(e){return"doc"===e.kind},y=function(){function e(t){var r=this;(0,s.default)(this,e),(0,i.default)(this,"emitter",new b),(0,i.default)(this,"requestTimeout",0),(0,i.default)(this,"freeResources",5),(0,i.default)(this,"waiting",[]),(0,i.default)(this,"lock",(function(){return 0!==r.freeResources&&(r.freeResources=Math.max(r.freeResources-1,0),!0)})),(0,i.default)(this,"release",(function(){setTimeout((function(){r.freeResources=Math.min(r.freeResources+1,5);var e=r.waiting.shift();e&&e()}),h.API_RATE_LIMIT_WINDOW+50)})),this.api=t}var t,r,n,c,l,y,w;return(0,o.default)(e,[{key:"uploadImage",value:(w=(0,a.default)(u().mark((function e(t,r){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.fetch("photos.getMessagesUploadServer",{peer_id:r.viewerId,group_id:r.groupId,upload_v2:0}).then((function(e){var r=e.upload_url,a=new FormData;return a.append("photo",t.file),n.uploadRequest(r,a,t.trackId,(function(e){var t=e.data,r=t.server,a=t.hash,s=t.photo;return n.api.fetch("photos.saveMessagesPhoto",{server:r,hash:a,photo:s}).then((function(e){if(0===e.length||void 0===e[0])throw new Error("Метод photos.saveMessagesPhoto не вернул фотографию");var t=(0,p.fromApiPhoto)(e[0]);if(void 0===t)throw new Error("Не удалось конвертировать фотографию с сервера");return t}))}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"uploadVideo",value:(y=(0,a.default)(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.fetch("video.save",{target:"messages",preview:1,no_comments:1}).then((function(e){var n=e.upload_url;if(e.access_key,e.owner_id,e.video_id,!n)throw new Error("В методе video.save не вернулся upload_url");var a=new FormData;return a.append("video_file",t.file),r.uploadRequest(n,a,t.trackId,(function(e){var t=e.data,r=t.video_id,n=t.owner_id;return Promise.resolve({kind:"Video",id:r,ownerId:n,image:[{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjYGBg+A8AAQQBAHAgZQsAAAAASUVORK5CYII=",width:1,height:1}],views:0})}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"uploadAudio",value:(l=(0,a.default)(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.fetch("audio.getUploadServer",{}).then((function(e){var n=e.upload_url,a=new FormData;return a.append("file",t.file),r.uploadRequest(n,a,t.trackId,(function(e){var t=e.data,n=t.server,a=t.audio,s=t.hash;return r.api.fetch("audio.save",{server:n,audio:a,hash:s}).then((function(e){return(0,p.fromApiAudio)(e)}))}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"uploadDoc",value:(c=(0,a.default)(u().mark((function e(t,r){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.fetch("docs.getMessagesUploadServer",{type:"doc",peer_id:r.targetPeerId}).then((function(e){var r=e.upload_url,a=new FormData;return a.append("file",t.file),n.uploadRequest(r,a,t.trackId,(function(e){var t=e.data.file;return n.api.fetch("docs.save",{file:t}).then((function(e){if(!e.doc)throw new Error("Метод doc.save не вернул документ");var t=(0,p.fromApiDoc)(e.doc);if(!t)throw new Error("Не удалось конвертировать документ (нет поля url)");return t}))}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"uploadVoice",value:(n=(0,a.default)(u().mark((function t(r,n){var a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.fetch("docs.getMessagesUploadServer",{type:"audio_message",peer_id:n.targetPeerId}).then((function(t){var n=t.upload_url,s=e.resolveTrackId("voice",e.hash()),o=new FormData;return o.append("file",r.file),a.uploadRequest(n,o,s,(function(e){var t=e.data.file;return a.api.fetch("docs.save",{file:t}).then((function(e){if(!e.audio_message)throw new Error("Метод doc.save не вернул аудиосообщение");return(0,p.fromApiVoice)(e.audio_message,!1)}))}))})));case 1:case"end":return t.stop()}}),t,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"uploadChatPhoto",value:(r=(0,a.default)(u().mark((function e(t,r,n){var a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.fetch("photos.getChatUploadServer",{chat_id:r.targetPeerId-2e9,crop_x:n.x,crop_y:n.y,crop_width:n.width}).then((function(e){var n=e.upload_url,s=new FormData;return s.append("photo",t.file),a.uploadRequest(n,s,t.trackId,(function(e){var t=e.data.response;return a.api.fetch("messages.setChatPhoto",{file:t,user_id:r.viewerId}).then((function(){}))}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"upload",value:(t=(0,a.default)(u().mark((function e(t,r){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.reduce((function(e,t){return"image"===t.kind&&e.push(n.uploadImage(t,r)),v(t)&&e.push(n.uploadVideo(t)),m(t)&&e.push(n.uploadAudio(t)),g(t)&&e.push(n.uploadDoc(t,r)),e}),[])));case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"uploadRequest",value:function(e,t,r,n){var a=this,s=r,o=new AbortController,i=function(){return d().post(e,t,{signal:o.signal,timeout:a.requestTimeout,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){a.emitter.emit(s,{loaded:e.loaded,total:e.total})}}).then((function(e){return a.emitter.removeAllListeners(s),n(e)})).then((function(e){return a.release(),e})).catch((function(e){return a.release(),Promise.reject(e)}))};return this.lock()?{abort:function(){return o.abort()},trackId:r,response:i()}:{abort:function(){return o.abort()},trackId:r,response:new Promise((function(e,t){a.waiting.push((function(){return i().then(e).catch(t)}))}))}}},{key:"trackProgress",value:function(e,t){this.emitter.addListener(e,t)}}],[{key:"hash",value:function(){return Math.floor(1e8*Math.random()+1e8).toString(16)}},{key:"resolveTrackId",value:function(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в Uploader.resolveTrackId");return"".concat(e,"-").concat(t)}},{key:"toFileInfo",value:function(t,r){switch(r){case"image":return{kind:"image",trackId:e.resolveTrackId("image",e.hash()),file:t};case"video":return{kind:"video",trackId:e.resolveTrackId("video",e.hash()),file:t};case"audio":return{kind:"audio",trackId:e.resolveTrackId("audio",e.hash()),file:t};case"doc":return{kind:"doc",trackId:e.resolveTrackId("doc",e.hash()),file:t};case"voice":return{kind:"voice",trackId:e.resolveTrackId("voice",e.hash()),file:t};case"chat-photo":return{kind:"chat-photo",trackId:e.resolveTrackId("chat-photo",e.hash()),file:t};default:(0,f.exhaustivenessCheck)(r)}}}]),e}(),b=function(){function e(){(0,s.default)(this,e),(0,i.default)(this,"map",new Map)}return(0,o.default)(e,[{key:"addListener",value:function(e,t){this.map.set(e,[].concat((0,n.default)(this.map.get(e)||[]),[t]))}},{key:"removeListener",value:function(e,t){var r=this.map.get(e);r&&r.length>0&&this.map.set(e,r.filter((function(e){return e!==t})))}},{key:"removeAllListeners",value:function(e){this.map.delete(e)}},{key:"emit",value:function(e,t){var r;null===(r=this.map.get(e))||void 0===r||r.forEach((function(e){return e(t)}))}}]),e}()},53752:(e,t,r)=>{"use strict";r.d(t,{IMPORTANT_USERS_COUNT:()=>u,handler:()=>l});var n=r(67846),a=r(43883),s=r.n(a),o=r(21705),i=r(37021),c=r(89032),u=10,l=function(e,t,r){switch(t.type){case"LoadImportantUsers":if(e.locks.getImportantUsers||null!==e.importantUsers)return[];e.locks.getImportantUsers=!0;var a=(0,i.getOwnerGroupId)(e.ownerId);return[function(){var e=(0,n.default)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,t.logger,e.prev=1,e.next=4,r.fetch("messages.searchConversations",{q:" ",count:u,group_id:a},{retries:2});case 4:return n=e.sent,e.abrupt("return",{type:"LoadImportantUsers_RequestCompleted",hasFailed:!1,response:n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"LoadImportantUsers_RequestCompleted",hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"LoadImportantUsers_RequestCompleted":if(e.locks.getImportantUsers=!1,t.hasFailed)return[];var l=t.response,d=l.profiles,p=l.groups,f=l.items,h=l.contacts;(0,i.insertConvos)(e,f),(0,i.insertPeers)(e,{apiUsers:d||[],apiGroups:p||[],apiContacts:h||[]});var v=f.reduce((function(e,t){var r=(0,c.fromApiConvo)(t);return r&&e.add(r.convo.peerId),e}),new Set);return e.importantUsers=v,[];default:(0,o.exhaustivenessCheck)(t)}}},60082:(e,t,r)=>{"use strict";r.d(t,{handler:()=>f,getCommentsHistoryLockKey:()=>h});var n=r(67846),a=r(43883),s=r.n(a),o=r(21705),i=r(16352),c=r(30966),u=r(51766),l=r(37021),d=r(90831),p=r(10454),f=function(e,t){switch(t.type){case"UserLoadedCommentsHistory":var r=t.channelId,a=t.postCmid,f=t.startCmid,v=t.commentCmid,m=t.order,g=h(r,a,v);if(e.locks.getPostCommentsHistory.has(g))return[];e.locks.getPostCommentsHistory.add(g);var y=e.channels.get(r);if(!y)return[];var b,w=i.findPostByCmid(y,a);if(!w||"Normal"!==w.kind)return[];if(v&&!c.findCommentByCmid(w,v))return[];switch(m){case"interesting":b="smart";break;case"new":b="desc";break;case"old":b="asc";break;default:(0,o.exhaustivenessCheck)(m)}return[function(){var e=(0,n.default)(s().mark((function e(t){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.api,e.prev=1,e.next=4,n.fetch("wall.getComments",{owner_id:r,post_id:a,count:d.COMMENTS_PER_PAGE,sort:b,thread_items_count:d.THREAD_COMMENTS_COUNT,need_likes:1,extended:1,start_comment_id:f,comment_id:v||void 0,offset:f?1:0});case 4:return o=e.sent,e.abrupt("return",{type:"UserLoadedCommentsHistory_RequestSucceed",channelId:r,response:o,postCmid:a,order:m,commentCmid:v});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserLoadedCommentsHistory_RequestFailed",channelId:r,postCmid:a,commentCmid:v,hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserLoadedCommentsHistory_RequestSucceed":var k=t.response,C=t.channelId,_=t.postCmid,I=t.commentCmid,S=t.order;e.locks.getPostCommentsHistory.delete(h(C,_,I));var O=e.channels.get(C);if(!O)return[];var x=i.findPostByCmid(O,_);if(!x||"Normal"!==x.kind)return[];var E=k.items.map((function(e){return(0,p.fromApiComment)(e)}));if(S!==x.comments.order&&c.changeCommentsOrder(x,S),I){var R=c.findCommentByCmid(x,I);if(!R)return[];u.insertReplies(R,E)}else c.insertComments(x,E,k.current_level_count||0);return(0,l.insertPeers)(e,{apiUsers:k.profiles||[],apiGroups:k.groups||[],apiContacts:[]}),[];case"UserLoadedCommentsHistory_RequestFailed":var A=t.channelId,M=t.postCmid,P=t.commentCmid;return e.locks.getPostCommentsHistory.delete(h(A,M,P)),[];default:return(0,o.exhaustivenessCheck)(t)}},h=function(e,t,r){return"".concat(e,"-").concat(t,"-").concat(r||"")}},82481:(e,t,r)=>{"use strict";r.d(t,{createStore:()=>pt});var n=r(56568);function a(){return"undefined"!=typeof window&&"__REDUX_DEVTOOLS_EXTENSION__"in window?window.__REDUX_DEVTOOLS_EXTENSION__.connect({serialize:{options:{map:!0,set:!0}}}):null}var s=r(21705),o=r(22559),i=r(80312),c=r(67846),u=r(43883),l=r.n(u),d=r(10746),p=r(37021),f=r(27119),h=r(52229),v=r(60202),m=r(82597),g=r(9727),y=r(14432),b=r(80662),w=r(89018),k=r(16352),C=r(30966),_=r(33600),I=r(4850),S=r(90831);function O(e){var t,r;return{id:y.resolveRealId("User",e.id),profileType:x(e.profile_type),firstName:null!==(t=e.first_name)&&void 0!==t?t:"",lastName:null!==(r=e.last_name)&&void 0!==r?r:"",photo:e.photo_100}}function x(e){var t;return null!==(t={0:"normal",2:"edu"}[null!=e?e:0])&&void 0!==t?t:"normal"}var E=r(51225),R=function e(t,r,n){switch(r.type){case"StickersAddToFavorite":var a=r.stickerId;return t.stickers.has(a)?(t.favoriteStickers=[].concat((0,i.default)(t.favoriteStickers.filter((function(e){return e!==a}))),[a]),[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("store.addStickersToFavorite",{sticker_ids:"".concat(a)});case 4:return n=e.sent,e.abrupt("return",{type:"StickersAddToFavorite__RequestCompleted",stickerId:a,hasFailed:!Boolean(n)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"StickersAddToFavorite__RequestCompleted",stickerId:a,hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]):[];case"StickersAddToFavorite__RequestCompleted":var o=r.stickerId;return r.hasFailed&&e(t,{type:"StickersRemoveFromFavorite",stickerId:o},n),[];case"StickersRemoveFromFavorite":var u=r.stickerId;return t.stickers.has(u)?(t.favoriteStickers=t.favoriteStickers.filter((function(e){return e!==u})),[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("store.removeStickersFromFavorite",{sticker_ids:"".concat(u)});case 4:return n=e.sent,e.abrupt("return",{type:"StickersRemoveFromFavorite__RequestCompleted",stickerId:u,hasFailed:!Boolean(n)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"StickersRemoveFromFavorite__RequestCompleted",stickerId:u,hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]):[];case"StickersRemoveFromFavorite__RequestCompleted":var d=r.stickerId;return r.hasFailed&&e(t,{type:"StickersAddToFavorite",stickerId:d},n),[];case"StickerAddToRecent":var p=r.stickerId;return t.recentStickers=[p].concat((0,i.default)(t.recentStickers.filter((function(e){return e!==p})))).slice(0,32),[];default:return(0,s.exhaustivenessCheck)(r)}};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function e(t,r,a){switch(r.type){case"UserHitSend":var o=r.peerId,c=t.convos.get(o);return c?(g.clearAfterGap(c),function(e,t){for(var r=e.text,a=e.attaches,s=e.peerId,o=e.timestamp,i=e.expireTTL,c=e.deleteTTL,u=e.entrypoint,l=e.extra,d=e.reply,p=e.forwarded,f=function(e){var t=e.length;if(t<S.MAX_MESSAGE_SIZE)return[e];for(var r=[],n=0,a=0;a<Math.ceil(t/S.MAX_MESSAGE_SIZE);a++){var s=e.substring(n,n+S.MAX_MESSAGE_SIZE).lastIndexOf(" "),o=-1===s?S.MAX_MESSAGE_SIZE:s,i=t-n<=S.MAX_MESSAGE_SIZE?e.substring(n):e.substring(n,n+o);n+=i.length,r.push(i)}return r.map((function(e){return e.trim()}))}(r),h=function(e){var t=Object.values(e).flat(),r=Object.fromEntries(Object.entries(e).map((function(e){var t=(0,n.default)(e,2),r=t[0],a=t[1];return Array.isArray(a)?[a[0].kind,r]:[a.kind,r]})));if(t.length<=S.MAX_MESSAGE_ATTACHES)return[e];return t.reduce((function(e,t,n){var a,s=Math.floor(n/S.MAX_MESSAGE_ATTACHES),o=r[t.kind];return o?(e[s][o]=(null===(a=e[s][o])||void 0===a?void 0:a.concat(t))||[t],e):e}),Array(Math.ceil(t.length/S.MAX_MESSAGE_ATTACHES)).fill("").map(Object))}(a),v=f.length+h.length-1,m=[],g=0;g<v;g++){var y=f[g]||"",w=h[g-f.length+1]||{},k=b.newQueued({peerId:s,text:y,isOut:!0,sentAt:o+g,authorId:t,attaches:w,expireTTL:i,deleteTTL:c,extra:l,entrypoint:u},0===g?d:void 0,g===v-1?p:void 0);m.push(k)}return m}(r,t.ownerId).flatMap((function(e){var r,n;g.appendQueuedMessage(c,e);var a=t.locks.sendQueue.get(c.peerId);return a?(a.add(e.randomId),[]):(t.locks.sendQueue.set(c.peerId,new Set([e.randomId])),e.attaches.sticker&&(t.recentStickers=[e.attaches.sticker.id].concat((0,i.default)(t.recentStickers.filter((function(t){var r;return t!==(null===(r=e.attaches.sticker)||void 0===r?void 0:r.id)})))).slice(0,32)),[U(e.peerId,e.randomId,e.text,E.ids(e.attaches),e.extra,e.entrypoint,e.attaches.geo,(0,p.getOwnerGroupId)(t.ownerId),null===(r=e.replyMessage)||void 0===r?void 0:r.id,null===(n=e.forwardedMessages)||void 0===n?void 0:n.map((function(e){return e.id})))])}))):[];case"UserHitSend_RequestCompleted":var u,l,f=r.peerId,h=r.randomId,v=r.hasFailed,m=t.convos.get(f),y=t.ownerId;if(!m)return t.locks.sendQueue.delete(f),[];v&&g.updateSendingFail(m,h,v);var w=t.locks.sendQueue.get(m.peerId);if(!w)return[];w.delete(h);var k=(0,i.default)(w)[0];if(!k)return t.locks.sendQueue.delete(f),[];var C=m.queued.get(k);if(!C)return[];var _=(0,d.current)(C);return[U(f,_.randomId,_.text,E.ids(_.attaches),_.extra,_.entrypoint,_.attaches.geo,(0,p.getOwnerGroupId)(y),null===(u=_.replyMessage)||void 0===u?void 0:u.id,null===(l=_.forwardedMessages)||void 0===l?void 0:l.map((function(e){return e.id})))];case"UserHitResendFailedMessage":var I=r.randomId,O=r.peerId,x=r.entrypoint,R=t.convos.get(O),A=t.ownerId;if(!R)return[];var M=R.queued.get(I);if(!M)return[];g.updateSendingFail(R,I,!1),g.changeQueuedMessageEntrypoint(R,I,x);var P=t.locks.sendQueue.get(R.peerId);if(P)return P.add(M.randomId),[];t.locks.sendQueue.set(R.peerId,new Set([M.randomId]));var j=(0,d.current)(M);return[U(O,j.randomId,j.text,E.ids(j.attaches),j.extra,x,j.attaches.geo,(0,p.getOwnerGroupId)(A))];case"UserHitResendAllFailedMessages":var F=r.peerId,T=r.entrypoint,N=t.convos.get(F);return N?g.allQueuedMessages(N).filter((function(e){return e.hasFailed})).flatMap((function(r){return e(t,{type:"UserHitResendFailedMessage",peerId:F,randomId:r.randomId,entrypoint:T||r.entrypoint},a)})):[];case"ResendAllFailedMessages":return Array.from(t.convos.values()).flatMap((function(r){return e(t,{type:"UserHitResendAllFailedMessages",peerId:r.peerId},a)}));default:return(0,s.exhaustivenessCheck)(r)}};function U(e,t,r,n,a,s,o,i,u,d){return function(){var p=(0,c.default)(l().mark((function c(p){var f,h,v;return l().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return f=p.api,h=!1,v={},a.sticker&&(v.sticker_id=a.sticker.id,v.sticker_referrer=a.sticker.referrer),a.botPayload&&(v.payload=a.botPayload),o&&(v.lat=o.coordinates.latitude,v.long=o.coordinates.longitude),c.prev=6,c.next=9,f.fetch("messages.send",M(M({},v),{},{peer_id:e,random_id:t,message:r,reply_to:u,forward_messages:null==d?void 0:d.join(","),attachment:0===n.length?void 0:n.join(","),entrypoint:s,group_id:i}));case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(6),h=!0;case 14:return c.abrupt("return",{type:"UserHitSend_RequestCompleted",peerId:e,randomId:t,hasFailed:h});case 15:case"end":return c.stop()}}),c,null,[[6,11]])})));return function(e){return p.apply(this,arguments)}}()}function j(e){return function(){var t=(0,c.default)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.sleep)(300);case 2:return t.abrupt("return",{type:"UserSeenMessage_ThrottleTimedOut",peerId:e});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}var F=r(96543),T=r(78399);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function e(t,r,a){switch(r.type){case"LoadChatMembers":return[];case"UserOpenedConvo":var o=r.peerId,i=r.cmid,u=t.convos.get(o),d=t.locks.convosCleanup.get(o)||0;t.locks.convosCleanup.set(o,d+1);var h=(0,p.getOwnerGroupId)(t.ownerId);return u?e(t,{type:"UserOpenedConvo_ConvoRequestCompleted",peerId:o,cmid:i,hasFailed:!1},a):[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.getConversationsById",{peer_ids:o.toString(),group_id:h},{retries:3});case 4:return n=e.sent,e.abrupt("return",{type:"UserOpenedConvo_ConvoRequestCompleted",peerId:o,cmid:i,hasFailed:!1,profiles:n.profiles,groups:n.groups,conversations:n.items,contacts:n.contacts});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserOpenedConvo_ConvoRequestCompleted",peerId:o,hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserOpenedConvo_ConvoRequestCompleted":var v=r.peerId,m=r.conversations,b=r.profiles,w=r.cmid,k=r.groups,C=r.contacts;if(r.hasFailed){if(s.isDev)throw new Error("Не удалось загрузить диалог");return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.router.replace({kind:"MainRoute"}),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(0,p.insertConvos)(t,m||[]),(0,p.insertPeers)(t,{apiUsers:b||[],apiGroups:k||[],apiContacts:C||[]});var _=t.convos.get(v);if(!_){if(s.isDev)throw new Error("Диалог не был найден");return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.router.replace({kind:"MainRoute"}),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}var I=void 0!==w,O=_.isMarkedUnread&&0===_.unreadCount;O&&g.markRead(_),f.refresh(t.organisers,_);var x="ChatConvo"===_.kind&&void 0===_.members&&g.canReadMembers(_)&&!t.locks.getConversationMembers.has(v);x&&t.locks.getConversationMembers.add(v);var E=I||g.length(_).persisted<S.MESSAGES_PER_PAGE&&_.hasMore&&!t.locks.getHistory.has(_.peerId);E&&t.locks.getHistory.add(_.peerId);var R=Object.values(a.me_sticker_packs).flat(),A=_.unreadCount>0,M=!t.locks.getStickerPacks;M&&(t.locks.getStickerPacks=!0);var P=(0,p.getOwnerGroupId)(t.ownerId);return[x&&y.isChatPeerId(v)&&function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"LoadChatMembers",peerId:v});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M&&function(){var e=(0,c.default)(l().mark((function e(t){var r,a,s,o,i,c,u,d,p,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,a=t.storage,e.prev=1,s={"store.getFavoriteStickers":{},"messages.getRecentStickers":{group_id:P}},o={retries:10},e.next=6,Promise.all([r.fetch("store.getProducts",{type:"stickers",filters:"active",extended:1},o),L({api:r,storage:a})]);case 6:if(u=e.sent,d=(0,n.default)(u,2),p=d[0],f=d[1],!R.length){e.next=17;break}return e.next=13,r.fetchMany(q(q({},s),{},{"store.getStickers":{sticker_ids:R.join()}}),o);case 13:i=e.sent,c=i["store.getStickers"],e.next=20;break;case 17:return e.next=19,r.fetchMany(s,o);case 19:i=e.sent;case 20:return e.abrupt("return",{type:"UserOpenedConvo_StickersLoadRequestSucceed",favoriteStickersResponse:i["store.getFavoriteStickers"],recentStickersResponse:i["messages.getRecentStickers"],stickerPacksResponse:p,helloStickersResponse:c,stickersKeywordsResponse:f});case 23:return e.prev=23,e.t0=e.catch(1),e.abrupt("return",{type:"UserOpenedConvo_StickersLoadRequestFailed"});case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}(),O&&function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.markAsRead",{peer_id:v,mark_conversation_as_read:1,group_id:P});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",{type:"Noop"});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),E&&function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.api,e.t0=!0,e.next=e.t0===I?4:e.t0===A?7:10;break;case 4:return n=S.MESSAGES_PER_PAGE,a=-(Math.floor(S.MESSAGES_PER_PAGE/2)-1),e.abrupt("break",12);case 7:return n=Math.floor(1.25*S.MESSAGES_PER_PAGE),a=-S.MESSAGES_PER_PAGE,e.abrupt("break",12);case 10:n=S.MESSAGES_PER_PAGE,a=0;case 12:return e.prev=12,e.next=15,r.fetch("messages.getHistory",{peer_id:v,start_cmid:I?w:-1,count:n,offset:a,group_id:P},{retries:5});case 15:return s=e.sent,e.abrupt("return",{type:"UserOpenedConvo_HistoryRequestSucceed",peerId:v,hasMore:I||s.items.length>=n+a,response:s});case 19:return e.prev=19,e.t1=e.catch(12),e.abrupt("return",{type:"UserOpenedConvo_HistoryRequestFailed",peerId:v});case 22:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(t){return e.apply(this,arguments)}}()];case"UserClosedConvo":if((d=t.locks.convosCleanup.get(r.peerId))&&d>1)return t.locks.convosCleanup.set(r.peerId,d-1),[];t.locks.convosCleanup.delete(r.peerId);var U=t.convos.get(r.peerId);return U?(g.cleanup(U),[]):[];case"UserOpenedConvo_HistoryRequestSucceed":var j=r.peerId,N=r.response,D=r.hasMore;t.locks.getHistory.delete(j);var H=t.convos.get(j);if(!H)return[];var B=N.items.map((function(e){return(0,F.fromApiMessage)(e).message}));return g.insertMessages(H,B,D),(0,p.insertPeers)(t,{apiUsers:N.profiles||[],apiGroups:N.groups||[],apiContacts:[]}),[];case"UserOpenedConvo_HistoryRequestFailed":return t.locks.getHistory.delete(r.peerId),[];case"UserOpenedConvo_StickersLoadRequestSucceed":var z,G,W,V=r.stickerPacksResponse,$=r.helloStickersResponse,K=r.favoriteStickersResponse,Q=r.recentStickersResponse,X=r.stickersKeywordsResponse,J=new Map;null===(z=V.items)||void 0===z||z.forEach((function(e){var r=(0,T.fromApiStickerPack)(e);if(r){var n=r.stickerPack,a=r.stickers;J.set(n.id,n),a.forEach((function(e){t.stickers.set(e.id,e)}))}})),t.stickerPacks=J,t.stickersKeywords=(0,T.fromApiStickersKeywords)(X);var Y=function(e){var r=(0,T.fromApiSticker)(e);if(r)return t.stickers.set(r.id,r),r.id};return null==$||$.forEach(Y),t.favoriteStickers=[],null===(G=K.items)||void 0===G||G.forEach((function(e){var r=Y(e);r&&t.favoriteStickers.push(r)})),t.recentStickers=[],null===(W=Q.items)||void 0===W||W.forEach((function(e){var r=Y(e);r&&t.recentStickers.push(r)})),[function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.sleep)(S.STICKERS_REFRESH_INTERVAL);case 2:return e.abrupt("return",{type:"UserOpenedConvo_StickersRefreshThrottleTimedOut"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()];case"UserOpenedConvo_StickersRefreshThrottleTimedOut":case"UserOpenedConvo_StickersLoadRequestFailed":return t.locks.getStickerPacks=!1,[];default:return(0,s.exhaustivenessCheck)(r)}};function L(e){return H.apply(this,arguments)}function H(){return(H=(0,c.default)(l().mark((function e(t){var r,n,a,s,o,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,n=t.storage,e.next=3,n.getIDB("stickers-keywords");case 3:if(a=e.sent,s=Math.round((new Date).getTime()/1e3),o=86400,!(i=a&&a.expiresAt>s)){e.next=11;break}e.t0=a.response,e.next=14;break;case 11:return e.next=13,r.fetch("store.getStickersKeywords",{need_stickers:0,all_products:0},{retries:3});case 13:e.t0=e.sent;case 14:return c=e.t0,i||n.setIDB("stickers-keywords",{response:c,expiresAt:s+o}),e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=r(93209),z=r(81385),G=r(89032),W=r(83906),V=r(90917);function $(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e,t,r){if(!r)throw new Error("feature flags not passed");switch(t.type){case"EngineBatchReceived":var n=t.variant;switch(n.kind){case"FromEngine":return Y(r,e,n);case"FromEngineWithMissingData":return function(e,t,r){var n=r.apiConvos,a=r.apiMessages,s=r.apiUsers,o=r.apiGroups,i=r.apiContacts,c=ee(a,n);return(0,p.insertConvos)(t,n.map((function(e){return{conversation:e,last_message:c.messages_legacy.get(e.last_message_id)}})),{dangerouslyMerge:!0}),(0,p.insertPeers)(t,{apiUsers:s,apiGroups:o,apiContacts:i}),Y(e,t,{kind:"FromEngine",next:r.skippedBatch},c)}(r,e,n);case"FromApiEngineHistory":return function(e,t,r){var n=r.next,a=r.apiMessages,s=r.apiConvos,o=r.apiUsers,i=r.apiGroups,c=r.apiContacts,u=ee(a,s);return(0,p.insertConvos)(t,s.map((function(e){return{conversation:e,last_message:u.messages_legacy.get(e.last_message_id)}})),{dangerouslyMerge:!0}),(0,p.insertPeers)(t,{apiUsers:o,apiGroups:i,apiContacts:c},{dangerouslyOverwrite:!0}),Y(e,t,{kind:"FromEngine",next:n},u)}(r,e,n);default:return(0,s.exhaustivenessCheck)(n)}case"EngineBatchReceived_TypingsTimedOut":var a=t.peerId,o=t.typingType,i=t.timestamp,c=e.typings.get(a);if(!c)return[];var u=c[o];return u?(u.updatedAt<=i&&delete c[o],0===Object.keys(c).length&&e.typings.delete(a),[]):[];case"TemporaryHackForResync":case"UpdateMessageRequestsCounter":case"LoadChatMembers":case"UpdateComposerDraftOnMessageDelete":return[];default:return(0,s.exhaustivenessCheck)(t)}};function Y(e,t,r,a){var u=r.next;if("Failure"===u.kind){t.convoConn.status="resyncing";var d=t.convoConn.pts,m=t.ownerId;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.api,a=t.engine,o=t.queue,e.next=3,(0,s.sleep)(1e3);case 3:return e.prev=3,e.next=6,n.fetch("messages.getLongPollHistory",{lp_version:a.version,credentials:1,pts:d,msgs_limit:1100,events_limit:1100,last_n:1e3,group_id:(0,p.getOwnerGroupId)(m)},{retries:1/0});case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",{type:"Noop"});case 12:if(!(d<(i.from_pts||0))){e.next=15;break}return o.disconnect(),e.abrupt("return",{type:"TemporaryHackForResync"});case 15:if(i.credentials&&i.credentials.pts){e.next=17;break}throw new Error("В ответе getLongPollHistory отсутствуют новые креды!");case 17:return e.next=19,a.connect(X(X({},i.credentials),{},{pts:i.credentials.pts}));case 19:return e.abrupt("return",{type:"EngineBatchReceived",variant:{kind:"FromApiEngineHistory",apiMessages:(null===(r=i.messages)||void 0===r?void 0:r.items)||[],apiConvos:i.conversations||[],apiUsers:i.profiles||[],apiGroups:i.groups||[],apiContacts:i.contacts||[],next:{kind:"Batch",pts:i.credentials.pts,ts:i.credentials.ts,updates:i.history||[]}}});case 20:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()]}if(!(void 0!==a)&&function(e,t){var r,a=$(t.updates);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(z.IEngine.isIncompleteUpdate(s))return!0;switch(s[0]){case 20:case 21:var o=(0,n.default)(s,2)[1],i=y.resolveId(o);if(!e.convos.has(i))return!0;break;case 52:var c=(0,n.default)(s,4),u=c[1],l=c[2],d=c[3],p=y.resolveId(l),f=e.convos.get(p);if(!f)break;switch(u){case z.IEngine.ChatUpdateType.TitleChanged:case z.IEngine.ChatUpdateType.AvatarChanged:case z.IEngine.ChatUpdateType.BannerChanged:case z.IEngine.ChatUpdateType.MessageRequestChanged:case z.IEngine.ChatUpdateType.MessageRequestCanceled:case z.IEngine.ChatUpdateType.MessageRequestAccepted:case z.IEngine.ChatUpdateType.MessageRequestRejected:return!0;case z.IEngine.ChatUpdateType.UserJoined:case z.IEngine.ChatUpdateType.UserLeft:case z.IEngine.ChatUpdateType.UserKicked:var h=y.resolveId(d);if(!e.peers.has(h))return!0;if(u===z.IEngine.ChatUpdateType.UserJoined&&h===e.ownerId)return!0;break;case z.IEngine.ChatUpdateType.Pinned:var v=(0,n.default)(s,4)[3];if(0===v)break;var m=b.resolveCmid(v);return!f.persisted.has(m);case z.IEngine.ChatUpdateType.CallInProgressChanged:case z.IEngine.ChatUpdateType.ContactConverted:case z.IEngine.ChatUpdateType.ContactJoined:return!0;case z.IEngine.ChatUpdateType.CopyFlagChanged:case z.IEngine.ChatUpdateType.AdminGrated:case z.IEngine.ChatUpdateType.FlagsChanged:case z.IEngine.ChatUpdateType.AdminKicked:case z.IEngine.ChatUpdateType.KeyboardChanged:case z.IEngine.ChatUpdateType.BusinessNotifyDataChanged:case z.IEngine.ChatUpdateType.DonUnsubscribed:case z.IEngine.ChatUpdateType.DonSubscribed:case z.IEngine.ChatUpdateType.IsNewChange:case z.IEngine.ChatUpdateType.StyleChanged:break;default:}break;case 10013:var g=(0,n.default)(s,2)[1],w=y.resolveId(g);return e.convos.has(w);case 63:case 64:case 65:case 66:case 67:case 1:case 2:case 3:case 6:case 7:case 10:case 11:case 12:case 80:case 114:case 115:case 119:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 508:case 10001:case 10002:case 10006:case 10007:break;case 10003:var k=(0,n.default)(s,4),C=k[2],_=k[3];if(z.IEngine.isIncompleteUpdate(s))break;var I=y.resolveId(_),S=e.convos.get(I);if(!S)break;var O=b.convertFlags(C),x=O.isDeleted,E=O.isSpam;if((x||E)&&S)return!0;break;case 4:case 10004:var R=(0,n.default)(s,9),A=R[4],M=R[7],P=R[8],U=y.resolveId(A),j=e.convos.get(U);if(!j)return!0;var T=te(j);if(re(P,T))return!0;if(M.has_template)return!0;var N=(0,F.fromEngineMessage)(s,e.ownerId,T).message;if(!e.peers.has(N.peerId)||!e.peers.has(N.authorId))return!0;break;case 5:case 18:case 10005:case 10018:var q=(0,n.default)(s,8),D=q[3],L=q[7],H=y.resolveId(D),B=e.convos.get(H);if(!B)break;if(re(L,te(B)))return!0;break;case 19:case 10019:return!0;default:}}}catch(e){a.e(e)}finally{a.f()}return!1}(t,u))return[Z(t.convoConn.pts,u,t.ownerId)];t.convoConn.status="running",t.convoConn.pts=u.pts;var w=u.updates.flatMap((function(e){switch(e[0]){case 1:case 2:case 3:return function(e,t,r){var a=(0,n.default)(t,4),s=a[0],o=a[1],i=a[2],c=a[3],u=y.resolveId(c),l=b.resolveId(o),d=e.convos.get(u);if(!d)return[];var p=g.findMessageById(d,l);if(!p)return[];return ne(e,[{1:10001,2:10002,3:10003}[s],p.cmid,i,c])}(t,e);case 4:case 5:case 18:case 19:return function(e,t,r){var a,o=(0,n.default)(t,2)[1],i=null==r?void 0:r.messages_legacy.get(o);switch(t[0]){case 4:if(z.IEngine.isIncompleteUpdate(t)){if(!i)return[];var c=(0,n.default)(t,4),u=c[2],l=c[3];a=[10004,i.conversation_message_id,u,l,i.peer_id];break}var d=(0,n.default)(t,12),p=d[2],f=d[3],h=d[4],v=d[5],m=d[6],g=d[7],y=d[8],b=d[9];a=[10004,d[10],p,f,h,v,m,g,y,b,o,d[11]];break;case 5:if(z.IEngine.isIncompleteUpdate(t)){if(!i)return[];var w=(0,n.default)(t,3)[2];a=[10005,i.conversation_message_id,w,i.peer_id];break}var k=(0,n.default)(t,11),C=k[2],_=k[3],I=k[4],S=k[5],O=k[6],x=k[7],E=k[8];a=[10005,k[9],C,_,I,S,O,x,E,o,k[10]];break;case 18:if(z.IEngine.isIncompleteUpdate(t)){if(!i)return[];var R=(0,n.default)(t,3)[2];a=[10018,i.conversation_message_id,R,i.peer_id];break}var A=(0,n.default)(t,11),M=A[2],P=A[3],U=A[4],j=A[5],F=A[6],T=A[7],N=A[8];a=[10018,A[9],M,P,U,j,F,T,N,o,A[10]];break;case 19:if(!i)return[];a=[10019,i.conversation_message_id,i.peer_id];break;default:(0,s.exhaustivenessCheck)(t)}return ae(e,a,r)}(t,e,a);case 6:case 7:return function(e,t,r){var a,s=(0,n.default)(t,2),o=s[0],i=s[1],c=y.resolveId(i),u=e.convos.get(c);if(!u)return[];var l=null==r?void 0:r.convos.get(i),d=l&&(null===(a=(0,G.fromApiConvo)(l))||void 0===a?void 0:a.convo);if(!d)return[];return 6===o?g.readInUntil(u,d.inReadBy,d.unreadCount):g.readOutUntil(u,d.outReadBy),f.refresh(e.organisers,u),[]}(t,e,a);case 10:case 11:case 12:return function(e,t){var r=(0,n.default)(t,3),a=r[0],s=r[1],o=r[2],i=y.resolveId(s),c=e.convos.get(i);if(!c)return[];var u={10:"unset",11:"replace",12:"set"}[a];return g.updateFlags(c,u,o),f.refresh(e.organisers,c),[]}(t,e);case 20:return function(e,t){var r=(0,n.default)(t,3),a=r[1],s=r[2],o=y.resolveId(a),i=e.convos.get(o);if(!i)return[];return g.updateSortId(i,{majorSortId:s}),f.refresh(e.organisers,i),[]}(t,e);case 21:return function(e,t){var r=(0,n.default)(t,3),a=r[1],s=r[2],o=y.resolveId(a),i=e.convos.get(o);if(!i)return[];g.updateSortId(i,{minorSortId:s}),f.refresh(e.organisers,i);var u=s<=0,d=e.organisers.filters.messageRequest.totalCount>0;if(u&&d)return[(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"UpdateMessageRequestsCounter",peerId:o});case 1:case"end":return e.stop()}}),e)})))];return[]}(t,e);case 52:return function(e,t,r,a){var s=(0,n.default)(t,4),o=s[1],i=s[2],u=s[3],d=y.resolveId(i),p=e.convos.get(d);if(!p)return[];var h=null==a?void 0:a.convos.get(i),v=h&&(0,G.fromApiConvo)(h);switch(o){case z.IEngine.ChatUpdateType.CopyFlagChanged:case z.IEngine.ChatUpdateType.TitleChanged:case z.IEngine.ChatUpdateType.AvatarChanged:case z.IEngine.ChatUpdateType.FlagsChanged:return[];case z.IEngine.ChatUpdateType.Pinned:if("ChatConvo"!==p.kind)return[];var m=u,w=b.resolveCmid(m);if(e.hiddenPinnedMessages.delete(d),(null==v?void 0:v.convo.kind)===p.kind)return v.convo.pinnedMessage&&g.pinMessage(p,v.convo.pinnedMessage),[];if(0===w)g.unpinMessage(p);else{var k=p.persisted.get(w);"Normal"===(null==k?void 0:k.kind)&&g.pinMessage(p,b.toPinned(k))}return[];case z.IEngine.ChatUpdateType.ContactJoined:return[];case z.IEngine.ChatUpdateType.UserJoined:if("ChatConvo"!==p.kind)return[];var C=y.resolveId(u);if(!y.isUserPeerId(C)&&!y.isGroupPeerId(C))return[];var _={peerId:C,isAdmin:p.adminIds.has(C),canKick:p.adminIds.has(e.viewer.id),isMessageRequest:!1};return g.addMembers(p,[_]),C===e.ownerId?(g.changeUserState(p,"in"),g.allowWrite(p),[y.isChatPeerId(d)&&(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"LoadChatMembers",peerId:d});case 1:case"end":return e.stop()}}),e)})))]):[];case z.IEngine.ChatUpdateType.UserLeft:if("ChatConvo"!==p.kind)return[];var I=y.resolveId(u);return y.isUserPeerId(I)||y.isGroupPeerId(I)?(I===e.ownerId&&g.changeUserState(p,"left"),g.removeMember(p,I),[]):[];case z.IEngine.ChatUpdateType.UserKicked:if("ChatConvo"!==p.kind)return[];var S=y.resolveId(u);if(!y.isUserPeerId(S)&&!y.isGroupPeerId(S))break;S===e.ownerId&&(g.changeUserState(p,"kicked"),g.restrictWrite(p,"kicked")),g.removeMember(p,S);break;case z.IEngine.ChatUpdateType.KeyboardChanged:return[];case z.IEngine.ChatUpdateType.CallInProgressChanged:return"ChatConvo"===p.kind&&(null==v?void 0:v.convo.kind)===p.kind&&g.updateActiveCall(p,v.convo.activeCall),[];case z.IEngine.ChatUpdateType.IsNewChange:return g.updateIsNew(p,!!u),[];case z.IEngine.ChatUpdateType.MessageRequestChanged:var O=u;switch(O){case z.IEngine.MRStatus.Accepted:if("MessageRequestChatConvo"!==p.kind&&"MessageRequestUserConvo"!==p.kind||"pending"!==p.MRStatus){f.refresh(e.organisers,p);break}var x=g.fromAcceptedMessageRequest(p,null==v?void 0:v.convo);e.convos.set(d,x),f.refresh(e.organisers,x);break;case z.IEngine.MRStatus.New:var E;null!=v&&v.convo&&e.convos.set(d,null==v?void 0:v.convo),f.refresh(e.organisers,null!==(E=null==v?void 0:v.convo)&&void 0!==E?E:p);break;case z.IEngine.MRStatus.Deleted:if("MessageRequestChatConvo"!==p.kind&&"MessageRequestUserConvo"!==p.kind&&"UserConvo"!==p.kind)break;var R=g.fromCancelledMessageRequest(p);e.convos.set(d,R),f.refresh(e.organisers,R);break;case z.IEngine.MRStatus.Rejected:if(g.isRejectedMR(p)){f.refresh(e.organisers,p);break}if("MessageRequestChatConvo"!==p.kind&&"MessageRequestUserConvo"!==p.kind&&"UserConvo"!==p.kind)break;var A=g.fromRejectedMessageRequest(p);e.convos.set(d,A),f.refresh(e.organisers,A);break;default:}return[(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"UpdateMessageRequestsCounter",peerId:d});case 1:case"end":return e.stop()}}),e)})))];case z.IEngine.ChatUpdateType.AdminGrated:var M=y.resolveId(u);return"ChatConvo"!==p.kind||!y.isUserPeerId(M)&&!y.isGroupPeerId(M)||p.adminIds.add(M),[];case z.IEngine.ChatUpdateType.AdminKicked:var P=y.resolveId(u);return"ChatConvo"!==p.kind||!y.isUserPeerId(P)&&!y.isGroupPeerId(P)||p.adminIds.delete(P),[];case z.IEngine.ChatUpdateType.ContactConverted:var U=y.resolveId(u),j=e.convos.get(U),F=e.peers.get(U);return F&&j&&"Contact"===F.kind&&y.isUserPeerId(d)?(y.convertContact(F,d),g.updateSortId(j,{minorSortId:0}),[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.router,"ConvoRoute"===(n=r.currentRoute).kind&&n.peerId===U&&r.replace({kind:"ConvoRoute",entrypoint:"list_all",peerId:d}),e.abrupt("return",{type:"Noop"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]):[];case z.IEngine.ChatUpdateType.BannerChanged:return"UserConvo"!==p.kind||(null==v?void 0:v.convo.kind)!==p.kind||(p.convoBanner=null==v?void 0:v.convo.convoBanner),[];case z.IEngine.ChatUpdateType.BusinessNotifyDataChanged:case z.IEngine.ChatUpdateType.MessageRequestAccepted:case z.IEngine.ChatUpdateType.MessageRequestCanceled:case z.IEngine.ChatUpdateType.MessageRequestRejected:case z.IEngine.ChatUpdateType.DonSubscribed:case z.IEngine.ChatUpdateType.DonUnsubscribed:case z.IEngine.ChatUpdateType.StyleChanged:return[];default:}return[]}(t,e,0,a);case 63:case 64:case 65:case 66:case 67:return function(e,t){var r=(0,n.default)(t,5),a=r[0],i=r[1],u=r[2],d=r[3],p=r[4],f=y.resolveId(i),h=new Set(u.map((function(e){return y.resolveId(e)})));if(h.delete(e.viewer.id),!e.convos.get(f))return[];var v={63:"text",64:"voice",65:"photo",66:"video",67:"file"}[a],m=X(X({},e.typings.get(f)||{}),{},(0,o.default)({},v,{peerIds:h,updatedAt:p,totalCount:d}));return e.typings.set(f,m),[function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.sleep)(S.TYPING_EXPIRATION_TIME);case 2:return e.abrupt("return",{type:"EngineBatchReceived_TypingsTimedOut",peerId:f,typingType:v,timestamp:p});case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()]}(t,e);case 80:return function(e,t){var r=(0,n.default)(t,10),a=r[1],s=r[2],o=r[6],i=r[7],c=r[9];return h.updateCounters(e.organisers.filters,{unread:a,headerNotMutedUnread:o,unreadUnmuted:s,archive:i,archiveMentions:c}),[]}(t,e);case 114:return function(e,t){var r=(0,n.default)(t,2)[1].peer_id,a=y.resolveId(r),s=e.convos.get(a);if(!s)return[];var o=(0,G.fromLongpollPushSettings)(t);return g.updatePush(s,o),[]}(t,e);case 115:return function(e,t){var r=(0,n.default)(t,2)[1];return[function(){var e=(0,c.default)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=t.calls)||void 0===n||n.showIncomingCall(r),e.abrupt("return",{type:"Noop"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(0,e);case 119:return function(e,t){var r=(0,n.default)(t,2)[1],a=y.resolveId(r.peer_id),s=y.resolveId(r.owner_id),o=e.convos.get(a),i=e.peers.get(a),u=e.peers.get(s),d=o&&i&&u?(0,W.fromApiMessageEvent)(i,u,r):void 0;return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d&&t.botKeyboard.update(d),e.abrupt("return",{type:"Noop"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(t,e);case 501:return function(e,t){var r=(0,n.default)(t,3),a=r[1],s=r[2];return(0,p.insertFolders)(e,[{id:a,name:s}]),[]}(t,e);case 502:return function(e,t){var r=(0,n.default)(t,2)[1],a=v.resolveId(r);v.deleteFolder(e.organisers.folders,a);var s,o=$(e.convos.values());try{for(o.s();!(s=o.n()).done;){var i=s.value;g.removeFolder(i,a)}}catch(e){o.e(e)}finally{o.f()}return[]}(t,e);case 503:return function(e,t){var r=(0,n.default)(t,3),a=r[1],s=r[2],o=v.resolveId(a),i=e.organisers.folders.find((function(e){return e.id===o}));if(!i)return[];return v.setName(i,s),[]}(t,e);case 504:return function(e,t){var r=(0,B.default)(t),n=r[1],a=r.slice(2),s=v.resolveId(n),o=(0,p.getConvosByIds)(e,a);if(!e.organisers.folders.find((function(e){return e.id===s})))return[];return(0,p.addConvosToFolder)(e,s,o),[]}(t,e);case 505:return function(e,t){var r=(0,B.default)(t),n=r[1],a=r.slice(2),s=v.resolveId(n),o=(0,p.getConvosByIds)(e,a);if(!e.organisers.folders.find((function(e){return e.id===s})))return[];return(0,p.removeConvosFromFolder)(e,s,o),[]}(t,e);case 506:return function(e,t){var r=(0,B.default)(t).slice(1);return v.reorderFolders(e.organisers.folders,r.map((function(e){return v.resolveId(e)}))),[]}(t,e);case 507:return function(e,t){var r,n=$((0,B.default)(t).slice(1));try{for(n.s();!(r=n.n()).done;){var a=r.value;if(!(a.length<3)){var s=v.resolveId(a[0]);v.setUnreadCounters(e.organisers.folders,s,a[1],a[2])}}}catch(e){n.e(e)}finally{n.f()}return[]}(t,e);case 508:return function(e,t){var r=(0,n.default)(t,2)[1],a=v.resolveId(r),s=e.organisers.folders.find((function(e){return e.id===a}));if(!s)return[];return v.replaceFolder(e.organisers.folders,(0,V.fromApiFolder)({id:a,name:s.name})),[]}(t,e);case 10001:case 10002:case 10003:return ne(t,e,a);case 10004:case 10005:case 10018:case 10019:return ae(t,e,a);case 10006:case 10007:return function(e,t){var r=(0,n.default)(t,4),a=r[0],s=r[1],o=r[2],i=r[3],c=y.resolveId(s),u=b.resolveCmid(o),l=e.convos.get(c);if(!l)return[];return 10006===a?g.readInUntil(l,u,i):g.readOutUntil(l,u),f.refresh(e.organisers,l),[]}(t,e);case 10013:return function(e,t,r){var a=(0,n.default)(t,3),s=a[1],o=a[2],i=y.resolveId(s),u=b.resolveCmid(o),d=e.convos.get(i);if(!d)return[];if(d.persistedCmid!==u)return[];var p=null==r?void 0:r.convos.get(s),h=p&&(0,G.fromApiConvo)(p);if(!h)return[function(){var e=(0,c.default)(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.logger.error("[EngineBatchReceived]",new Error("В ".concat(t[0]," отсутствует дозагруженная беседа"))),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()];e.convos.set(h.convo.peerId,h.convo),h.peer&&e.peers.set(h.peer.id,h.peer);return f.refresh(e.organisers,d),[]}(t,e,a);default:return[]}}));return[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.engine,e.next=3,r.poll();case 3:return e.t0=e.sent,e.t1={kind:"FromEngine",next:e.t0},e.abrupt("return",{type:"EngineBatchReceived",variant:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()].concat((0,i.default)(w))}function Z(e,t,r){return function(){var n=(0,c.default)(l().mark((function n(a){var s,o,i,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.api,i=a.engine,a.logger,n.prev=1,n.next=4,o.fetch("messages.getLongPollHistory",{pts:e,lp_version:i.version,group_id:(0,p.getOwnerGroupId)(r)},{retries:1/0});case 4:c=n.sent,n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",{type:"Noop"});case 10:return n.abrupt("return",{type:"EngineBatchReceived",variant:{kind:"FromEngineWithMissingData",apiConvos:c.conversations||[],apiMessages:(null===(s=c.messages)||void 0===s?void 0:s.items)||[],apiUsers:c.profiles||[],apiGroups:c.groups||[],skippedBatch:t,apiContacts:c.contacts||[]}});case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()}function ee(e,t){var r,n=new Map,a=$(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=n.get(s.peer_id);o||(o=new Map,n.set(s.peer_id,o)),o.set(s.conversation_message_id,s)}}catch(e){a.e(e)}finally{a.f()}return{messages_legacy:new Map(e.map((function(e){return[e.id,e]}))),messagesByPeerId:n,convos:new Map(t.map((function(e){return[e.peer.id,e]})))}}function te(e){return function(t){var r=e.persisted.get(t);return"Normal"===(null==r?void 0:r.kind)?r:void 0}}function re(e,t){if("string"==typeof e.attach1_type)return"sticker"!==e.attach1_type&&("audiomsg"!==e.attach1_kind||"doc"!==e.attach1_type);if(void 0!==e.geo)return!0;if(void 0!==e.fwd&&void 0===e.reply)return!0;if(void 0!==e.reply){var r=JSON.parse(e.reply);if(!t(b.resolveCmid(r.conversation_message_id)))return!0}return!1}function ne(e,t,r){var a=(0,n.default)(t,9),s=a[0],o=a[1],i=a[2],u=a[3],d=b.resolveCmid(o),p=y.resolveId(u),f=e.convos.get(p);if(!f)return[];var h=b.convertFlags(i);if(10003===s){var v=h.isDeleted,m=h.isSpam;if((v||m)&&o){var w,k=null==r||null===(w=r.messagesByPeerId.get(u))||void 0===w?void 0:w.get(o);if(k){var C=(0,F.fromApiMessage)(k);g.restoreMessage(f,C.message,C.mentions.hasDirect||C.mentions.hasMass)}}}var _={10001:"replace",10002:"set",10003:"unset"}[s],I=f.persisted.get(d);return I?(g.updateMessageFlags(f,I.cmid,_,i),[(0,c.default)(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(10002===s){e.next=2;break}return e.abrupt("return",{type:"Noop"});case 2:if(t=h.isDeleted,r=h.isDeletedForAll,!t&&!r){e.next=5;break}return e.abrupt("return",{type:"UpdateComposerDraftOnMessageDelete",peerId:p,deletedMessagesCmid:[d]});case 5:return e.abrupt("return",{type:"Noop"});case 6:case"end":return e.stop()}}),e)})))]):[]}function ae(e,t,r){var a,o,i=(0,n.default)(t,2)[1];switch(t[0]){case 10004:o=t[4];break;case 10005:case 10018:o=t[3];break;case 10019:o=t[2];break;default:(0,s.exhaustivenessCheck)(t)}var c=y.resolveId(o),u=e.convos.get(c);if(!u)return[];var l,d,h,v=null==r||null===(a=r.messagesByPeerId.get(o))||void 0===a?void 0:a.get(i);if(v){var m,b=(0,F.fromApiMessage)(v);l=b.message,d=b.mentions;var w=null==r||null===(m=r.convos.get(c))||void 0===m?void 0:m.current_keyboard;if(w){var k=(0,W.fromApiKeyboard)(w,c);h="InputKeyboard"===k.kind?{kind:"InputKeyboardUpsertEvent",keyboard:k}:void 0}else h={kind:"InputKeyboardDeleteEvent"}}else{if(z.IEngine.isIncompleteUpdate(t)||10019===t[0])return[];var C=(0,F.fromEngineMessage)(t,e.ownerId,te(u));l=C.message,d=C.mentions,h=C.keyboardEvent}switch(t[0]){case 10004:var _,I=e.typings.get(u.peerId);if(I){var S,O=$(p.TypingVariants);try{for(O.s();!(S=O.n()).done;){var x=S.value,E=I[x];E&&E.peerIds.has(l.authorId)&&(E.peerIds.delete(l.authorId),E.totalCount--,0===E.totalCount&&delete I[x],0===Object.keys(I).length&&e.typings.delete(u.peerId))}}catch(e){O.e(e)}finally{O.f()}}var R=t[3];return"ChatConvo"===u.kind?g.appendMessage(u,l,R,d.hasDirect||d.hasMass,h):g.appendMessage(u,l,R,!1,h),f.refresh(e.organisers,u),e.locks.convosCleanup.has(u.peerId)||g.cleanup(u),"InputKeyboardUpsertEvent"===(null===(_=h)||void 0===_?void 0:_.kind)&&e.hiddenBotKeyboards.delete(u.peerId),[];case 10005:case 10018:case 10019:return g.replaceMessage(u,l,d.hasDirect||d.hasMass),[];default:return(0,s.exhaustivenessCheck)(t)}}var se=r(92954);function oe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=function(e,t){switch(t.variant.kind){case"FromChannelEngine":return de(e,t.variant);case"FromChannelEngineWithMissingData":return function(e,t){var r=t.next,n=t.responseChannels;return(0,p.insertChannels)(e,{apiChannels:n.items||[],apiGroups:n.groups||[],dangerouslyMerge:!0}),de(e,{kind:"FromChannelEngine",isRetry:!0,next:r})}(e,t.variant);case"FromChannelEngineApiHistory":return function(e,t){var r,n=t.ts,a=t.history,s=t.posts,o=new Map,c=oe(s);try{for(c.s();!(r=c.n()).done;){var u=r.value,l=o.get(u.channel_id);l||(l=new Map,o.set(u.channel_id,l)),l.set(u.cmid,u)}}catch(e){c.e(e)}finally{c.f()}return de(e,{kind:"FromChannelEngine",next:{kind:"Batch",ts:n,updates:a.reduce((function(e,t){switch(t[0]){case 70001:case 70002:var r,n=null===(r=o.get(t[1]))||void 0===r?void 0:r.get(t[2]);return n?(e.push([].concat((0,i.default)(t),[n])),e):e;default:return e.push(t),e}}),[])}})}(e,t.variant);default:return(0,s.exhaustivenessCheck)(t.variant)}};function de(e,t){var r=t.isRetry,a=t.next;if("Failure"===a.kind){e.channelConn.status="resyncing";var o=e.channelConn.ts;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.api,n=t.channelEngine){e.next=3;break}return e.abrupt("return",{type:"Noop"});case 3:return e.next=5,(0,s.sleep)(1e3);case 5:return e.prev=5,e.next=8,r.fetch("channels.getLongPollHistory",{lp_version:n.version,ts:o,limit:1e3},{retries:1/0});case 8:a=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",{type:"Noop"});case 14:return n.connect(ue(ue({},a.credentials),{},{ts:a.new_ts})),e.abrupt("return",{type:"ChannelEngineBatchReceived",variant:{kind:"FromChannelEngineApiHistory",ts:a.new_ts,history:a.history,posts:a.messages||[]}});case 16:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()]}if(!r){var u=function(e,t){var r,a=new Set,s=oe(t.updates);try{for(s.s();!(r=s.n()).done;){var o=r.value,i=(0,n.default)(o,2)[1],c=k.resolveId(i);switch(o[0]){case 70001:e.channels.has(c)||a.add(c);break;case 70002:case 70003:case 70004:break;case 70005:(0,n.default)(o,3)[2]&&a.add(c);break;default:}}}catch(e){s.e(e)}finally{s.f()}return{channelIds:a}}(e,a);if(u.channelIds.size>0)return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("channels.getById",{channel_ids:Array.from(u.channelIds).join(",")},{retries:1/0});case 4:return n=e.sent,e.abrupt("return",{type:"ChannelEngineBatchReceived",variant:{kind:"FromChannelEngineWithMissingData",next:a,responseChannels:n}});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"Noop"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]}e.channelConn.status="running",e.channelConn.ts=a.ts;var d=a.updates.flatMap((function(t){switch(t[0]){case 70001:return function(e,t){var r=(0,n.default)(t,5),a=r[1],s=r[3],o=r[4],i=k.resolveId(a),c=e.channels.get(i);if(!c)return[];k.setSortId(c,{minorSortId:s});var u,l=(0,se.fromApiPost)(o),d=l.post,p=oe(l.reactions);try{for(p.s();!(u=p.n()).done;){var f=u.value;e.reactions.set(f.id,f)}}catch(e){p.e(e)}finally{p.f()}return k.appendPost(c,d),[]}(e,t);case 70002:return function(e,t){var r=(0,n.default)(t,4),a=r[1],s=r[3],o=k.resolveId(a),i=e.channels.get(o);if(!i)return[];var c,u=(0,se.fromApiPost)(s),l=u.post,d=oe(u.reactions);try{for(d.s();!(c=d.n()).done;){var p=c.value;e.reactions.set(p.id,p)}}catch(e){d.e(e)}finally{d.f()}return k.replacePost(i,l),[]}(e,t);case 70003:return function(e,t){var r=(0,n.default)(t,4),a=r[1],s=r[2],o=r[3],i=k.resolveId(a),c=C.resolveCmid(s),u=e.channels.get(i);if(!u)return[];return k.setSortId(u,{minorSortId:o}),k.deletePost(u,c),[]}(e,t);case 70004:return function(e,t){var r=(0,n.default)(t,4),a=r[1],s=r[2],o=r[3],i=k.resolveId(a),c=C.resolveCmid(s),u=e.channels.get(i);if(!u)return[];return k.readUntil(u,c,o),[]}(e,t);case 70005:return function(e,t){var r=(0,n.default)(t,4),a=r[1],s=r[2],o=r[3],i=k.resolveId(a),c=e.channels.get(i);if(!c)return[];return k.setArchived(c,!s),m.updateCounters(e.organisers.channelFilters,{archiveTotal:o}),f.refreshChannels(e.organisers,c),[]}(e,t);default:return[]}}));return[].concat((0,i.default)(d),[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.channelEngine){e.next=3;break}return e.abrupt("return",{type:"Noop"});case 3:return e.next=5,r.poll();case 5:return e.t0=e.sent,e.t1={kind:"FromChannelEngine",next:e.t0},e.abrupt("return",{type:"ChannelEngineBatchReceived",variant:e.t1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()])}var pe=r(98237);function fe(e,t,r){var n=e.api,a=e.storage;switch(t){case"ctrSubmit":var o=pe.Api.resolveTrackId("account.setInfo","messages_multiline_input");return n.dangerouslyAbort(o),n.fetch("account.setInfo",{name:"messages_multiline_input",value:String(Number(r))},{trackId:o});case"soundNotifications":return a.set("settings-sound-notifications-on",r),Promise.resolve(1);case"showRecommendations":var i=pe.Api.resolveTrackId("account.setInfo","messages_recommendation_list_hidden");return n.dangerouslyAbort(i),n.fetch("account.setInfo",{name:"messages_recommendation_list_hidden",value:String(Number(!r))},{trackId:i});case"countOnlyNotMuted":var c=pe.Api.resolveTrackId("account.setInfo","show_only_not_muted_messages");return n.dangerouslyAbort(c),n.fetch("account.setInfo",{name:"show_only_not_muted_messages",value:String(Number(r))},{trackId:c});case"autoUnarchive":var u=pe.Api.resolveTrackId("account.setInfo","messages_auto_unarchive");return n.dangerouslyAbort(u),n.fetch("account.setInfo",{name:"messages_auto_unarchive",value:String(Number(r))},{trackId:u});case"transcriptAutoShow":var l=pe.Api.resolveTrackId("account.setInfo","messages_transcript_auto_show");return n.dangerouslyAbort(l),n.fetch("account.setInfo",{name:"messages_transcript_auto_show",value:String(Number(r))},{trackId:l});case"verticalFoldersView":return a.set("folders-view-vertical",r),Promise.resolve(1);default:(0,s.exhaustivenessCheck)(t)}}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce={mute:"mute",unmute:"mute",mute_until:"mute_until",pin:"pin",unpin:"pin",mark_read:"mark_read",mark_unread:"mark_read",archive:"archive",unarchive:"archive",clear:"clear",leave:"leave",leave_and_clear:"leave_and_clear",show_pinned_message:"show_pinned_message",hide_pinned_message:"show_pinned_message",show_bot_keyboard:"show_bot_keyboard",hide_bot_keyboard:"hide_bot_keyboard",pin_message_for_all:"pin_message_for_all",unpin_message_for_all:"pin_message_for_all",ban:"ban",unban:"unban",return_to_chat:"return_to_chat"},_e={pin:"unpin",unpin:"pin",mark_read:"mark_unread",mark_unread:"mark_read",archive:"unarchive",unarchive:"archive",show_pinned_message:"hide_pinned_message",hide_pinned_message:"show_pinned_message",show_bot_keyboard:"hide_bot_keyboard",hide_bot_keyboard:"show_bot_keyboard"},Ie=function e(t,r,n){switch(r.type){case"UserChangedConvo":var a=r.peerId,o=r.userAction,u=t.organisers,h=t.viewer.id,v=Se(r.userAction,a);if(t.locks.convoActions.has(v))return[];t.locks.convoActions.add(v);var m,w=t.convos.get(a),k=t.peers.get(a),C=t.ownerId;if(!w||!k)return[];switch(o){case"pin":m=function(e){return e.fetch("messages.pinConversation",{peer_id:a})};break;case"unpin":m=function(e){return e.fetch("messages.unpinConversation",{peer_id:a})};break;case"mark_read":w.isMarkedUnread=!1,m=function(e){return e.fetch("messages.markAsRead",{peer_id:a,mark_conversation_as_read:1,group_id:(0,p.getOwnerGroupId)(C)})};break;case"mark_unread":w.isMarkedUnread=!0,m=function(e){return e.fetch("messages.markAsUnreadConversation",{peer_id:a,group_id:0})};break;case"archive":case"unarchive":w.isArchived="archive"===o,f.refresh(u,w),m=function(e){return e.fetch("archive"===o?"messages.archiveConversation":"messages.unarchiveConversation",{peer_id:a})};break;case"hide_pinned_message":"ChatConvo"===w.kind&&w.pinnedMessage&&t.hiddenPinnedMessages.set(r.peerId,w.pinnedMessage.cmid);break;case"show_pinned_message":t.hiddenPinnedMessages.delete(r.peerId);break;case"hide_bot_keyboard":t.hiddenBotKeyboards.add(r.peerId);break;case"show_bot_keyboard":t.hiddenBotKeyboards.delete(r.peerId);break;case"clear":m=function(e){return e.fetch("messages.deleteConversation",{peer_id:a,group_id:(0,p.getOwnerGroupId)(C)}).then((function(e){var t=e.last_deleted_id;return Boolean(t)}))};break;case"leave":case"leave_and_clear":if("ChatConvo"!==w.kind)break;m=function(e){return e.fetch("messages.removeChatUser",{chat_id:y.toRealId(a),user_id:h,group_id:(0,p.getOwnerGroupId)(C)})};var _=t.peers.get(a);if(!_||"Chat"!==_.kind)break;g.clearChatDataOnLeave(w),y.clearChatDataOnLeave(_);break;case"ban":if("User"!==k.kind||"UserConvo"!==w.kind)break;if(y.updateIsPeerBlacklistedByMe(k,!0),g.restrictWrite(w,"peer_blacklisted"),y.isGroupPeerId(C)){m=function(e){return e.fetch("groups.ban",{owner_id:a,group_id:(0,p.getOwnerGroupId)(C)})};break}m=function(e){return e.fetch("account.ban",{owner_id:a})};break;case"unban":if("User"!==k.kind||"UserConvo"!==w.kind)break;if(y.updateIsPeerBlacklistedByMe(k,!1),g.allowWrite(w),y.isGroupPeerId(C)){m=function(e){return e.fetch("groups.unban",{owner_id:a,group_id:(0,p.getOwnerGroupId)(C)})};break}m=function(e){return e.fetch("account.unban",{owner_id:a})};break;case"return_to_chat":m=function(e){return e.fetch("messages.addChatUser",{chat_id:y.toRealId(a),user_id:h})};break;default:(0,s.exhaustivenessCheck)(o)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.api,e.prev=1,n=!1,!m){e.next=7;break}return e.next=6,m(r);case 6:n=!e.sent;case 7:return e.abrupt("return",{type:"UserChangedConvo_RequestCompleted",hasFailed:n,userAction:o,peerId:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedConvo_RequestCompleted",hasFailed:!0,userAction:o,peerId:a});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedConvo_RequestCompleted":var I=r.peerId,S=r.userAction,O=r.hasFailed,x=Se(S,I);t.locks.convoActions.delete(x);var E=_e[S];if(O&&E)return e(t,{type:"UserChangedConvo",userAction:E,peerId:I},n),[];if(O)return[];switch(S){case"clear":case"pin":case"unpin":case"mark_read":case"mark_unread":case"unarchive":case"show_pinned_message":case"hide_pinned_message":case"show_bot_keyboard":case"hide_bot_keyboard":case"ban":case"unban":return[];case"archive":var R=t.convos.get(I);if(!R||"ChatConvo"!==R.kind||!R.unreadMentions.size)return[];var A=b.resolveCmid(Math.max.apply(Math,(0,i.default)(R.unreadMentions)));return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storage,(n=r.get("archive-mentions-map"))&&A){e.next=4;break}return e.abrupt("return",{type:"Noop"});case 4:return n[I]=A,r.set("archive-mentions-map",n),e.abrupt("return",{type:"Noop"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()];case"leave":var M=t.convos.get(I);return"ChatConvo"===(null==M?void 0:M.kind)&&g.setConvoState(M,"left"),[];case"leave_and_clear":var P=t.convos.get(I);return"ChatConvo"!==(null==P?void 0:P.kind)?[]:(g.setConvoState(P,"left"),e(t,{type:"UserChangedConvo",userAction:"clear",peerId:I},n));case"return_to_chat":var U=t.convos.get(I);return"ChatConvo"===(null==U?void 0:U.kind)&&g.setConvoState(U,"in"),[];default:return(0,s.exhaustivenessCheck)(r)}case"UserChangedMute":var j=r.peerId,F=r.timer,T=r.userAction,N=Se(r.userAction,j);if(t.locks.convoActions.has(N))return[];var q,D=t.convos.get(j);if(!D)return[];switch(T){case"mute":D.push={mode:"every-mention",disabledUntil:1/0},q=-1;break;case"unmute":D.push={mode:"everything",disabledUntil:0},q=0;break;case"mute_until":D.push={mode:"every-mention",disabledUntil:Date.now()+1e3*F},q=F;break;default:(0,s.exhaustivenessCheck)(T)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("account.setSilenceMode",{time:q,peer_id:j,sound:"unmute"===T?1:0});case 4:return n=e.sent,e.abrupt("return",{type:"UserChangedMute_RequestCompleted",hasFailed:1!==n,userAction:T,peerId:j});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedMute_RequestCompleted",hasFailed:!0,userAction:T,peerId:j});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedMute_RequestCompleted":var L=r.peerId,H=r.userAction,B=r.hasFailed,z=Se(H,L);t.locks.convoActions.delete(z);var G={mute:"unmute",unmute:"mute",mute_until:"unmute"}[H];return B&&G?(e(t,{type:"UserChangedMute",userAction:G,peerId:L,timer:0},n),[]):[];case"UserPinMessage":var W=r.peerId,V=r.cmid,$=r.userAction,K=Se(r.userAction,W);if(t.locks.convoActions.has(K))return[];t.locks.convoActions.add(K);var Q=t.convos.get(W),X=t.ownerId;if(!Q||"ChatConvo"!==Q.kind)return[];var J=Q.pinnedMessage&&(0,d.current)(Q.pinnedMessage),Y=Q.persisted.get(V);return"Normal"===(null==Y?void 0:Y.kind)&&g.pinMessage(Q,b.toPinned(Y)),[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.pin",{peer_id:W,conversation_message_id:V,group_id:(0,p.getOwnerGroupId)(X)});case 4:return e.abrupt("return",{type:"UserPinMessage_RequestCompleted",hasFailed:!1,userAction:$,peerId:W,cmid:V});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{type:"UserPinMessage_RequestCompleted",hasFailed:!0,userAction:$,pinnedMessage:J,peerId:W,cmid:V});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()];case"UserPinMessage_RequestCompleted":var Z=r.peerId,ee=r.hasFailed,te=r.pinnedMessage,re=r.userAction,ne=Se(re,Z);t.locks.convoActions.delete(ne);var ae=t.convos.get(Z);return ae&&"ChatConvo"===ae.kind?(ee&&(g.unpinMessage(ae),te&&g.pinMessage(ae,te)),[]):[];case"UserUnpinMessage":var se=r.peerId,oe=r.userAction,ie=Se(r.userAction,se);if(t.locks.convoActions.has(ie))return[];var ce=t.convos.get(se),ue=t.ownerId;if(!ce||"ChatConvo"!==ce.kind)return[];var le=(0,d.current)(g.unpinMessage(ce));return[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.unpin",{peer_id:se,group_id:(0,p.getOwnerGroupId)(ue)});case 4:return e.abrupt("return",{type:"UserUnpinMessage_RequestCompleted",hasFailed:!1,userAction:oe,peerId:se});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{type:"UserUnpinMessage_RequestCompleted",hasFailed:!0,userAction:oe,prevPinnedMessage:le,peerId:se});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()];case"UserUnpinMessage_RequestCompleted":var de=r.peerId,pe=r.hasFailed,fe=r.prevPinnedMessage,he=r.userAction,ve=Se(he,de);t.locks.convoActions.delete(ve);var me=t.convos.get(de);return me&&"ChatConvo"===me.kind?(pe&&fe&&g.pinMessage(me,fe),[]):[];default:(0,s.exhaustivenessCheck)(r)}},Se=function(e,t){return"".concat(Ce[e],"-").concat(t.toString())},Oe=function(e,t){return"".concat(e,"-").concat(t)},xe={mark_important:"unmark_important",unmark_important:"mark_important"},Ee={delete:"delete",restore:"restore",mark_important:"mark_important",unmark_important:"mark_important"},Re=function e(t,r,n){switch(r.type){case"UpdateComposerDraftOnMessageDelete":return[];case"UserChangedMessage":for(var a=r.peerId,o=r.userAction,i=r.cmids,u=r.ids,d=0;d<i.length;d+=1){var f=i[d];if(!f)return[];var h=Ae(o,a,f);if(t.locks.messageActions.has(h))return[];t.locks.messageActions.add(h)}var v,m=t.convos.get(a);switch(o){case"mark_important":case"unmark_important":i.forEach((function(e){if(m){var r=m.persisted.get(e);"Normal"===(null==r?void 0:r.kind)&&(r.isImportant="mark_important"===o)}var n=t.importantMessages.messages.get(Oe(a,e));n&&(n.isImportant="mark_important"===o)})),v=function(e){return e.fetch("messages.markAsImportant",{message_ids:"".concat(u.join(",")),important:"mark_important"===o?1:0}).then((function(e){return Boolean(e[0])}))};break;default:(0,s.exhaustivenessCheck)(o)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.api,e.prev=1,n=!1,!v){e.next=7;break}return e.next=6,v(r);case 6:n=!e.sent;case 7:return e.abrupt("return",{type:"UserChangedMessage_RequestCompleted",hasFailed:n,userAction:o,ids:u,cmids:i,peerId:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedMessage_RequestCompleted",hasFailed:!0,userAction:o,ids:u,cmids:i,peerId:a});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedMessage_RequestCompleted":var y=r.peerId,w=r.userAction,k=r.hasFailed,C=r.cmids,_=r.ids;C.forEach((function(e){var r=Ae(w,y,e);t.locks.messageActions.delete(r)}));var I=xe[w];return k&&I&&e(t,{type:"UserChangedMessage",userAction:I,ids:_,peerId:y,cmids:C},n),[];case"UserDeleteMessage":var S=r.deleteType,O=r.peerId,x=r.userAction,E=r.messages,R=t.ownerId,A=t.convos.get(O);if(!A)return[];for(var M=[],P=0;P<E.length;P+=1){var U=E[P];if(!U||"Normal"!==U.kind)return[];var j=Ae(x,O,U.cmid);if(t.locks.messageActions.has(j))return[];t.locks.messageActions.add(j);var F=b.markDeleted(U,"spam"===S);switch(M.push(F),S){case"local":case"spam":if(g.isCasper(A)){g.deleteMessage(A,U.cmid);break}g.replaceMessage(A,F,!1);break;case"for_all":g.deleteMessage(A,U.cmid);break;default:(0,s.exhaustivenessCheck)(S)}}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.delete",{message_ids:E.map((function(e){return e.id})).join(","),peer_id:O,delete_for_all:"for_all"===S?1:0,spam:"spam"===S?1:0,group_id:(0,p.getOwnerGroupId)(R)});case 4:return a=e.sent,e.abrupt("return",{type:"UserDeleteMessage_RequestCompleted",hasFailed:!Boolean(null===(n=a[0])||void 0===n?void 0:n.response),userAction:x,deleteType:S,peerId:O,messages:E,deletedMessages:M});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserDeleteMessage_RequestCompleted",hasFailed:!0,userAction:x,deleteType:S,peerId:O,messages:E,deletedMessages:M});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserDeleteFailedMessage":var T=r.peerId,N=r.randomId,q=t.convos.get(T);return q?(g.removeQueued(q,N),[]):[];case"UserDeleteAllFailedMessage":var D=r.peerId,L=t.convos.get(D);return L?(g.allQueuedMessages(L).filter((function(e){return e.hasFailed})).forEach((function(e){g.removeQueued(L,e.randomId)})),[]):[];case"UserDeleteMessage_RequestCompleted":var H=r.peerId,B=r.userAction,z=r.messages,G=r.hasFailed,W=r.deletedMessages,V=t.convos.get(H);return G&&V&&W.forEach((function(e){var t=b.restoreDeleted(e);g.restoreMessage(V,t,!1)})),z.forEach((function(e){var r=e.cmid,n=Ae(B,H,r);t.locks.messageActions.delete(n)})),[(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G?{type:"Noop"}:{type:"UpdateComposerDraftOnMessageDelete",peerId:H,deletedMessagesCmid:W.map((function(e){return e.cmid}))});case 1:case"end":return e.stop()}}),e)})))];case"UserRestoreMessage":var $=r.peerId,K=r.userAction,Q=r.cmid,X=r.messageId,J=Ae(K,$,Q);if(t.locks.messageActions.has(J))return[];t.locks.messageActions.add(J);var Y=t.convos.get($);if(!Y)return[];var Z=t.ownerId,ee=Y.persisted.get(Q);if(ee&&"MarkedDeleted"===ee.kind){var te=b.restoreDeleted(ee);g.restoreMessage(Y,te,!1)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.restore",{message_id:X,group_id:(0,p.getOwnerGroupId)(Z)});case 4:return n=e.sent,e.abrupt("return",{type:"UserRestoreMessage_RequestCompleted",hasFailed:!Boolean(n),userAction:K,messageId:X,peerId:$,cmid:Q});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserRestoreMessage_RequestCompleted",hasFailed:!0,userAction:K,messageId:X,peerId:$,cmid:Q});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserRestoreMessage_RequestCompleted":var re=r.peerId,ne=r.userAction,ae=r.cmid,se=r.hasFailed,oe=Ae(ne,re,ae);t.locks.messageActions.delete(oe);var ie=t.convos.get(re),ce=null==ie?void 0:ie.persisted.get(ae);return se&&ie&&ce&&"Normal"===ce.kind&&e(t,{type:"UserDeleteMessage",messages:[ce],deleteType:"local",peerId:re,userAction:"delete"},n),[];default:(0,s.exhaustivenessCheck)(r)}},Ae=function(e,t,r){return"".concat(Ee[e],"-").concat(t.toString(),"-").concat(r.toString())};function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=function e(t,r,n){switch(r.type){case"LoadChatMembers":return[];case"UserOpenedConvoProfile":var a=r.peerId,o=r.isLinkWithHistory,i=t.convos.get(a),u=t.ownerId;return i?e(t,{type:"UserOpenedConvoProfile_ConvoRequestCompleted",peerId:a,hasFailed:!1,isLinkWithHistory:o},n):[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.getConversationsById",{peer_ids:a.toString(),group_id:(0,p.getOwnerGroupId)(u)},{retries:3});case 4:return n=e.sent,e.abrupt("return",{type:"UserOpenedConvoProfile_ConvoRequestCompleted",peerId:a,hasFailed:!1,profiles:n.profiles,groups:n.groups,conversations:n.items,contacts:n.contacts,isLinkWithHistory:o});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserOpenedConvoProfile_ConvoRequestCompleted",peerId:a,hasFailed:!0,isLinkWithHistory:o});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserOpenedConvoProfile_ConvoRequestCompleted":var d=r.peerId,f=r.conversations,h=r.profiles,v=r.groups,m=r.contacts,b=r.hasFailed,w=r.isLinkWithHistory;if(b){if(s.isDev)throw new Error("Не удалось загрузить диалог");return[(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"Noop"});case 1:case"end":return e.stop()}}),e)})))]}(0,p.insertConvos)(t,f||[]),(0,p.insertPeers)(t,{apiUsers:h||[],apiGroups:v||[],apiContacts:m||[]});var k=t.convos.get(d);if(!k){if(s.isDev)throw new Error("Диалог не был найден");return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.router.replace({kind:"MainRoute"}),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}var C="ChatConvo"===k.kind&&void 0===k.members&&g.canReadMembers(k)&&!t.locks.getConversationMembers.has(d);C&&t.locks.getConversationMembers.add(d);var _="ChatConvo"===k.kind&&k.acl.canSeeInviteLink;return[C&&y.isChatPeerId(d)&&function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"LoadChatMembers",peerId:d});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_&&y.isChatPeerId(d)&&function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.t0=d,e.t1=w,e.next=6,r.fetch("messages.getInviteLink",{peer_id:d,visible_messages_count:w?250:0,reset:0},{retries:1});case 6:return e.t2=e.sent,e.abrupt("return",{type:"UserOpenedConvoProfile_InviteLinksCompleted",peerId:e.t0,isLinkWithHistory:e.t1,response:e.t2});case 10:e.prev=10,e.t3=e.catch(1);case 12:return e.abrupt("return",{type:"Noop"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()];case"UserOpenedConvoProfile_InviteLinksCompleted":var I=r.peerId,S=r.response.link,O=r.isLinkWithHistory,x=t.convos.get(I);return x&&"ChatConvo"===x.kind&&S?(g.replaceInviteLinks(x,Te(Te({},x.inviteLinks),O?{withHistory:S}:{noHistory:S})),[]):[];default:(0,s.exhaustivenessCheck)(r)}},qe=function(e,t,r){switch(t.type){case"UserUpdatedFolder":var n=t.folderId,a=t.name,o=t.addPeerIds,c=t.removePeerIds;if(e.locks.updateFolder.has(n))return[];if(function(e,t){if(new Set((0,i.default)(e).filter((function(e){return t.has(e)}))).size)return!0;return!1}(o,c))throw new Error("Peer id не может одновременно находиться в списке на добавление и на удаление");e.locks.updateFolder.add(n);var u=e.organisers.folders.find((function(e){return e.id===n}));if(!u)return[];var l=(0,p.getConvosByIds)(e,Array.from(c)),d=(0,p.getConvosByIds)(e,Array.from(o));return v.setName(u,a),(0,p.removeConvosFromFolder)(e,u.id,l),(0,p.addConvosToFolder)(e,u.id,d),[De(n,a,o,c)];case"UserUpdatedFolder_UpdateRequestCompleted":var f=t.hasFailed,h=t.folderId;if(e.locks.updateFolder.delete(h),f&&s.isDev)throw new Error("Не удалось изменить папку");return[];default:(0,s.exhaustivenessCheck)(t)}};function De(e,t,r,n){return function(){var a=(0,c.default)(l().mark((function a(s){var o,c,u,d;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=s.api,c=!1,u={folder_id:e,name:t},r.size&&(u.add_included_peer_ids=(0,i.default)(r).join(",")),n.size&&(u.remove_included_peer_ids=(0,i.default)(n).join(",")),a.prev=5,a.next=8,o.fetch("messages.updateFolder",u);case 8:d=a.sent,c=1!==d,a.next=15;break;case 12:a.prev=12,a.t0=a.catch(5),c=!0;case 15:return a.abrupt("return",{type:"UserUpdatedFolder_UpdateRequestCompleted",hasFailed:c,folderId:e,addPeerIds:r,removePeerIds:n,name:t});case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(e){return a.apply(this,arguments)}}()}function Le(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Be=function(e,t){switch(t.type){case"UserChangedChatMember":var r=t.peerId,n=t.memberId,a=t.userAction;if(!e.convos.get(r))return[];var o=function(e,t){var r=t.userAction,n=t.peerId,a=t.memberId;switch(r){case"promote":return function(e){return e.api.fetch("messages.setMemberRole",{member_id:a,peer_id:n,role:"admin"})};case"demote":return function(e){return e.api.fetch("messages.setMemberRole",{member_id:a,peer_id:n,role:"member"})};case"cancel_invitation":case"remove":return function(t){return t.api.fetch("messages.removeChatUser",{chat_id:y.toRealId(n),member_id:a,group_id:(0,p.getOwnerGroupId)(e)})};default:return(0,s.exhaustivenessCheck)(r)}}(e.ownerId,t);return[function(){var e=(0,c.default)(l().mark((function e(t){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:return s=e.sent,e.abrupt("return",{type:"UserChangedChatMember_RequestCompleted",hasFailed:1!==s,peerId:r,memberId:n,userAction:a});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{type:"UserChangedChatMember_RequestCompleted",hasFailed:!0,peerId:r,memberId:n,userAction:a});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedChatMember_RequestCompleted":var i=t.peerId,u=t.memberId,d=t.userAction,f=t.hasFailed,h=e.convos.get(i);return f||"ChatConvo"!==(null==h?void 0:h.kind)?[]:("cancel_invitation"===d&&g.removeMember(h,u),y.isContactPeerId(u)||("promote"===d&&g.addAdmin(h,u),"demote"===d&&g.removeAdmin(h,u),"remove"===d&&g.removeMember(h,u)),[]);default:return(0,s.exhaustivenessCheck)(t)}};var ze=function(e,t){switch(t.type){case"LoadChatMembers":var r=t.peerId,n=(0,p.getOwnerGroupId)(e.ownerId);return[function(){var e=(0,c.default)(l().mark((function e(t){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.api,e.prev=1,e.t0=r,e.next=5,a.fetch("messages.getConversationMembers",{peer_id:r,group_id:n},{retries:1});case 5:return e.t1=e.sent,e.abrupt("return",{type:"LoadChatMembers_RequestComplete",peerId:e.t0,response:e.t1,hasFailed:!1});case 9:return e.prev=9,e.t2=e.catch(1),e.abrupt("return",{type:"LoadChatMembers_RequestComplete",peerId:r,hasFailed:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()];case"LoadChatMembers_RequestComplete":var a=t.peerId,o=t.response,i=t.hasFailed;e.locks.getConversationMembers.delete(a);var u=e.convos.get(a);if("ChatConvo"!==(null==u?void 0:u.kind)||i||!o)return[];var d=o.items.reduce((function(e,t){var r=y.resolveId(t.member_id);if(!y.isUserPeerId(r)&&!y.isGroupPeerId(r)&&!y.isContactPeerId(r))return e;var n={isAdmin:Boolean(t.is_admin),canKick:Boolean(t.can_kick),isMessageRequest:Boolean(t.is_message_request),peerId:r};return t.is_message_request&&t.request_date&&(n.requestDate=1e3*t.request_date),e.members.push(n),y.isContactPeerId(r)||(t.is_admin&&e.adminIds.push(r),t.is_owner&&(e.ownerId=r)),e}),{members:[],adminIds:[]}),f=d.members,h=d.adminIds,v=d.ownerId;return g.addMembers(u,f),h.forEach((function(e){g.addAdmin(u,e)})),v&&g.setOwner(u,v),(0,p.insertPeers)(e,{apiUsers:o.profiles||[],apiGroups:o.groups||[],apiContacts:o.contacts||[]}),[];default:(0,s.exhaustivenessCheck)(t)}},Ge={archive:"archive",unarchive:"unarchive",join:"join",leave:"join",mute:"mute",unmute:"unmute"},We={archive:"unarchive",unarchive:"archive",join:"leave",leave:"join",mute:"unmute",unmute:"mute"},Ve=function e(t,r,n){var a=r.type;switch(a){case"UserChangedChannel":var o=r.channelId,i=r.userAction,u=$e(r.userAction,o);if(t.locks.channelActions.has(u))return[];t.locks.channelActions.add(u);var d,p=t.channels.get(o);if(!p)return[];switch(i){case"archive":k.setArchived(p,!0),f.refreshChannels(t.organisers,p),d=function(e){return e.fetch("channels.archive",{channel_ids:String(o)}).then((function(e){return Boolean(e)}))};break;case"unarchive":k.setArchived(p,!1),f.refreshChannels(t.organisers,p),d=function(e){return e.fetch("channels.unarchive",{channel_ids:String(o)}).then((function(e){return Boolean(e)}))};break;case"join":k.setMembership(p,!0),f.refreshChannels(t.organisers,p),d=function(e){return e.fetch("channels.join",{channel_id:o})};break;case"leave":k.setMembership(p,!1),f.refreshChannels(t.organisers,p),d=function(e){return e.fetch("channels.leave",{channel_id:o})};break;case"mute":k.setMuted(p,!0),d=function(e){return e.fetch("channels.setNotificationMode",{channel_id:o,mode:"disabled"}).then((function(e){return Boolean(e)}))};break;case"unmute":k.setMuted(p,!1),d=function(e){return e.fetch("channels.setNotificationMode",{channel_id:o,mode:"enabled"}).then((function(e){return Boolean(e)}))};break;default:(0,s.exhaustivenessCheck)(i)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.api,e.prev=1,n=!1,!d){e.next=7;break}return e.next=6,d(r);case 6:n=!e.sent;case 7:return e.abrupt("return",{type:"UserChangedChannel_RequestCompleted",channelId:o,hasFailed:n,userAction:i});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedChannel_RequestCompleted",channelId:o,hasFailed:!0,userAction:i});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedChannel_RequestCompleted":var h=r.channelId,v=r.userAction,m=r.hasFailed,g=$e(v,h);t.locks.channelActions.delete(g);var y=We[v];return m&&y&&(e(t,{type:"UserChangedChannel",userAction:y,channelId:h},n),t.locks.channelActions.delete(g)),[];default:(0,s.exhaustivenessCheck)(a)}},$e=function(e,t){return"".concat(Ge[e],"-").concat(t.toString())};function Ke(e){return function(){var t=(0,c.default)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.sleep)(300);case 2:return t.abrupt("return",{type:"UserSeenPost_ThrottleTimedOut",channelId:e});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}var Qe=r(94170),Xe={like:"dislike",dislike:"like"},Je={like:"like",dislike:"like"},Ye=function e(t,r,n){var a=r.type,o=r.userAction;switch(a){case"UserChangedPostLike":var i=r.channelId,u=r.cmid,d=Ze(o,i,u);if(t.locks.postActions.has(d))return[];var p=t.channels.get(i);if(!p)return[];var f=k.findPostByCmid(p,u);if(!f||"Normal"!==f.kind)return[];var h=void 0;switch(o){case"like":var v=r.reactionId;void 0===f.likes.reactionId&&(f.likes.count+=1),f.likes.reactionId=v||Qe.resolveId(0);break;case"dislike":f.likes.count-=1,h=f.likes.reactionId,f.likes.reactionId=void 0;break;default:(0,s.exhaustivenessCheck)(o)}return[function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"UserChangedPostLike_RequestCompleted",hasFailed:!1,userAction:o,channelId:i,cmid:u,prevReactionId:h});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()];case"UserChangedPostLike_RequestCompleted":var m=r.channelId,g=r.cmid,y=r.hasFailed,b=Ze(o,m,g);t.locks.postActions.delete(b);var w=Xe[o];return y&&w?(e(t,{type:"UserChangedPostLike",userAction:w,reactionId:"dislike"===o?r.prevReactionId:void 0,channelId:m,cmid:g},n),[]):[];default:(0,s.exhaustivenessCheck)(r)}},Ze=function(e,t,r){return"".concat(Je[e],"-").concat(t.toString(),"-").concat(r.toString())},et=r(53752),tt=r(60082);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ot=function(e,t,r){var n=y.resolveId(e),a=t?y.resolveId(t):void 0;if(!y.isUserPeerId(n))throw Error("Viewer может быть только пользователем");if(void 0!==a&&!y.isUserPeerId(a)&&!y.isGroupPeerId(a))throw Error("Owner может быть только пользователем или группой");return[{convoConn:{status:"loading",pts:0},channelConn:{status:"running",ts:0},viewer:{id:n,profileType:x(r),settings:{ctrSubmit:!1,soundNotifications:!0,showRecommendations:!0,countOnlyNotMuted:!1,autoUnarchive:!0,transcriptAutoShow:!0,theme:"system",verticalFoldersView:!1},accounts:[]},ownerId:y.resolveId(),organisers:f.empty(),channels:new Map([[k.resolveId(0),{kind:"Channel",id:k.resolveId(0),name:"",activity:"",isVerified:!1,photos:{},inReadCmid:C.resolveCmid(0),unreadCount:0,isArchived:!1,isMuted:!1,notificationsDisabledUntil:0,majorSortId:0,minorSortId:0,membersCount:0,isMember:!1,pending:{},locks:{loading:!1,cleanUp:0},history:[]}]]),convos:new Map([[y.resolveId(),{kind:"UserConvo",peerId:y.resolveId(),unreadCount:0,majorSortId:0,minorSortId:0,inReadBy:b.resolveCmid(0),outReadBy:b.resolveCmid(0),isNew:!1,folderIds:new Set,isMarkedUnread:!1,isArchived:!1,canWrite:{allowed:!1,reason:"unknown"},push:{mode:"everything",disabledUntil:0},persistedCmid:b.resolveCmid(),persisted:new Map,queuedId:b.resolveRandomId(),queued:new Map,afterGapCmid:b.resolveCmid(),unreadExpireables:new Set,hasMore:!1,entrypoint:null}]]),composerDrafts:{},readQueues:new Map,channelReadQueues:new Map,peers:new Map([[y.resolveId(),{kind:"User",id:y.resolveId(),firstName:"...",firstNameGen:"...",firstNameAcc:"...",lastName:"...",lastNameGen:"...",lastNameAcc:"...",sex:"unknown",lastSeen:{isVisible:!1,platform:"other"},isVerified:!1,canCall:!0,followersCount:0,canChangeFriendship:!1,canMessage:!1,friendship:"unfamiliar",isBlacklisted:!1,isBlacklistedByMe:!1,isDeactivated:!1,canInviteToChats:!1}]]),onlines:new Set,typings:new Map,convosSearchIndex:_.create(),locks:{getConversations:{all:!1,unread:!1,archive:!1,messageRequest:!1},getChannels:{all:!1,unread:!1},hideFilter:{all:!1,unread:!1,chats:!1,archive:!1,messageRequest:!1},getHistory:new Set,getConversationMembers:new Set,sendQueue:new Map,edit:new Set,convosCleanup:new Map,updateFriendshipOrMembership:new Set,convoActions:new Set,messageActions:new Set,channelActions:new Set,postActions:new Set,settings:new Set,contactList:!1,newFolder:!1,deleteFolder:new Set,updateFolder:new Set,reorderFolders:!1,getChannelHistory:new Set,changeMessageRequest:new Set,getStickerPacks:!1,getImportantUsers:!1,getPostCommentsHistory:new Set},hiddenPinnedMessages:new Map,helpHints:null,stickerPacks:new Map,stickers:new Map,favoriteStickers:[],recentStickers:[],stickersKeywords:{},contacts:{items:new Map,hasMore:!0},importantMessages:{messages:new Map,hasMore:!0},hiddenBotKeyboards:new Set,reactions:new Map,importantUsers:null},[function(){return Promise.resolve({type:"InitialData",ownerId:a})}]]};function it(e,t,r){if("TemporaryHackForResync"===t.type)return ot(e.viewer.id,e.ownerId,"edu"===e.viewer.profileType?2:0);var a,u=(0,d.createDraft)(e);switch(t.type){case"Noop":a=[];break;case"InitialData":case"InitialData_RequestCompleted":a=ct(u,t,r);break;case"EngineBatchReceived":case"EngineBatchReceived_TypingsTimedOut":a=J(u,t,r);break;case"ChannelEngineBatchReceived":a=le(u,t);break;case"QueueBatchReceived":a=function(e,t){var r=t.next;if("Reconnecting"===r.kind)return[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queue,e.next=3,r.poll();case 3:return e.t0=e.sent,e.abrupt("return",{type:"QueueBatchReceived",next:e.t0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()];if("Disconnected"===r.kind){if("manual"===r.reason)return[];var n=e.viewer.id;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queue,a=t.api,e.next=3,a.fetch("queue.subscribe",{queue_ids:"onlfriends_".concat(n)},{retries:1/0});case 3:return s=e.sent,r.connect(ke({user_id:n},s)),e.next=7,r.poll();case 7:return e.t0=e.sent,e.abrupt("return",{type:"QueueBatchReceived",next:e.t0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}var a,s=ye(r.events);try{for(s.s();!(a=s.n()).done;){var o=a.value;switch(o.entity_type){case"online":var i=y.resolveId(o.data.user_id);if(!y.isUserPeerId(i))break;o.data.online?e.onlines.add(i):e.onlines.delete(i);var u=e.peers.get(i);if(!u||"User"!==u.kind)break;y.updateLastSeen(u,1e3*o.data.last_seen,(0,I.convertPlatform)(o.data.platform,o.data.app_id));break;default:o.entity_type}}}catch(e){s.e(e)}finally{s.f()}return[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queue,e.next=3,r.poll();case 3:return e.t0=e.sent,e.abrupt("return",{type:"QueueBatchReceived",next:e.t0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(u,t);break;case"MoreConvosNeeded":case"MoreConvosNeeded_RequestCompleted":a=function(e,t,r){switch(t.type){case"MoreConvosNeeded":var n,a=t.organiser,o=e.ownerId,i="";switch(a.kind){case"filters":var u=a.filter;if(i=h.getLockId(u),e.locks.getConversations[i]||!e.organisers.filters[u].hasMore)return[];n={start_message_id:h.isLoaded(e.organisers.filters[u])?e.organisers.filters[u].boundary.minorSortId:void 0,filter:h.snakeCaseId(u),group_id:(0,p.getOwnerGroupId)(o)};break;case"folders":var d=a.id,f=a.filter;i=v.getLockId(d,f);var m=e.organisers.folders.find((function(e){return e.id===d}));if(!m)throw new Error("Не найдена папка");if(e.locks.getConversations[i]||v.isLoaded(m,f)&&!m[f].hasMore)return[];n={start_message_id:v.isLoaded(m,f)?m[f].boundaryMinorId:void 0,folder_id:m.id,filter:f,group_id:(0,p.getOwnerGroupId)(o)};break;default:(0,s.exhaustivenessCheck)(a)}return e.locks.getConversations[i]=!0,[function(){var e=(0,c.default)(l().mark((function e(r){var a,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.api,e.prev=1,n){e.next=4;break}throw new Error("Нет параметров запроса");case 4:return s=S.CONVOS_PER_PAGE,e.next=7,a.fetch("messages.getConversations",ve(ve({},n),{},{count:s}),{retries:3});case 7:return o=e.sent,e.abrupt("return",ve(ve({},t),{},{type:"MoreConvosNeeded_RequestCompleted",hasFailed:!1,requestedCount:s,hasMore:o.items.length>=s,response:o}));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",ve(ve({},t),{},{type:"MoreConvosNeeded_RequestCompleted",hasMore:!1,hasFailed:!0}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()];case"MoreConvosNeeded_RequestCompleted":var g=t.hasFailed,y=t.organiser,b=t.hasMore,w="";switch(y.kind){case"filters":w=h.getLockId(y.filter);break;case"folders":w=v.getLockId(y.id,y.filter);break;default:(0,s.exhaustivenessCheck)(y)}if(e.locks.getConversations[w]=!1,g)return[];var k=t.response;if(k){var C=(0,p.insertConvos)(e,k.items,{dangerouslyMerge:!0});switch((0,p.insertPeers)(e,{apiUsers:k.profiles||[],apiGroups:k.groups||[],apiContacts:k.contacts||[]}),y.kind){case"filters":h.push(e.organisers.filters,y.filter,C,b);break;case"folders":var _=e.organisers.folders.find((function(e){return e.id===y.id}));if(!_)return[];v.push(e.organisers.folders,y.id,y.filter,C,b);break;default:(0,s.exhaustivenessCheck)(y)}}return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"MoreChannelsNeeded":case"MoreChannelsNeeded_RequestCompleted":a=function(e,t){switch(t.type){case"MoreChannelsNeeded":var r=t.organiser,n=r.filter,a=m.getLockId(n);if(e.locks.getChannels[a]||!e.organisers.channelFilters[n].hasMore)return[];var o=e.organisers.channelFilters[n].boundary,i=o.minorSortId,u=o.channelId;e.locks.getChannels[a]=!0;var d=S.CHANNELS_PER_PAGE+1,f=m.isLoaded(e.organisers.channelFilters[n])?i:void 0;return[function(){var e=(0,c.default)(l().mark((function e(n){var a,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.api,e.prev=1,e.next=4,a.fetch("channels.get",{count:d,offset_minor_sort_id:f,offset_channel_id:u,filter:m.snakeCaseId(r.filter)},{retries:3});case 4:return o=e.sent,e.abrupt("return",ge(ge({},t),{},{type:"MoreChannelsNeeded_RequestCompleted",hasFailed:!1,response:o,hasMore:((null===(s=o.items)||void 0===s?void 0:s.length)||0)>=d}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",ge(ge({},t),{},{type:"MoreChannelsNeeded_RequestCompleted",hasFailed:!0,hasMore:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"MoreChannelsNeeded_RequestCompleted":var h=t.hasFailed,v=t.organiser,g=t.hasMore,y="";if("channelFilters"===v.kind?y=m.getLockId(v.filter):(0,s.exhaustivenessCheck)(v.kind),e.locks.getChannels[y]=!1,h)return[];var b=t.response;if(b){var w=(0,p.insertChannels)(e,{apiChannels:b.items||[],apiGroups:b.groups||[]});(0,p.insertPeers)(e,{apiUsers:b.profiles||[],apiGroups:b.groups||[],apiContacts:[]}),"channelFilters"===v.kind?m.push(e.organisers.channelFilters,v.filter,w,g):(0,s.exhaustivenessCheck)(v.kind)}return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"CacheUpdateReceived":a=function(e,t,r){var n=t.profiles,a=t.groups,s=t.conversations,o=t.mutualFriends,i=t.contacts;if((0,p.insertConvos)(e,s||[]),(0,p.insertPeers)(e,{apiUsers:n||[],apiGroups:a||[],apiContacts:i||[]}),o){var c=e.peers.get(y.resolveId(o.peerId));c&&y.updateMutualFriends(c,o.hint.map(y.resolveId),o.count)}return[]}(u,t);break;case"UserScrolledConvoHistory":case"UserScrolledConvoHistoryToMessage":case"UserScrolledConvoHistory_RequestSucceed":case"UserScrolledConvoHistory_RequestFailed":a=function(e,t){switch(t.type){case"UserScrolledConvoHistory":var r=t.peerId,n=t.direction,a=e.ownerId,o=e.convos.get(r);if(!o)return[];if("end"===n)return g.cleanup(o),[];if(e.locks.getHistory.has(r))return[];if("forward"===n&&!g.hasGap(o))return[];if("backward"===n&&!o.hasMore)return[];e.locks.getHistory.add(t.peerId);var u=S.MESSAGES_PER_PAGE;switch(n){case"forward":var d=o.afterGapCmid,f=-u;return[function(){var e=(0,c.default)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.api,e.prev=1,e.t0=r,e.next=5,n.fetch("messages.getHistory",{peer_id:r,start_cmid:d,count:u,offset:f,group_id:(0,p.getOwnerGroupId)(a)},{retries:5});case 5:return e.t1=e.sent,e.abrupt("return",{type:"UserScrolledConvoHistory_RequestSucceed",peerId:e.t0,response:e.t1});case 9:return e.prev=9,e.t2=e.catch(1),e.abrupt("return",{type:"UserScrolledConvoHistory_RequestFailed",peerId:r});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()];case"backward":var h=Math.min.apply(Math,(0,i.default)(o.persisted.keys()));return[function(){var e=(0,c.default)(l().mark((function e(t){var n,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.api,e.prev=1,e.next=4,n.fetch("messages.getHistory",{peer_id:r,start_cmid:h,count:u,offset:0,group_id:(0,p.getOwnerGroupId)(a)},{retries:5});case 4:return s=e.sent,e.abrupt("return",{type:"UserScrolledConvoHistory_RequestSucceed",peerId:r,hasMore:s.items.length>=u+0,response:s});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserScrolledConvoHistory_RequestFailed",peerId:r});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];default:return(0,s.exhaustivenessCheck)(n)}case"UserScrolledConvoHistoryToMessage":var v=t.peerId,m=t.cmid,y=e.convos.get(v),b=e.ownerId;return y?g.isCmidInIterator(y,m)?[]:(g.clearAfterGap(y),e.locks.getHistory.add(t.peerId),[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.getHistory",{peer_id:v,start_cmid:m,count:S.MESSAGES_PER_PAGE,offset:-(Math.floor(S.MESSAGES_PER_PAGE/2)-1),group_id:(0,p.getOwnerGroupId)(b)},{retries:5});case 4:return n=e.sent,e.abrupt("return",{type:"UserScrolledConvoHistory_RequestSucceed",peerId:v,hasMore:!0,response:n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserScrolledConvoHistory_RequestFailed",peerId:v});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]):[];case"UserScrolledConvoHistory_RequestSucceed":var w=t.peerId,k=t.response,C=t.hasMore;e.locks.getHistory.delete(w);var _=e.convos.get(w);if(!_)return[];var I=k.items.map((function(e){return(0,F.fromApiMessage)(e).message}));return g.insertMessages(_,I,C),(0,p.insertPeers)(e,{apiUsers:k.profiles||[],apiGroups:k.groups||[],apiContacts:[]}),[];case"UserScrolledConvoHistory_RequestFailed":return e.locks.getHistory.delete(t.peerId),[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserSeenMessage":case"UserSeenMessage_ThrottleTimedOut":case"UserSeenMessage_RequestCompleted":a=function(e,t,r){switch(t.type){case"UserSeenMessage":var n=t.cmid,a=t.peerId,o=e.convos.get(a);if(!o)return[];if(n<=o.inReadBy)return[];g.readInUntil(o,n),f.refresh(e.organisers,o);var i=e.readQueues.has(a);return e.readQueues.set(a,o.inReadBy),i?[]:[j(a)];case"UserSeenMessage_ThrottleTimedOut":var u=t.peerId,d=e.readQueues.get(u),h=e.ownerId;return d?[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.markAsRead",{peer_id:u,start_cmid:d,mark_conversation_as_read:1,group_id:(0,p.getOwnerGroupId)(h)});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",{type:"UserSeenMessage_RequestCompleted",peerId:u,readUntilCmid:d});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()]:[];case"UserSeenMessage_RequestCompleted":var v=t.peerId,m=t.readUntilCmid,y=e.readQueues.get(v);return y?m>=y?(e.readQueues.delete(v),[]):[j(v)]:[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserHitSend":case"UserHitSend_RequestCompleted":case"UserHitResendAllFailedMessages":case"ResendAllFailedMessages":case"UserHitResendFailedMessage":a=P(u,t,r);break;case"UserHitEdit":case"UserHitEdit_RequestCompleted":a=function(e,t){switch(t.type){case"UserHitEdit":var r=t.mid,n=t.text,a=t.attaches,o=t.peerId,i=t.keepForwarded,u=t.keepSnippets,d=e.convos.get(o),f=e.ownerId;if(!d)return[];e.locks.edit.add(o);var h=E.ids(a).join(",");return[function(){var e=(0,c.default)(l().mark((function e(t){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.api,s=!1,e.prev=2,e.next=5,a.fetch("messages.edit",{message_id:r,peer_id:o,message:n,attachment:0===h.length?void 0:h,group_id:(0,p.getOwnerGroupId)(f),keep_forward_messages:i?1:0,keep_snippets:u?1:0});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),s=!0;case 10:return e.abrupt("return",{type:"UserHitEdit_RequestCompleted",peerId:o,hasFailed:s});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()];case"UserHitEdit_RequestCompleted":var v=t.peerId;return t.hasFailed,e.locks.edit.delete(v),e.convos.get(v),[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserOpenedConvo":case"UserClosedConvo":case"UserOpenedConvo_ConvoRequestCompleted":case"UserOpenedConvo_HistoryRequestSucceed":case"UserOpenedConvo_HistoryRequestFailed":case"UserOpenedConvo_StickersLoadRequestSucceed":case"UserOpenedConvo_StickersLoadRequestFailed":case"UserOpenedConvo_StickersRefreshThrottleTimedOut":a=D(u,t,r);break;case"UserChangedFriendship":case"UserChangedFriendship_RequestCompleted":a=function(e,t){switch(t.type){case"UserChangedFriendship":var r=e.peers.get(t.userId);if("User"!==(null==r?void 0:r.kind)||e.locks.updateFriendshipOrMembership.has(r.id))return[];var n=r.friendship;return y.updateFriendship(r,t.change),n===r.friendship?[]:(e.locks.updateFriendshipOrMembership.add(r.id),[function(){var e=(0,c.default)(l().mark((function e(r){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,a=!1,e.prev=2,e.next=5,n.fetch("friends.".concat(t.change),{user_id:t.userId});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),a=!0;case 10:return e.abrupt("return",{type:"UserChangedFriendship_RequestCompleted",userId:t.userId,change:t.change,hasFailed:a});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()]);case"UserChangedFriendship_RequestCompleted":e.locks.updateFriendshipOrMembership.delete(t.userId);var a=e.peers.get(t.userId);return"User"!==(null==a?void 0:a.kind)||t.hasFailed&&y.updateFriendship(a,{add:"delete",delete:"add"}[t.change]),[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedGroupMembership":case"UserChangedGroupMembership_RequestCompleted":a=function(e,t){switch(t.type){case"UserChangedGroupMembership":var r=e.peers.get(t.groupId);if("Group"!==(null==r?void 0:r.kind)||e.locks.updateFriendshipOrMembership.has(r.id))return[];var n=r.membership;return y.updateMembership(r,t.change),n===r.membership?[]:(e.locks.updateFriendshipOrMembership.add(r.id),[function(){var e=(0,c.default)(l().mark((function e(r){var n,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,a="groups.".concat(t.change),s=!1,e.prev=3,e.next=6,n.fetch(a,{group_id:-t.groupId});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),s=!0;case 11:return e.abrupt("return",{type:"UserChangedGroupMembership_RequestCompleted",groupId:t.groupId,change:t.change,hasFailed:s});case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()]);case"UserChangedGroupMembership_RequestCompleted":e.locks.updateFriendshipOrMembership.delete(t.groupId);var a=e.peers.get(t.groupId);return"Group"!==(null==a?void 0:a.kind)||t.hasFailed&&y.updateMembership(a,{join:"leave",leave:"join"}[t.change]),[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedSetting":case"UserChangedSetting_RequestCompleted":a=function(e,t){var r=t.type;switch(r){case"UserChangedSetting":var n=t.setting;e.locks.settings.add(n);var a=e.viewer.settings[t.setting];return e.viewer.settings[t.setting]=t.value,[function(){var e=(0,c.default)(l().mark((function e(r){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(r,t.setting,t.value);case 3:return n=e.sent,"transcriptAutoShow"===t.setting&&1===n&&r.stats.logEvent("type_action",{type:"type_settings_changes_item",type_settings_changes_item:{type:"general",name:"voice_transcription_autoshow",value_old:String(Number(a)),value_new:String(Number(t.value)),screen:"im_web_settings"}}),e.abrupt("return",{type:"UserChangedSetting_RequestCompleted",hasFailed:1!==n,setting:t.setting,previousValue:a});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{type:"UserChangedSetting_RequestCompleted",hasFailed:!0,setting:t.setting,previousValue:a});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedSetting_RequestCompleted":var o=t.setting;return e.locks.settings.delete(o),t.hasFailed&&(e.viewer.settings[t.setting]=t.previousValue),[];default:(0,s.exhaustivenessCheck)(r)}}(u,t);break;case"SettingThemeUpdated":case"SettingThemeUpdated_RequestCompleted":a=function(e,t){var r=t.type;switch(r){case"SettingThemeUpdated":e.locks.settings.add("theme");var n=e.viewer.settings.theme;return e.viewer.settings.theme=t.value,[function(){var e=(0,c.default)(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.storage.set("theme",t.value),e.abrupt("return",{type:"SettingThemeUpdated_RequestCompleted",hasFailed:!1,previousValue:n});case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",{type:"SettingThemeUpdated_RequestCompleted",hasFailed:!0,previousValue:n});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()];case"SettingThemeUpdated_RequestCompleted":return e.locks.settings.delete("theme"),t.hasFailed&&(e.viewer.settings.theme=t.previousValue),[];default:(0,s.exhaustivenessCheck)(r)}}(u,t);break;case"UserListenedVoice":case"UserListenedVoice_RequestCompleted":a=function(e,t){switch(t.type){case"UserListenedVoice":var r=t.cmid,n=t.peerId,a=e.convos.get(n),o=null==a?void 0:a.persisted.get(r),i=e.ownerId;return"Normal"===(null==o?void 0:o.kind)&&b.canChangeVoiceListenedStatus(o)?[function(){var e=(0,c.default)(l().mark((function e(t){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.api,e.prev=1,e.next=4,a.fetch("messages.markAsListened",{peer_id:n,cmid:r,group_id:(0,p.getOwnerGroupId)(i)},{retries:1});case 4:return s=e.sent,e.abrupt("return",{type:"UserListenedVoice_RequestCompleted",hasFailed:1!==s,cmid:r,peerId:n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserListenedVoice_RequestCompleted",hasFailed:!0,cmid:r,peerId:n});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]:[];case"UserListenedVoice_RequestCompleted":if(!t.hasFailed){var u=t.cmid,d=t.peerId,f=e.convos.get(d),h=null==f?void 0:f.persisted.get(u);if(!h)return[];b.markVoiceListened(h)}return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserSeenHelpHint":case"UserSeenHelpHint_RequestCompleted":a=function(e,t){switch(t.type){case"UserSeenHelpHint":return e.helpHints&&delete e.helpHints[t.hintId],[function(){var e=(0,c.default)(l().mark((function e(r){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,e.prev=1,e.next=4,n.fetch("account.hideHelpHint",{hint_id:t.hintId},{retries:1});case 4:return a=e.sent,e.abrupt("return",{type:"UserSeenHelpHint_RequestCompleted",hasFailed:1!==a});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserSeenHelpHint_RequestCompleted",hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserSeenHelpHint_RequestCompleted":return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedConvo":case"UserChangedConvo_RequestCompleted":case"UserPinMessage":case"UserPinMessage_RequestCompleted":case"UserUnpinMessage":case"UserUnpinMessage_RequestCompleted":case"UserChangedMute":case"UserChangedMute_RequestCompleted":a=Ie(u,t,r);break;case"UserChangedMessage":case"UserChangedMessage_RequestCompleted":case"UserDeleteMessage":case"UserDeleteMessage_RequestCompleted":case"UserDeleteFailedMessage":case"UserDeleteAllFailedMessage":case"UserRestoreMessage":case"UserRestoreMessage_RequestCompleted":a=Re(u,t,r);break;case"LoadContactList":case"LoadContactList_RequestCompleted":a=function(e,t){switch(t.type){case"LoadContactList":return e.locks.contactList?[]:(e.locks.contactList=!0,[function(){var e=(0,c.default)(l().mark((function e(r){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,e.prev=1,e.next=4,n.fetch("account.getContactList",{extended:1,offset:t.offset},{retries:1});case 4:return a=e.sent,e.abrupt("return",{type:"LoadContactList_RequestCompleted",hasFailed:1!==a,contacts:a.contacts||[]});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"LoadContactList_RequestCompleted",hasFailed:!0,contacts:[]});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]);case"LoadContactList_RequestCompleted":return e.locks.contactList=!1,(0,p.insertContacts)(e,t.contacts),e.contacts.hasMore=!1,[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserHideFilter":case"UserHideFilter_Completed":case"UserUndoHideFilter":case"UserActualizeHideFilter":a=function(e,t){switch(t.type){case"UserHideFilter":if("archive"===t.kind){var r=(0,d.current)(e),n=r.organisers,a=r.convos,u=r.ownerId;return n.filters.archive.hasMore&&(e.locks.hideFilter.archive=!0),[function(){var e=(0,c.default)(l().mark((function e(t){var r,s,c,d,f,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storage,s=t.api,!n.filters.archive.hasMore){e.next=9;break}return e.next=4,s.fetch("messages.getConversations",{filter:"archive",count:n.filters.archive.totalCount,group_id:(0,p.getOwnerGroupId)(u)});case 4:d=e.sent,f=d.items,c=f.reduce((function(e,t){var r,n=t.conversation,a=null===(r=(0,G.fromApiConvo)(n))||void 0===r?void 0:r.convo;return a?[].concat((0,i.default)(e),[a]):e}),[]),e.next=10;break;case 9:c=(0,i.default)(a.values());case 10:return h=c.reduce((function(e,t){if("ChatConvo"!==t.kind||!t.unreadMentions.size)return e;var r=b.resolveCmid(Math.max.apply(Math,(0,i.default)(t.unreadMentions)));return Pe(Pe({},e),{},(0,o.default)({},t.peerId,r))}),{}),r.set("archive-manually-hidden",!0),r.set("archive-mentions-map",Pe(Pe({},r.get("archive-mentions-map")||{}),h)),e.abrupt("return",{type:"UserHideFilter_Completed",kind:"archive"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}return"all"===t.kind||"unread"===t.kind||"chats"===t.kind||"messageRequest"===t.kind?[]:(0,s.exhaustivenessCheck)(t.kind);case"UserHideFilter_Completed":return"archive"===t.kind?(e.locks.hideFilter.archive=!1,h.toggleArchiveVisibility(e.organisers.filters,!1),[]):"all"===t.kind||"unread"===t.kind||"chats"===t.kind||"messageRequest"===t.kind?[]:(0,s.exhaustivenessCheck)(t.kind);case"UserUndoHideFilter":return"archive"===t.kind?(h.toggleArchiveVisibility(e.organisers.filters,!0),[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.storage.set("archive-manually-hidden",!1),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]):"all"===t.kind||"unread"===t.kind||"chats"===t.kind||"messageRequest"===t.kind?[]:(0,s.exhaustivenessCheck)(t.kind);case"UserActualizeHideFilter":if("archive"===t.kind){var f={};e.convos.forEach((function(e){"ChatConvo"===e.kind&&e.unreadMentions.size>0&&(f[e.peerId]=b.resolveCmid(Math.max.apply(Math,(0,i.default)(e.unreadMentions))))}));var v=e.organisers.filters.archive.isHidden;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storage,!(n=r.get("archive-manually-hidden"))||v){e.next=4;break}return e.abrupt("return",{type:"UserHideFilter",kind:"archive"});case 4:if(n||!v){e.next=6;break}return e.abrupt("return",{type:"UserUndoHideFilter",kind:"archive"});case 6:if(Object.keys(f).length){e.next=8;break}return e.abrupt("return",{type:"Noop"});case 8:if(a=r.get("archive-mentions-map")||{},!Object.keys(f).every((function(e){return f[y.resolveId(Number(e))]===a[y.resolveId(Number(e))]}))){e.next=11;break}return e.abrupt("return",{type:"Noop"});case 11:return r.set("archive-mentions-map",Pe(Pe({},a),f)),e.abrupt("return",{type:"UserUndoHideFilter",kind:"archive"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}return"all"===t.kind||"unread"===t.kind||"chats"===t.kind||"messageRequest"===t.kind?[]:(0,s.exhaustivenessCheck)(t.kind);default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserAcceptedChatMessageRequest":case"UserRejectedMessageRequest":case"UserAcceptedChatMessageRequest_RequestCompleted":case"UserRejectedChatMessageRequest_RequestCompleted":case"UpdateMessageRequestsCounter":case"UpdateMessageRequestsCounter_RequestCompleted":a=function(e,t){var r=t.type,n=e.viewer.id;switch(r){case"UserAcceptedChatMessageRequest":var a=t.peerId;return e.locks.changeMessageRequest.has(a)?[]:(e.locks.changeMessageRequest.add(a),[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.acceptMessageRequest",{peer_id:a,user_id:n});case 4:return e.abrupt("return",{type:"UserAcceptedChatMessageRequest_RequestCompleted",peerId:a});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{type:"UserAcceptedChatMessageRequest_RequestCompleted",peerId:a});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()]);case"UserRejectedMessageRequest":var o=t.peerId,i=t.isSpam;if(e.locks.changeMessageRequest.has(o))return[];e.locks.changeMessageRequest.add(o);var u=e.convos.get(o),p=(0,d.current)(u);if(void 0!==u&&("MessageRequestChatConvo"===u.kind||"MessageRequestUserConvo"===u.kind||"UserConvo"===u.kind)){var v=g.fromRejectedMessageRequest(u);e.convos.set(o,v),f.refresh(e.organisers,v)}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.rejectMessageRequest",{peer_id:o,user_id:n,spam:i?1:0});case 4:return a=e.sent,e.abrupt("return",{type:"UserRejectedChatMessageRequest_RequestCompleted",hasFailed:1!==a,peerId:o,prevConvo:p});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserRejectedChatMessageRequest_RequestCompleted",hasFailed:!0,peerId:o,prevConvo:p});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserAcceptedChatMessageRequest_RequestCompleted":var m=t.peerId;return e.locks.changeMessageRequest.delete(m),[];case"UserRejectedChatMessageRequest_RequestCompleted":var y=t.prevConvo,b=t.hasFailed,w=t.peerId;return e.locks.changeMessageRequest.delete(w),b&&void 0!==y&&(e.convos.set(w,y),f.refresh(e.organisers,y)),[];case"UpdateMessageRequestsCounter":return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,n=pe.Api.resolveTrackId("account.getCounters","message_requests"),r.dangerouslyAbort(n),e.next=6,r.fetch("account.getCounters",{filter:"message_requests"},{trackId:n});case 6:return a=e.sent,s=a.message_requests,e.abrupt("return",{type:"UpdateMessageRequestsCounter_RequestCompleted",count:null!=s?s:0});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{type:"Noop"});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()];case"UpdateMessageRequestsCounter_RequestCompleted":return h.updateCounters(e.organisers.filters,{messageRequests:t.count}),[];default:(0,s.exhaustivenessCheck)(r)}}(u,t);break;case"UserChangedChatTitle":case"UserChangedChatTitle_RequestCompleted":case"UserRemovedChatPhoto":case"UserSetChatPhoto":case"UserRemovedChatPhoto_RequestCompleted":case"UserChangedChatSettings":case"UserChangedChatSettings_RequestCompleted":a=function(e,t){var r=t.type;switch(r){case"UserChangedChatTitle":var n=t.peerId,a=t.title,o=y.toRealId(n),i=e.peers.get(n),u=e.ownerId;if(!i||"Chat"!==i.kind)return[];var d=i.title;return y.updateChatInfo(i,{title:a}),[function(){var e=(0,c.default)(l().mark((function e(t){var r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.editChat",{chat_id:o,title:a,group_id:(0,p.getOwnerGroupId)(u)},{retries:1});case 4:return s=e.sent,e.abrupt("return",{type:"UserChangedChatTitle_RequestCompleted",hasFailed:1!==s,peerId:n,title:1!==s?d:a});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedChatTitle_RequestCompleted",hasFailed:!0,peerId:n,title:d});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedChatTitle_RequestCompleted":var f=t.peerId,h=t.title,v=t.hasFailed,m=e.peers.get(f);return m&&"Chat"===m.kind&&v?(y.updateChatInfo(m,{title:h}),[]):[];case"UserSetChatPhoto":var b,w,k,C=t.peerId,_=t.photo,I=e.peers.get(C);return I&&"Chat"===I.kind?(y.updateChatInfo(I,{photo50:null===(b=E.preview(_,50,50))||void 0===b?void 0:b.url,photo100:null===(w=E.preview(_,100,100))||void 0===w?void 0:w.url,photo200:null===(k=E.preview(_,200,200))||void 0===k?void 0:k.url}),[]):[];case"UserRemovedChatPhoto":var S=t.peerId,O=y.toRealId(S),x=e.peers.get(S);return x&&"Chat"===x.kind?(y.updateChatInfo(x,{photo50:void 0,photo100:void 0,photo200:void 0}),[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.deleteChatPhoto",{chat_id:O},{retries:1});case 4:return n=e.sent,e.abrupt("return",{type:"UserRemovedChatPhoto_RequestCompleted",hasFailed:1!==n,peerId:S});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserRemovedChatPhoto_RequestCompleted",hasFailed:!0,peerId:S});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]):[];case"UserRemovedChatPhoto_RequestCompleted":return[];case"UserChangedChatSettings":var R=t.peerId,A=t.isService,M=t.permissions,P=y.toRealId(R),U=e.ownerId;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.editChat",{chat_id:P,is_service:A?1:0,permissions:JSON.stringify(M),group_id:(0,p.getOwnerGroupId)(U)},{retries:1});case 4:return n=e.sent,e.abrupt("return",{type:"UserChangedChatSettings_RequestCompleted",hasFailed:1!==n,permissions:M,peerId:R,isService:A});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedChatSettings_RequestCompleted",hasFailed:!0,permissions:M,peerId:R,isService:A});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedChatSettings_RequestCompleted":var j=t.peerId,F=t.isService,T=t.permissions;if(t.hasFailed)return[];var N=e.convos.get(j);return N&&"ChatConvo"===N.kind?(g.setChatPermissions(N,T,F),[]):[];default:(0,s.exhaustivenessCheck)(r)}}(u,t);break;case"UserOpenedConvoProfile":case"UserOpenedConvoProfile_ConvoRequestCompleted":case"UserOpenedConvoProfile_InviteLinksCompleted":a=Ne(u,t,r);break;case"LoadImportantMessages":case"LoadImportantMessages_RequestCompleted":case"UserClosedImportantMessages":a=function(e,t,r){switch(t.type){case"LoadImportantMessages":var n=20*Math.floor(e.importantMessages.messages.size/20),a=e.ownerId;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.getImportantMessages",{count:20,offset:n,group_id:(0,p.getOwnerGroupId)(a)});case 4:return s=e.sent,e.abrupt("return",{type:"LoadImportantMessages_RequestCompleted",hasFailed:!1,response:s});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"Noop"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"LoadImportantMessages_RequestCompleted":var o,i,u=t.response,d=u.messages,f=u.profiles,h=u.groups,v=u.conversations;return((null===(o=d.items)||void 0===o?void 0:o.length)||0)<20&&(e.importantMessages.hasMore=!1),(0,p.insertConvos)(e,v||[],{dangerouslyMerge:!0}),(0,p.insertPeers)(e,{apiUsers:f||[],apiGroups:h||[],apiContacts:[]}),null===(i=d.items)||void 0===i||i.forEach((function(t){var r=(0,F.fromApiMessage)(t).message;"Normal"===r.kind&&e.importantMessages.messages.set(Oe(r.peerId,r.cmid),r)})),[];case"UserClosedImportantMessages":return e.importantMessages.messages.clear(),e.importantMessages.hasMore=!0,[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserCreatedFolder":case"UserCreatedFolder_CreateRequestCompleted":a=function(e,t,r){switch(t.type){case"UserCreatedFolder":var n=t.name,a=t.peerIds;return e.locks.newFolder?[]:(e.locks.newFolder=!0,[function(){var e=(0,c.default)(l().mark((function e(t){var r,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.createFolder",{name:n,included_peer_ids:a.join(",")});case 4:return s=e.sent,e.abrupt("return",{type:"UserCreatedFolder_CreateRequestCompleted",hasFailed:!1,peerIds:a,name:n,folderId:v.resolveId(s.folder_id)});case 8:return e.prev=8,e.t0=e.catch(1),e.t0 instanceof pe.RequestError&&(o=e.t0.code),e.abrupt("return",{type:"UserCreatedFolder_CreateRequestCompleted",hasFailed:!0,name:n,error:o});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]);case"UserCreatedFolder_CreateRequestCompleted":var o=t.hasFailed;if(e.locks.newFolder=!1,o){if(t.error);else if(s.isDev)throw new Error("Не удалось создать папку");return[]}var i=(0,p.insertFolders)(e,[{id:t.folderId,name:t.name}]),u=(0,p.getConvosByIds)(e,t.peerIds);return(0,p.addConvosToFolder)(e,t.folderId,u),i[0]&&v.setHasMore(i[0],"all",!1),[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserUpdatedFolder":case"UserUpdatedFolder_UpdateRequestCompleted":a=qe(u,t);break;case"UserDeletedFolder":case"UserDeletedFolder_DeleteRequestCompleted":a=function(e,t,r){switch(t.type){case"UserDeletedFolder":var n=t.folderId;if(e.locks.deleteFolder.has(n))return[];e.locks.deleteFolder.add(n),v.deleteFolder(e.organisers.folders,n);var a,o=Le(e.convos.values());try{for(o.s();!(a=o.n()).done;){var i=a.value;g.removeFolder(i,n)}}catch(e){o.e(e)}finally{o.f()}return[function(){var e=(0,c.default)(l().mark((function e(t){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.deleteFolder",{folder_id:n});case 4:return a=e.sent,e.abrupt("return",{type:"UserDeletedFolder_DeleteRequestCompleted",hasFailed:1!==a,folderId:n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserDeletedFolder_DeleteRequestCompleted",hasFailed:!0,folderId:n});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserDeletedFolder_DeleteRequestCompleted":var u=t.hasFailed,d=t.folderId;if(e.locks.deleteFolder.delete(d),u&&s.isDev)throw new Error("Не удалось удалить папку");return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserReorderedFolders":case"UserReorderedFolders_ReorderRequestCompleted":a=function(e,t,r){switch(t.type){case"UserReorderedFolders":var n=t.order;return e.locks.reorderFolders?[]:(e.locks.reorderFolders=!0,v.reorderFolders(e.organisers.folders,n),[function(){var e=(0,c.default)(l().mark((function e(t){var r,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.reorderFolders",{folder_ids:n.join(",")});case 4:return a=e.sent,e.abrupt("return",{type:"UserReorderedFolders_ReorderRequestCompleted",hasFailed:1!==a,order:n});case 8:return e.prev=8,e.t0=e.catch(1),e.t0 instanceof pe.RequestError&&(s=e.t0.code),e.abrupt("return",{type:"UserReorderedFolders_ReorderRequestCompleted",hasFailed:!0,error:s,order:n});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()]);case"UserReorderedFolders_ReorderRequestCompleted":var a=t.hasFailed;if(e.locks.reorderFolders=!1,a){if(t.error);else if(s.isDev)throw new Error("Не удалось изменить порядок папок");return[]}return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"StickersAddToFavorite":case"StickersAddToFavorite__RequestCompleted":case"StickersRemoveFromFavorite":case"StickersRemoveFromFavorite__RequestCompleted":case"StickerAddToRecent":a=R(u,t,r);break;case"UserScrolledChannelHistory":case"UserScrolledChannelHistory_RequestSucceed":case"UserScrolledChannelHistory_RequestFailed":a=function(e,t){switch(t.type){case"UserScrolledChannelHistory":var r=t.channelId,n=t.direction,a=t.startCmid,o=t.possibleSkipped,i=e.channels.get(r);if(!i)return[];if(e.locks.getChannelHistory.has(r))return[];e.locks.getChannelHistory.add(r);var u,d=Math.min(S.POSTS_PER_PAGE,o||S.POSTS_PER_PAGE)+2;switch(n){case"backward":u=0;break;case"forward":u=1-d;break;case"around":d=S.POSTS_PER_PAGE,u=-Math.floor(d/2),i.inReadCmid===a&&(u=Math.max(-i.unreadCount,u));break;default:(0,s.exhaustivenessCheck)(n)}return[function(){var e=(0,c.default)(l().mark((function e(t){var o,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.api,e.prev=1,e.next=4,o.fetch("channels.getHistory",{channel_id:r,start_cmid:Math.max(a,1),count:d,offset:u},{retries:5});case 4:i=e.sent,e.t0=n,e.next="backward"===e.t0||"around"===e.t0?8:"forward"===e.t0?10:12;break;case 8:return c=d===i.items.length,e.abrupt("break",13);case 10:return c=!0,e.abrupt("break",13);case 12:(0,s.exhaustivenessCheck)(n);case 13:return e.abrupt("return",{type:"UserScrolledChannelHistory_RequestSucceed",channelId:r,response:i,hasMore:c});case 16:return e.prev=16,e.t1=e.catch(1),e.abrupt("return",{type:"UserScrolledChannelHistory_RequestFailed",channelId:r});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()];case"UserScrolledChannelHistory_RequestSucceed":var f=t.channelId,h=t.response,v=t.hasMore;e.locks.getChannelHistory.delete(f);var m=e.channels.get(f);if(!m)return[];var g=[];return h.items.reverse().forEach((function(t,r,n){var a=(0,se.fromApiPost)(t),s=a.post;a.reactions.forEach((function(t){e.reactions.set(t.id,t)})),0===r&&s.cmid>1&&v&&g.push({kind:"GapItem",fromCmid:C.resolveCmid(1),toCmid:C.resolveCmid(s.cmid-1)}),g.push({kind:"PostItem",post:s});var o=m.history[m.history.length-1];if(r===n.length-1&&o){var i="GapItem"===o.kind?o.toCmid:o.post.cmid;s.cmid<i&&g.push({kind:"GapItem",fromCmid:C.resolveCmid(s.cmid+1),toCmid:C.resolveCmid(i-("GapItem"===o.kind?0:1))})}})),k.insertPosts(m,g),(0,p.insertPeers)(e,{apiUsers:h.profiles||[],apiGroups:h.groups||[],apiContacts:[]}),[];case"UserScrolledChannelHistory_RequestFailed":var y=t.channelId;return e.locks.getChannelHistory.delete(y),[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserOpenedChannel":case"UserClosedChannel":case"UserOpenedChannel_ChannelRequestCompleted":a=function(e,t,r){switch(t.type){case"UserOpenedChannel":var n=t.channelId;return e.channels.get(n)?[]:[function(){var e=(0,c.default)(l().mark((function e(t){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("channels.getById",{channel_ids:n.toString()},{retries:3});case 4:return a=e.sent,e.abrupt("return",{type:"UserOpenedChannel_ChannelRequestCompleted",channelId:n,response:a,hasFailed:!1});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserOpenedChannel_ChannelRequestCompleted",channelId:n,hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserOpenedChannel_ChannelRequestCompleted":var a=t.hasFailed,o=t.channelId,i=t.response;if(a){if(s.isDev)throw new Error("Не удалось загрузить диалог");return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.router.replace({kind:"ChannelsListRoute"}),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}if(!i)return[];(0,p.insertChannels)(e,{apiChannels:i.items||[],apiGroups:i.groups||[]});var u=e.channels.get(o);if(!u){if(s.isDev)throw new Error("Диалог не был найден");return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.router.replace({kind:"ChannelsListRoute"}),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}return u.isMember&&f.refreshChannels(e.organisers,u),[];case"UserClosedChannel":return[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedChatMember":case"UserChangedChatMember_RequestCompleted":a=Be(u,t);break;case"UserRequestChatInvitationLink":case"UserRequestChatInvitationLink_RequestCompleted":case"UserResetChatInvitationLink":case"UserResetChatInvitationLink_RequestCompleted":a=function(e,t){switch(t.type){case"UserRequestChatInvitationLink":var r=t.peerId,n=t.isLinkWithHistory;return[function(){var e=(0,c.default)(l().mark((function e(t){var a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.api,e.prev=1,e.next=4,a.fetch("messages.getInviteLink",{peer_id:r,reset:0,visible_messages_count:n?250:0},{retries:1});case 4:return s=e.sent,e.abrupt("return",{type:"UserRequestChatInvitationLink_RequestCompleted",hasFailed:!s.link,link:s.link,isLinkWithHistory:n,peerId:r});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"UserRequestChatInvitationLink_RequestCompleted",hasFailed:!0,isLinkWithHistory:n,peerId:r});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"UserRequestChatInvitationLink_RequestCompleted":var a=t.peerId,o=t.link,i=t.isLinkWithHistory,u=t.hasFailed,d=e.convos.get(a);return!u&&d&&"ChatConvo"===d.kind&&o?(g.replaceInviteLinks(d,je(je({},d.inviteLinks),i?{withHistory:o}:{noHistory:o})),[]):[];case"UserResetChatInvitationLink":var p=t.peerId;return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.getInviteLink",{peer_id:p,reset:1,visible_messages_count:250},{retries:1});case 4:return n=e.sent,e.next=7,r.fetch("messages.getInviteLink",{peer_id:p,reset:1,visible_messages_count:0},{retries:1});case 7:return a=e.sent,e.abrupt("return",{type:"UserResetChatInvitationLink_RequestCompleted",hasFailed:!n.link||!a.link,links:{withHistory:n.link,noHistory:a.link},peerId:p});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{type:"UserResetChatInvitationLink_RequestCompleted",hasFailed:!0,peerId:p,links:{}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()];case"UserResetChatInvitationLink_RequestCompleted":var f=t.peerId,h=t.links,v=t.hasFailed,m=e.convos.get(f);return v||"ChatConvo"!==(null==m?void 0:m.kind)?[]:h.noHistory&&h.withHistory?(g.replaceInviteLinks(m,h),[]):[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"LoadChatMembers":case"LoadChatMembers_RequestComplete":a=ze(u,t);break;case"UserChangedChannel":case"UserChangedChannel_RequestCompleted":a=Ve(u,t,r);break;case"UserSeenPost":case"UserSeenPost_ThrottleTimedOut":case"UserSeenPost_RequestCompleted":a=function(e,t,r){switch(t.type){case"UserSeenPost":var n=t.cmid,a=t.channelId,o=e.channels.get(a);if(!o)return[];if(n<=o.inReadCmid)return[];k.readUntil(o,n),f.refreshChannels(e.organisers,o);var i=e.channelReadQueues.has(a);return e.channelReadQueues.set(a,o.inReadCmid),i?[]:[Ke(a)];case"UserSeenPost_ThrottleTimedOut":var u=t.channelId,d=e.channelReadQueues.get(u);return d?[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("channels.markAsRead",{channel_id:u,last_read_cmid:d});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",{type:"UserSeenPost_RequestCompleted",channelId:u,readUntilCmid:d});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()]:[];case"UserSeenPost_RequestCompleted":var p=t.channelId,h=t.readUntilCmid,v=e.channelReadQueues.get(p);return v?h>=v?(e.channelReadQueues.delete(p),[]):[Ke(p)]:[];default:return(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedPostLike":case"UserChangedPostLike_RequestCompleted":a=Ye(u,t,r);break;case"LoadImportantUsers":case"LoadImportantUsers_RequestCompleted":a=et.handler(u,t,r);break;case"UserLoadedCommentsHistory":case"UserLoadedCommentsHistory_RequestSucceed":case"UserLoadedCommentsHistory_RequestFailed":a=tt.handler(u,t,r);break;case"ChannelsOnboardingDone":case"ChannelsOnboardingDone_RequestSucceeded":case"ChannelsOnboardingDone_RequestFailed":a=function(e,t){switch(t.type){case"ChannelsOnboardingDone":return 0===t.pickedChannelsIds.length?(m.push(e.organisers.channelFilters,"all",[],!1),[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.next=3,r.fetch("account.hideHelpHint",{hint_id:"im:channels_onboarding"},{retries:1/0});case 3:return e.abrupt("return",{type:"Noop"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]):[function(){var e=(0,c.default)(l().mark((function e(r){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,e.prev=1,e.next=4,n.fetch("channels.unarchive",{channel_ids:t.pickedChannelsIds.join(",")||""});case 4:return a=e.sent,e.abrupt("return",{type:"ChannelsOnboardingDone_RequestSucceeded",responseChannels:a});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"ChannelsOnboardingDone_RequestFailed"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"ChannelsOnboardingDone_RequestSucceeded":var r=(0,p.insertChannels)(e,{apiChannels:t.responseChannels.succeeded,apiGroups:t.responseChannels.groups});return m.push(e.organisers.channelFilters,"all",r,!1),[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.next=3,r.fetch("account.hideHelpHint",{hint_id:"im:channels_onboarding"},{retries:1/0});case 3:return e.abrupt("return",{type:"Noop"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()];case"ChannelsOnboardingDone_RequestFailed":return[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"UserChangedComposerDraft":case"UserClearedComposerDraft":case"UpdateComposerDraftOnMessageDelete":a=function(e,t){var r,n=t.peerId,a=null!==(r=e.composerDrafts[n])&&void 0!==r?r:w.DEFAULT_DRAFT,o=w.DEFAULT_DRAFT;switch(t.type){case"UserChangedComposerDraft":switch(t.kind){case"default":var i=t.attaches,u=t.text;o=nt(nt({},a),{},{text:null!=u?u:a.text,attaches:i||a.attaches});break;case"editing":var p=t.editing;o={editing:p,text:b.toPlainText(p,{multiline:!0}),attaches:p.attaches,forward:p.forwardedMessages&&{kind:"message",items:p.forwardedMessages},reply:p.replyMessage};break;case"forward":var f=t.forward;o=nt(nt({},f&&a.editing?w.DEFAULT_DRAFT:a),{},{reply:void 0,forward:f});break;case"reply":var h=t.reply;o=nt(nt({},h&&a.editing?w.DEFAULT_DRAFT:a),{},{forward:void 0,reply:h});break;default:(0,s.exhaustivenessCheck)(t)}break;case"UserClearedComposerDraft":break;case"UpdateComposerDraftOnMessageDelete":var v=a.editing;void 0===v||t.deletedMessagesCmid.includes(v.cmid)||(o=a);break;default:(0,s.exhaustivenessCheck)(t)}o.text||o.forward||o.reply||o.editing||0!==Object.keys(o.attaches).length?e.composerDrafts[n]=o:delete e.composerDrafts[n];var m=(0,d.current)(e).composerDrafts;return[function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.storage.set("drafts",m),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(u,t);break;case"ResetUpdatesCounter":case"ResetUpdatesCounter_RequestCompleted":a=function(e,t){switch(t.type){case"ResetUpdatesCounter":return[function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,e.prev=1,e.next=4,r.fetch("messages.resetUpdatesCounter",{});case 4:return n=e.sent,e.abrupt("return",{type:"ResetUpdatesCounter_RequestCompleted",hasFailed:!n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{type:"ResetUpdatesCounter_RequestCompleted",hasFailed:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()];case"ResetUpdatesCounter_RequestCompleted":return[];default:(0,s.exhaustivenessCheck)(t)}}(0,t);break;case"UserChangedMessageAttachment":case"UserChangedMessageAttachment_RequestCompleted":a=function(e,t){switch(t.type){case"UserChangedMessageAttachment":return[function(){var e=(0,c.default)(l().mark((function e(r){var n,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.api,e.prev=1,e.next=4,n.fetch("messages.getByConversationMessageId",{peer_id:t.peerId,conversation_message_ids:t.cmid.toString(),group_id:t.groupId||0},{retries:3});case 4:if(a=e.sent,s=a.items[0]){e.next=8;break}return e.abrupt("return",{type:"UserChangedMessageAttachment_RequestCompleted",hasFailed:!0});case 8:return e.abrupt("return",{type:"UserChangedMessageAttachment_RequestCompleted",hasFailed:!1,peerId:t.peerId,apiMessage:s});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{type:"UserChangedMessageAttachment_RequestCompleted",hasFailed:!0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()];case"UserChangedMessageAttachment_RequestCompleted":if(t.hasFailed)return[];var r=(0,F.fromApiMessage)(t.apiMessage),n=r.message,a=r.mentions,o=e.convos.get(t.peerId);return o?(g.replaceMessage(o,n,a.hasDirect||a.hasMass),[]):[];default:(0,s.exhaustivenessCheck)(t)}}(u,t);break;case"ImportContact":a=function(e,t){return(0,p.insertPeers)(e,{apiUsers:[t.profile],apiGroups:[],apiContacts:[t.contact]}),[]}(u,t);break;default:(0,s.exhaustivenessCheck)(t)}u.convos.set(y.resolveId(),g.safeGet(e.convos,y.resolveId())),u.peers.set(y.resolveId(),y.safeGet(e.peers,y.resolveId())),u.channels.set(k.resolveId(0),k.safeGet(e.channels,k.resolveId(0)));var _=(0,d.finishDraft)(u);if(e.hiddenPinnedMessages!==_.hiddenPinnedMessages&&a.push(function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.storage.set("hidden-pinned-messages",Array.from(_.hiddenPinnedMessages.entries()).reduce((function(e,t){var r=(0,n.default)(t,2),a=r[0],s=r[1];return e[a]=s,e}),{})),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.hiddenBotKeyboards!==_.hiddenBotKeyboards&&a.push(function(){var e=(0,c.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.storage.set("hidden-bot-keyboards",_.hiddenBotKeyboards),e.abrupt("return",{type:"Noop"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_.organisers.filters.archive.isHidden&&"Noop"!==t.type&&"UserUndoHideFilter"!==t.type&&"visible"===document.visibilityState){var O={};_.convos.forEach((function(e){"ChatConvo"===e.kind&&e.unreadMentions.size>0&&(O[e.peerId]=b.resolveCmid(Math.max.apply(Math,(0,i.default)(e.unreadMentions))))})),a.push(function(){var e=(0,c.default)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storage,Object.keys(O).length){e.next=3;break}return e.abrupt("return",{type:"Noop"});case 3:if(n=r.get("archive-mentions-map")||{},!Object.keys(O).every((function(e){return O[y.resolveId(Number(e))]===n[y.resolveId(Number(e))]}))){e.next=6;break}return e.abrupt("return",{type:"Noop"});case 6:return r.set("archive-mentions-map",st(st({},n),O)),e.abrupt("return",{type:"UserUndoHideFilter",kind:"archive"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return[_,a]}var ct=function(e,t,r){switch(t.type){case"InitialData":var a=t.ownerId,s=a?(0,p.getOwnerGroupId)(a):0,o=e.viewer.id;return 0===o?[]:[function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.storage).identify(o),a=null!==(r=n.get("theme"))&&void 0!==r?r:"system",e.abrupt("return",{type:"SettingThemeUpdated",value:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,c.default)(l().mark((function e(t){var n,a,i,c,u,d,p,f,h,v,m,g,y,b,k,C,_,I,O,x,E,R,A,M,P,U,j,F,T,N;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.engine,h=t.channelEngine,v=t.api,m=t.storage,g=t.player,e.next=3,v.fetchMany({"messages.getLongPollServer":{need_pts:1,lp_version:f.version,group_id:s}},{retries:1/0});case 3:if(y=e.sent,(b=y["messages.getLongPollServer"]).pts){e.next=7;break}throw new Error("Отсутствует pts");case 7:if(f.connect(st(st({},b),{},{pts:b.pts})),!h||!r.me_channels){e.next=13;break}return e.next=11,v.fetch("channels.getLongPollServer",{},{retries:1/0});case 11:k=e.sent,h.connect(k);case 13:if(C={"messages.getConversations":{count:S.CONVOS_PER_PAGE,group_id:s},"messages.getConversationsById":{peer_ids:o.toString(),group_id:s},"messages.getFolders":{},"users.get":{},"groups.getById":{group_ids:String(s)},"account.getCounters":{filter:"all"},"account.getInfo":{fields:["messages_recommendation_list_hidden","show_only_not_muted_messages","messages_multiline_input","messages_auto_unarchive","messages_transcript_auto_show"].join(",")},"account.getHelpHints":{},"account.getMulti":{fields:"profile_type,photo_100"}},!h||!r.me_channels){e.next=21;break}return e.next=17,v.fetchMany(st(st({},C),{},{"channels.get":{count:S.CHANNELS_PER_PAGE,filter:"all"}}),{retries:1/0});case 17:_=e.sent,I=_["channels.get"],e.next=24;break;case 21:return e.next=23,v.fetchMany(C,{retries:1/0});case 23:_=e.sent;case 24:if(O=_["users.get"],x=_["groups.getById"],E=_["messages.getConversations"],R=_["messages.getConversationsById"],A=_["account.getCounters"],M=_["account.getInfo"],P=_["account.getHelpHints"],U=_["messages.getFolders"],j=_["account.getMulti"],F=null===(n=x.groups)||void 0===n?void 0:n[0],T=O[0]){e.next=37;break}throw new Error("Не удалось получить текущего пользователя");case 37:return m.identify(o),g.init(o),N={type:"InitialData_RequestCompleted",responseViewer:T,responseMultiAccount:j,responseGroup:F,responseConvos:E,responseViewerConvo:R,hasMoreConvos:E.items.length>=S.CONVOS_PER_PAGE,folders:U,responseChannels:I,hasMoreChannels:((null===(a=I)||void 0===a||null===(i=a.items)||void 0===i?void 0:i.length)||0)>=S.CHANNELS_PER_PAGE,unreadCount:{messages:A.messages||0,messagesUnmuted:A.messages_unread_unmuted||0,archive:A.messages_archive_unread||0,archiveMentions:A.messages_archive_mentions_count||0,archiveTotal:A.messages_archive||0,messageRequest:A.message_requests||0,businessNotify:A.business_notify||0,businessNotifyTotal:A.business_notify_all||0,channelsTotal:(null===(c=A.channels)||void 0===c?void 0:c.total_count)||0,folders:A.messages_folders||[]},convoLp:{pts:b.pts},channelLp:k&&{ts:k.ts},hiddenPinnedMessages:m.get("hidden-pinned-messages"),hiddenBotKeyboards:m.get("hidden-bot-keyboards"),archiveManuallyHidden:!!m.get("archive-manually-hidden"),composerDrafts:w.deleteDraftsWithKind(m.get("drafts")||{}),userSettings:{ctrSubmit:Boolean(M.messages_multiline_input),soundNotifications:null===(u=m.get("settings-sound-notifications-on"))||void 0===u||u,showRecommendations:!Boolean(M.messages_recommendation_list_hidden),countOnlyNotMuted:Boolean(M.show_only_not_muted_messages),autoUnarchive:Boolean(M.messages_auto_unarchive),transcriptAutoShow:Boolean(M.messages_transcript_auto_show),theme:null!==(d=m.get("theme"))&&void 0!==d?d:"system",verticalFoldersView:null!==(p=m.get("folders-view-vertical"))&&void 0!==p&&p},helpHints:ut(P)},e.abrupt("return",N);case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()];case"InitialData_RequestCompleted":var u,d,f;e.convoConn={status:"running",pts:t.convoLp.pts},t.channelLp&&(e.channelConn={status:"running",ts:t.channelLp.ts}),e.hiddenPinnedMessages=new Map(Object.entries(t.hiddenPinnedMessages||{}).map((function(e){var t=(0,n.default)(e,2),r=t[0],a=t[1];return[y.resolveId(parseInt(r)),b.resolveCmid(a)]}))),e.hiddenBotKeyboards=t.hiddenBotKeyboards||new Set,e.composerDrafts=t.composerDrafts;var g=(0,p.insertConvos)(e,t.responseConvos.items);if((0,p.insertConvos)(e,t.responseViewerConvo.items),e.organisers.filters.archive.isHidden=!!t.archiveManuallyHidden,h.push(e.organisers.filters,"all",g,t.hasMoreConvos),0===t.unreadCount.archiveTotal&&h.push(e.organisers.filters,"archive",[],!1),0===t.unreadCount.messageRequest&&h.push(e.organisers.filters,"messageRequest",[],!1),h.updateCounters(e.organisers.filters,{unread:t.unreadCount.messages,unreadUnmuted:t.unreadCount.messagesUnmuted,headerNotMutedUnread:0,archive:t.unreadCount.archive,archiveMentions:t.unreadCount.archiveMentions,archiveTotal:t.unreadCount.archiveTotal,messageRequests:t.unreadCount.messageRequest}),(0,p.insertFolders)(e,t.folders.items),null===(u=t.unreadCount.folders)||void 0===u||u.forEach((function(t){v.setUnreadCounters(e.organisers.folders,v.resolveId(t.folder_id),t.total_count,t.unmuted_count)})),t.responseChannels){var k=(0,p.insertChannels)(e,{apiChannels:t.responseChannels.items||[],apiGroups:t.responseChannels.groups||[]});m.push(e.organisers.channelFilters,"all",k,t.hasMoreChannels),m.updateCounters(e.organisers.channelFilters,{unread:t.unreadCount.channelsTotal,archiveTotal:0})}(0,p.insertPeers)(e,{apiUsers:[].concat((0,i.default)(t.responseConvos.profiles||[]),(0,i.default)((null===(d=t.responseChannels)||void 0===d?void 0:d.profiles)||[])),apiGroups:[].concat((0,i.default)(t.responseConvos.groups||[]),(0,i.default)((null===(f=t.responseChannels)||void 0===f?void 0:f.groups)||[])),apiContacts:(0,i.default)(t.responseConvos.contacts||[])});var C=(0,I.fromApiUser)(t.responseViewer).user;e.peers.set(C.id,C),e.viewer.id=C.id,e.viewer.accounts=t.responseMultiAccount.items.map(O);var _=t.responseGroup?(0,I.fromApiGroup)(t.responseGroup):void 0;return _&&e.peers.set(_.id,_),e.ownerId=_?_.id:C.id,t.userSettings&&(e.viewer.settings=t.userSettings),e.helpHints=t.helpHints,e.convoConn.status="running",[function(){var e=(0,c.default)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.engine,e.next=3,r.poll();case 3:return e.t0=e.sent,e.t1={kind:"FromEngine",next:e.t0},e.abrupt("return",{type:"EngineBatchReceived",variant:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,c.default)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.channelEngine)&&r.me_channels){e.next=3;break}return e.abrupt("return",{type:"Noop"});case 3:return e.next=5,n.poll();case 5:return e.t0=e.sent,e.t1={kind:"FromChannelEngine",next:e.t0},e.abrupt("return",{type:"ChannelEngineBatchReceived",variant:e.t1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,c.default)(l().mark((function e(t){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.api,n=t.queue,e.next=3,r.fetch("queue.subscribe",{queue_ids:"onlfriends_".concat(C.id)},{retries:1/0});case 3:return a=e.sent,n.connect(st({user_id:C.id},a)),e.next=7,n.poll();case 7:return e.t0=e.sent,e.abrupt("return",{type:"QueueBatchReceived",next:e.t0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,c.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"LoadImportantUsers"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()];default:return[]}};function ut(e){if(0===e.count)return null;var t=e.items.reduce((function(e,t){var r=t.id;switch(r){case"im:transcript_autoshow_setting":e["im:transcript_autoshow_setting"]={id:r};break;case"im:channels_onboarding":e["im:channels_onboarding"]={id:r};break;default:}return e}),{});return 0===Object.keys(t).length?null:t}function lt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,u=!1,l=s.isDev&&a(),d=[],p=r(o,i,c),f=(0,n.default)(p,2),h=f[0],v=f[1];l&&l.init(h);var m=function(e){return d.push(e),function(){d=d.filter((function(t){return t!==e}))}},g=function r(a){if(!u)throw new Error("Стор еще не был активирован. Нужно вызвать store.start().");var s=it(h,a,t),o=(0,n.default)(s,2),i=o[0],c=o[1];l&&l.send(a,i);var p=h!==i;if(h=i,ft(r,c,e),p){var f,v=lt(d);try{for(v.s();!(f=v.n()).done;){(0,f.value)(i)}}catch(e){v.e(e)}finally{v.f()}}};return{start:function(){u||(u=!0,ft(g,v,e))},dispatch:g,subscribe:m,featureFlags:t,getState:function(){return h}}}function ft(e,t,r){0!==t.length&&setTimeout((function(){var n,a=lt(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;"function"==typeof s&&s(r).then(e).catch((function(e){r.logger.error("Необработанная ошибка редьюсера",e)}))}}catch(e){a.e(e)}finally{a.f()}}))}},7388:(e,t,r)=>{"use strict";r.d(t,{initConfig:()=>a});var n=r(10746);function a(){(0,n.enableMapSet)(),(0,n.setAutoFreeze)(!1);var e=r(64623),t=r(59005);e.shim(),t.shim()}},79324:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{default:()=>n})},81944:(e,t,r)=>{"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}r.d(t,{default:()=>n})},92993:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(97433);function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,n.default)(e,t)}},4604:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(31989),a=r(79324);function s(e,t){if(t&&("object"===(0,n.default)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.default)(e)}},97433:(e,t,r)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.d(t,{default:()=>n})},6978:(e,t,r)=>{"use strict";r.d(t,{API_ERROR_UNKNOWN:()=>n,API_ERROR_AUTH:()=>a,API_ERROR_CAPTCHA:()=>s,API_ERROR_ACCESS:()=>o,API_ERROR_PARAM:()=>i,API_ERROR_LIMITS:()=>c,API_ERROR_MESSAGES_CHAT_USER_NO_ACCESS:()=>u,API_ERROR_MESSAGES_CHAT_NOT_ADMIN:()=>l,API_ERROR_MESSAGES_GROUP_PEER_ACCESS:()=>d,API_ERROR_MESSAGES_CONTACT_NOT_FOUND:()=>p,API_ERROR_MESSAGES_MESSAGE_REQUEST_ALREADY_SENT:()=>f,API_ERROR_MESSAGES_CHAT_DISABLED:()=>h,API_ERROR_MESSAGES_CHAT_UNSUPPORTED:()=>v,API_ERROR_MESSAGES_MEMBER_ACCESS_TO_GROUP_DENIED:()=>m,API_ERROR_MESSAGES_CHAT_MEMBER_NOT_STAFF:()=>g});const n=1,a=5,s=14,o=15,i=100,c=103,u=917,l=925,d=932,p=936,f=939,h=945,v=946,m=947,g=967},40399:(e,t,r)=>{"use strict";var n=r(29120),a=r(91521),s=r(70317),o=r(99739),i=r(4840),c=r(69058);e.exports=function(e){var t,r=c(this),u=i(s(r,"length"));if(!o(e))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(t=arguments[1]);var l=n(r,0);return a(l,r,u,0,1,e,t),l}},64623:(e,t,r)=>{"use strict";var n=r(4289),a=r(55559),s=r(40399),o=r(89739),i=o(),c=r(36967),u=a(i);n(u,{getPolyfill:o,implementation:s,shim:c}),e.exports=u},89739:(e,t,r)=>{"use strict";var n=r(40399);e.exports=function(){return Array.prototype.flatMap||n}},36967:(e,t,r)=>{"use strict";var n=r(4289),a=r(97272),s=r(89739);e.exports=function(){var e=s();return n(Array.prototype,{flatMap:e},{flatMap:function(){return Array.prototype.flatMap!==e}}),a("flatMap"),e}},87496:(e,t,r)=>{"use strict";var n=r(4840),a=r(60561),s=r(86378),o=r(21924)("String.prototype.slice");e.exports=function(e){var t,r=s(this),i=a(r),c=n(i.length);arguments.length>1&&(t=arguments[1]);var u=void 0===t?"":a(t);""===u&&(u=" ");var l=n(e);if(l<=c)return i;for(var d=l-c;u.length<d;){var p=u.length,f=d-p;u+=p>f?o(u,0,f):u}var h=u.length>d?o(u,0,d):u;return h+i}},59005:(e,t,r)=>{"use strict";var n=r(4289),a=r(86378),s=r(55559),o=r(87496),i=r(33842),c=r(14563),u=s.apply(i()),l=function(e,t){a(e);var r=arguments.length>2?[t,arguments[2]]:[t];return u(e,r)};n(l,{getPolyfill:i,implementation:o,shim:c}),e.exports=l},33842:(e,t,r)=>{"use strict";var n=r(87496);e.exports=function(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:n}},14563:(e,t,r)=>{"use strict";var n=r(33842),a=r(4289);e.exports=function(){var e=n();return a(String.prototype,{padStart:e},{padStart:function(){return String.prototype.padStart!==e}}),e}},72006:()=>{}}]);try{stManager.done("dist/3bad6e117063d3681bf4f60574b483cc.08ff57fb23c566d04b8d.js")}catch(e){}